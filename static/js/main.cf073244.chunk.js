(this.webpackJsonprewer=this.webpackJsonprewer||[]).push([[0],{20:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},38:function(e,t,n){e.exports=n(55)},43:function(e,t,n){},45:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"GETAsynch",(function(){return b})),n.d(a,"UploadFile",(function(){return w})),n.d(a,"POSTAsynch",(function(){return g})),n.d(a,"IsSuccessful",(function(){return O})),n.d(a,"isResponse200",(function(){return y})),n.d(a,"tryParse",(function(){return x})),n.d(a,"getNewId",(function(){return k})),n.d(a,"parseId",(function(){return N}));var r=n(0),c=n.n(r),s=n(32),u=n.n(s),o=(n(43),n(1)),i=n.n(o),l=n(2),p=(n(45),n(6)),m=n(7),f=n(3),d=n(4),v="/rewer/php/requests";function b(e){return h.apply(this,arguments)}function h(){return(h=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+t,{method:"GET",cache:"no-cache",credentials:"include"});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.abrupt("return",n.text());case 7:return console.log(n),e.abrupt("return",n.status.toString());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+t,{method:"POST",cache:"no-cache",body:n});case 2:if(!(a=e.sent).ok){e.next=7;break}return e.abrupt("return",a.text());case 7:return console.log(a),e.abrupt("return",a.status.toString());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 2:if(!(a=e.sent).ok){e.next=7;break}return e.abrupt("return",a.text());case 7:return console.log(a),e.abrupt("return",a.status.toString());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return"success"===JSON.parse(e).msg||(console.log(e),!1)}function y(e){try{if(200===JSON.parse(e).response)return!0}catch(t){console.log(t),console.log(e)}}function x(e){try{return JSON.parse(e).object}catch(t){console.log(t),console.log(e)}return null}function k(e,t){try{if(e.id=JSON.parse(t).newId,null!=e.id)return!0;console.log(t)}catch(n){console.log(n),console.log(t)}return!1}function N(e){try{return JSON.parse(e).newId}catch(t){console.log(t),console.log(e)}return null}function S(e){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/cast/insertcast.php",t);case 2:return n=e.sent,e.abrupt("return",k(t,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/cast/updatecast.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/cast/deletecast.php",{id:t});case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return e.castTypeId<t.castTypeId?-1:e.castTypeId>t.castTypeId?1:0}function P(e){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/movie/insertmovie.php",t);case 2:return n=e.sent,e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{id:N(n)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t},e.next=3,g("/movie/selectdetailedmovie.php",n);case 3:return a=e.sent,(r=x(a)).casts.sort(F),r.genres.sort(Z),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/movie/selectlatestmovies.php",{limit:t});case 2:return n=e.sent,e.abrupt("return",x(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/movie/selectupcomingmovies.php",{limit:t});case 2:return n=e.sent,e.abrupt("return",x(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return H.apply(this,arguments)}function H(){return(H=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/movie/updatemovie.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return q.apply(this,arguments)}function q(){return(q=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/movie/uploadposter.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return K.apply(this,arguments)}function K(){return(K=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,b("/moviegenre/getgenres.php");case 3:return e.t1=e.sent,e.abrupt("return",e.t0.tryParse.call(e.t0,e.t1).sort(X));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return z.apply(this,arguments)}function z(){return(z=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,g("/moviegenre/insertgenre.php",t);case 3:return e.t1=e.sent,n=e.t0.parseId.call(e.t0,e.t1),e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{id:n}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,g("/moviegenre/deletegenre.php",{id:t});case 3:return e.t1=e.sent,e.abrupt("return",e.t0.isResponse200.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return e.name.localeCompare(t.name)}function Z(e,t){return e.genreName.localeCompare(t.genreName)}n(20);var ee=function(e){var t=e.movie,n=Object(r.useState)("/rewer/uploads/posters/".concat(t.id,".jpg")),a=Object(f.a)(n,2),s=a[0],u=a[1],o=Object(r.useState)(""),i=Object(f.a)(o,2),l=i[0],p=i[1],m=Object(r.useState)(""),d=Object(f.a)(m,2),v=d[0],b=d[1],h=Object(r.useRef)();return Object(r.useEffect)((function(){t.avgScore>6?(p("high-poster"),b("high"),h.current.style.display="block"):t.avgScore>3?(p("medium-poster"),b("medium"),h.current.style.display="block"):t.avgScore>0?(p("low-poster"),b("low"),h.current.style.display="block"):h.current.style.display="none"}),[t]),Object(r.useEffect)((function(){}),[t]),c.a.createElement("div",{className:"movie-container fade"},c.a.createElement("img",{className:l,src:s,alt:"".concat(t.title,"-poster"),onError:function(){u("/rewer/uploads/posters/0.jpg")}}),c.a.createElement("p",{className:"movie-title"},t.title),c.a.createElement("div",{ref:h,className:v},c.a.createElement("p",{className:"score-line"},Math.round(10*t.avgScore)/10)))},te=n(10),ne=n(11),ae=function(e){var t=e.movies,n=Object(r.useRef)(),a=Object(r.useRef)(),s=Object(r.useState)(t.slice(0,3)),u=Object(f.a)(s,2),o=u[0],i=u[1],l=Object(r.useState)(0),m=Object(f.a)(l,2),d=m[0],v=m[1];return Object(r.useEffect)((function(){i(t.slice(0,3)),t.length<=3?(n.current.style.visibility="hidden",a.current.style.visibility="hidden"):(n.current.style.visibility="visible",a.current.style.visibility="visible")}),[t]),Object(r.useEffect)((function(){i(t.slice(3*d,3*d+3))}),[d]),c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"slide-grid"},c.a.createElement("button",{ref:n,className:"slide-btn",onClick:function(){v(d-1<0?Math.ceil(t.length/3)-1:function(e){return e-1})}},c.a.createElement(te.a,{icon:ne.a})),c.a.createElement("div",{className:"movie-grid"},o.map((function(e){return c.a.createElement(p.b,{to:"/movie?movieId=".concat(e.id),className:"movie-anchor",key:"latest-".concat(e.id)},c.a.createElement(ee,{movie:e}))}))),c.a.createElement("button",{ref:a,className:"slide-btn",onClick:function(){3*(d+1)>=t.length?v(0):v((function(e){return e+1}))}},c.a.createElement(te.a,{icon:ne.c}))))},re=ae;function ce(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1];function s(){return(s=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(10);case 2:(t=e.sent)&&a(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),c.a.createElement("div",null,c.a.createElement(re,{movies:n}))}function se(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1];function s(){return(s=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(3);case 2:(t=e.sent)&&a(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),c.a.createElement("div",null,c.a.createElement(ae,{movies:n}))}var ue,oe=n(9),ie=n(17);function le(e){var t=Object(r.useRef)(e),n=Object(r.useState)(!1),a=Object(f.a)(n,2)[1];return[t,function(e){Object.is(t.current,e)||(t.current=e,a((function(e){return!e})))}]}function pe(e){var t=Object(r.useState)(e),n=Object(f.a)(t,2),a=n[0],c=n[1];return[a,c,function(e){c(Object(d.a)(Object(d.a)({},a),{},Object(ie.a)({},e.target.name,e.target.value)))}]}function me(e){var t=Object(r.useRef)(e),n=Object(r.useState)(!1),a=Object(f.a)(n,2)[1],c=function(e){Object.is(t.current,e)||(t.current=e,a((function(e){return!e})))};return[t,c,function(e){c(Object(d.a)(Object(d.a)({},t.current),{},Object(ie.a)({},e.target.name,e.target.value)))}]}function fe(e){return de.apply(this,arguments)}function de(){return(de=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/review/insertreview.php",t);case 2:return n=e.sent,e.abrupt("return",k(t,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return be.apply(this,arguments)}function be(){return(be=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/review/selectbyusernameandmovieid.php",{userName:localStorage.getItem("userName"),movieId:t,limit:10,offset:0});case 2:return n=e.sent,e.abrupt("return",x(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return we.apply(this,arguments)}function we(){return(we=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/review/updatereview.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/review/deletereview.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e,t,n,a){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(l.a)(i.a.mark((function e(t,n,a,r){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/review/selectreviewsbymovie.php",{id:t,limit:n,offset:a,orderby:r});case 2:return c=e.sent,e.abrupt("return",x(c));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e,t,n,a){return xe.apply(this,arguments)}function xe(){return(xe=Object(l.a)(i.a.mark((function e(t,n,a,r){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/review/selectreviewsbyuser.php",{userName:t,limit:n,offset:a,orderby:r});case 2:return c=e.sent,e.abrupt("return",x(c));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(l.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/review/selectfollowedreviews.php",{limit:t,offset:n});case 2:return a=e.sent,e.abrupt("return",x(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.popIndex="popIndex",e.date="date"}(ue||(ue={}));n(23);function Se(e){return new Date(e).getFullYear()}function Ie(e){var t=new Date(e);return"".concat(t.getDate()," ").concat(Ce[t.getMonth()]," ").concat(t.getFullYear())}var Ce=["Janury","February","March","April","May","June","July","August","September","October","November","December"],De=function(e){var t=e.value,n=Object(r.useState)("score"),a=Object(f.a)(n,2),s=a[0],u=a[1];return Object(r.useEffect)((function(){u(t>6?"score high":t<4?"score low":"score")}),[t]),c.a.createElement("div",{className:s},c.a.createElement("p",null,t))};function Te(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/review/insertreviewlike.php",t);case 2:return n=e.sent,e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{id:N(n)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/review/updatereviewlike.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Le=function(e){var t=e.reviewLike,n=e.popIndex,a=Object(r.useState)(t),s=Object(f.a)(a,2),u=s[0],o=s[1],p=Object(r.useState)(n),m=Object(f.a)(p,2),v=m[0],b=m[1],h=Object(r.useState)("#949494"),w=Object(f.a)(h,2),E=w[0],g=w[1],j=Object(r.useState)("#949494"),O=Object(f.a)(j,2),y=O[0],x=O[1],k=Object(r.useRef)(),N=Object(r.useRef)();function S(e){var t=e.value-u.value;b((function(e){return e+t}))}function I(e){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(t);case 2:S(n=e.sent),o(n),(null==n||n.id<1)&&alert("Server error: could not like/dislike the selected review.");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(t),S(t),e.next=4,Fe(t);case 4:if(e.sent){e.next=6;break}alert("Server error: could not like/dislike the selected review.");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g("#949494"),x("#949494");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){null==localStorage.getItem("userName")&&(k.current.style.display="none",N.current.style.display="none")}),[]),Object(r.useEffect)((function(){!function(){R.apply(this,arguments)}(),1===u.value?g("#1EF007"):-1===u.value&&x("#E11B05")}),[u]),c.a.createElement("div",null,c.a.createElement("span",{ref:k},c.a.createElement(te.a,{className:"up-arrow",onClick:function(){var e;e=1===u.value?Object(d.a)(Object(d.a)({},u),{},{value:0}):(u.value,Object(d.a)(Object(d.a)({},u),{},{value:1})),u.id>0?D(e):I(e)},color:E,icon:ne.h})),c.a.createElement("span",{className:"pop-index"},v),c.a.createElement("span",{ref:N},c.a.createElement(te.a,{className:"down-arrow",onClick:function(){var e;e=-1===u.value?Object(d.a)(Object(d.a)({},u),{},{value:0}):(u.value,Object(d.a)(Object(d.a)({},u),{},{value:-1})),u.id>0?D(e):I(e)},color:y,icon:ne.g})))},Ue=function(e){var t=e.review,n=Object(r.useState)(t),a=Object(f.a)(n,2),s=a[0],u=(a[1],Object(r.useState)(c.a.createElement("p",null))),o=Object(f.a)(u,2),i=o[0],l=o[1],m=c.a.createElement(r.Fragment,null,c.a.createElement("p",{className:"review-text"},t.text.substring(0,500)),c.a.createElement("p",{onClick:function(){l(c.a.createElement(r.Fragment,null,c.a.createElement("p",{className:"review-text"},t.text),c.a.createElement("p",{onClick:d,className:"show-more"},"Show less")))},className:"show-more"},"Show more"));function d(){l(m)}return Object(r.useEffect)((function(){t.text.length>500?d():l(c.a.createElement("p",{className:"review-text"},t.text))}),[t]),c.a.createElement("div",{className:"review-container"},c.a.createElement("div",{className:"review-grid"},c.a.createElement(p.b,{className:"nick-name",to:"/user?userName=".concat(s.userName)},s.nickName),c.a.createElement("p",{className:"review-date"},Ie(s.date)),c.a.createElement(De,{value:s.score})),i,c.a.createElement(Le,{reviewLike:s.myLike,popIndex:s.popIndex}))},Me=function(e){var t=e.review,n=Object(r.useState)("/rewer/uploads/posters/".concat(t.movieId,".jpg")),a=Object(f.a)(n,2),s=a[0],u=a[1];return Object(r.useEffect)((function(){}),[]),c.a.createElement("div",{className:"followed-review-grid"},c.a.createElement("div",{className:"review-poster-container"},c.a.createElement(p.b,{to:"/movie?movieId=".concat(t.movieId)},c.a.createElement("img",{src:s,alt:"".concat(t.movieTitle,"-poster"),onError:function(){u("/rewer/uploads/posters/0.jpg")}}),c.a.createElement("p",null,t.movieTitle))),c.a.createElement("div",null,c.a.createElement(Ue,{review:t})))};function Ae(){var e=le([]),t=Object(f.a)(e,2),n=t[0],a=t[1];function s(){window.addEventListener("scroll",o)}function u(){window.removeEventListener("scroll",o)}function o(){window.innerHeight+window.scrollY>=.9*document.body.offsetHeight&&function(){p.apply(this,arguments)}()}function p(){return(p=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("listening"),u(),e.next=4,ke(5,n.current.length);case 4:(t=e.sent)?(a([].concat(Object(oe.a)(n.current),Object(oe.a)(t))),5===t.length&&s()):alert("Server error: could not download review data.");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(5,0);case 2:(t=e.sent)?(a(t),5===t.length&&s()):alert("Server error: could not download review data.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){return localStorage.getItem("userName")&&function(){m.apply(this,arguments)}(),function(){u()}}),[]),c.a.createElement("div",null,n.current.map((function(e){return c.a.createElement(Me,{key:"followed-".concat(e.id),review:e})})))}n(24);function Je(){return c.a.createElement("div",{className:"main-container"},c.a.createElement("h2",null,"Latest releases"),c.a.createElement(ce,null),c.a.createElement("h2",null,"Upcoming"),c.a.createElement(se,null),c.a.createElement("h3",null,"Follows"),c.a.createElement(Ae,null))}function Ye(){var e=c.a.createElement("span",null);return parseInt(localStorage.getItem("permission"))>1&&(e=c.a.createElement(p.b,{className:"anchor-btn",to:"/editmovie?movieId=0"},"Add new movie")),c.a.createElement("div",{className:"main-container"},e)}var Be=n(34);function Ve(e){var t=window.location.search,n=new URLSearchParams(t);return decodeURIComponent(n.get(e))}function He(e,t){var n=e;return t.length>0&&(n=function(e,t){e+="?";var n,a=Object(Be.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;e+="".concat(r.name,"=").concat(encodeURIComponent(r.value)),r.name!==t[t.length-1].name&&(e+="&")}}catch(c){a.e(c)}finally{a.f()}return e}(n,t)),encodeURI(n)}function Ge(e){!function(e){var t=document.location.href,n=t.split("?");if(n.length>=2){for(var a=n.shift(),r=n.join("?"),c=encodeURIComponent(e)+"=",s=r.split(/[&;]/g),u=s.length;u-- >0;)-1!==s[u].lastIndexOf(c,0)&&s.splice(u,1);t=a+"?"+s.join("&"),window.history.pushState("",document.title,t)}}(e.name),function(e){window.location.href.split("?").length>1?window.history.pushState("","","".concat(window.location.href,"&").concat(e.name,"=").concat(e.value)):window.history.pushState("","","".concat(window.location.href,"?").concat(e.name,"=").concat(e.value))}(e)}var qe=function(e){var t=e.movie,n=e.movieBinder,a=e.setMovie,s=Object(r.useRef)(),u=c.a.createElement("button",{onClick:function(){return F.apply(this,arguments)},type:"button"},"Create Movie's Page"),o=c.a.createElement("button",{onClick:function(){return L.apply(this,arguments)},type:"button"},"Save Changes"),p=Object(r.useState)(u),m=Object(f.a)(p,2),d=m[0],v=m[1],b=c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"Create the movie's page to edit this picture.")),h=c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"It is recommended to use an image with a standard poster image ratio"),c.a.createElement("input",{ref:s,type:"file",accept:".png,.jpg,.jpeg",className:"file-input"}),c.a.createElement("button",{onClick:function(){return D.apply(this,arguments)}},"Upload")),w=Object(r.useState)(b),E=Object(f.a)(w,2),g=E[0],j=E[1],O=Object(r.useState)(""),y=Object(f.a)(O,2),x=y[0],k=y[1],N=Object(r.useState)(""),S=Object(f.a)(N,2),I=S[0],C=S[1];function D(){return(D=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("imageFile",s.current.files[0],"".concat(t.current.id,".jpg")),e.next=4,G(n);case 4:if(!e.sent){e.next=8;break}k("/rewer/uploads/posters/".concat(t.current.id,".jpg?").concat((new Date).getTime())),e.next=9;break;case 8:alert("Upload unsuccessful");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(o),j(h),k("/rewer/uploads/posters/".concat(t.current.id,".jpg?").concat((new Date).getTime()));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.current);case 2:null!=(n=e.sent)&&null!=n.id?(C("Movie's page was created successfully."),Ge({name:"movieId",value:n.id.toString()}),a(n),T()):C("Internal error: the server was unable to fulfill your request.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t.current);case 2:if(!e.sent){e.next=6;break}C("Changes have been successfully saved: ".concat((new Date).getHours(),":").concat((new Date).getMinutes())),e.next=8;break;case 6:C("WARNING: your last attempt to save your work was declined by the server."),alert("Request failed: server error.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){t.current.id>0?T():k("/rewer/uploads/posters/0.jpg?")}),[]),c.a.createElement(r.Fragment,null,d,c.a.createElement("br",null),c.a.createElement("p",null,I),c.a.createElement("div",{className:"detail-grid"},c.a.createElement("div",{className:"span-2"},c.a.createElement("input",{value:t.current.title,onChange:n,name:"title",type:"text",placeholder:"Title",className:"title-input"}),c.a.createElement("br",null),c.a.createElement("label",null,"Runtime:"),c.a.createElement("input",{value:t.current.runtime,onChange:n,name:"runtime",type:"text"}),c.a.createElement("br",null),c.a.createElement("label",null,"Release date:"),c.a.createElement("input",{value:t.current.releaseDate.toString(),onChange:n,name:"releaseDate",type:"date"}),c.a.createElement("textarea",{value:t.current.summary,onChange:n,name:"summary",placeholder:"Write something about the story...",rows:20})),c.a.createElement("div",null,c.a.createElement("img",{src:x,onError:function(){k("/rewer/uploads/posters/0.jpg")},alt:"Poster",title:"Poster",className:"poster"}),g)))};function We(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/artist/insertartist.php",t);case 2:return n=e.sent,e.abrupt("return",k(t,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(l.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t},e.next=3,g("/artist/selectartist.php",n);case 3:return a=e.sent,e.abrupt("return",x(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/artist/updateartist.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/artist/uploadportrait.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t,n){return tt.apply(this,arguments)}function tt(){return(tt=Object(l.a)(i.a.mark((function e(t,n,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/artist/selectartistsbykeyword.php",{keyword:t,limit:n,offset:a});case 2:return r=e.sent,e.abrupt("return",x(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return at.apply(this,arguments)}function at(){return(at=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,g("/artist/selectdetailedartist.php",{id:t});case 3:return e.t1=e.sent,(n=e.t0.tryParse.call(e.t0,e.t1)).casts.sort(rt),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e,t){return new Date(e.movieDate)<new Date(t.movieDate)?-1:new Date(e.movieDate)>new Date(t.movieDate)?1:0}function ct(){return st.apply(this,arguments)}function st(){return(st=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/cast/getcasttypes.php");case 2:return t=e.sent,e.abrupt("return",x(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut=function(e){var t,n=e.artist,a=e.onClick,s=e.selectedArtist,u=Object(r.useRef)();return c.a.createElement("div",{ref:u,onClick:function(){a()},className:null==s?"artist-row":s.id===n.id?"artist-row selected-row":"artist-row"},c.a.createElement("img",{src:"/rewer/uploads/portraits/".concat(n.id,".jpg"),alt:"NOT SET"}),c.a.createElement("p",null,n.name),c.a.createElement("p",{title:n.birthPlace},(t=new Date(n.birthDate),"".concat(t.getFullYear(),". ").concat(Ce[t.getMonth()]," ").concat(t.getDate()))))},ot=(n(30),function(e){var t=e.artistList,n=e.onSelectionChanged,a=le(void 0),r=Object(f.a)(a,2),s=r[0],u=r[1];return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(ut,{key:"artist-row-".concat(e.id),selectedArtist:s.current,artist:e,onClick:function(){u(e),n(s.current)}})})))}),it=function(e){var t=e.typeList,n=e.updateValue,a=e.initialValue,s=void 0===a?null:a,u=Object(r.useRef)();return Object(r.useEffect)((function(){null!=s&&(u.current.value=s)}),[]),c.a.createElement("select",{ref:u,onChange:function(){n(u.current.value)}},t.map((function(e){return c.a.createElement("option",{key:"castType_".concat(e.value),value:e.value},e.name)})))};n(53);var lt=function(e){var t=e.cast,n=e.castTypes,a=e.onDelete,s=e.onUpdate,u=Object(r.useState)("edit-cast-row"),o=Object(f.a)(u,2),p=o[0],m=o[1],v=me(t),b=Object(f.a)(v,3),h=b[0],w=b[1],E=b[2];function g(){return(g=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t.id);case 2:if(!e.sent){e.next=6;break}a(),e.next=7;break;case 6:alert("Server error");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(h.current);case 2:if(!e.sent){e.next=7;break}s(h.current),y(),e.next=8;break;case 7:alert("Server error: could not save your work.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){p.includes("unsaved")||m("edit-cast-row unsaved")},y=function(){p.includes("unsaved")&&m(p.replace(" unsaved",""))};return c.a.createElement("div",{className:p},c.a.createElement("img",{src:"/rewer/uploads/portraits/".concat(h.current.artistId,".jpg"),alt:t.artistName}),c.a.createElement("p",null,h.current.artistName),c.a.createElement("input",{name:"name",value:h.current.name,onChange:function(e){E(e),O()}}),c.a.createElement(it,{typeList:n,initialValue:h.current.castTypeId,updateValue:function(e){!function(e){w(Object(d.a)(Object(d.a)({},h.current),{},{castTypeId:parseInt(e)}))}(e),O()}}),c.a.createElement("button",{onClick:function(){return j.apply(this,arguments)}},"Update"),c.a.createElement("button",{onClick:function(){return g.apply(this,arguments)}},"Delete"))},pt=function(e){var t=e.castList,n=e.setCastList,a=e.castTypes;function r(e){var a,r,c;n((a=t,r=t.find((function(t){return t.id===e.id})),c=e,a.map((function(e){return e===r?c:e}))))}return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(lt,{key:"edit-cast-".concat(e.id),onDelete:function(){var a;a=e.id,n(t.filter((function(e){return e.id!==a})))},cast:e,onUpdate:r,castTypes:a})})))},mt=function(e){var t=e.movie,n=e.setMovie,a=Object(r.useState)([]),s=Object(f.a)(a,2),u=s[0],o=s[1],m=Object(r.useState)([]),v=Object(f.a)(m,2),b=v[0],h=v[1],w=me({search:""}),E=Object(f.a)(w,3),g=E[0],j=(E[1],E[2]),O=me({id:0,movieId:t.current.id,artistId:0,castTypeId:1,name:"",artistName:"Not selected"}),y=Object(f.a)(O,3),x=y[0],k=y[1],N=y[2];function I(){return(I=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([C(),T()]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,ct();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,et(g.current.search,25,0);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.current.id&&null!=t.current.id){e.next=3;break}return alert("You must create the movie's page first."),e.abrupt("return",!1);case 3:if(k(Object(d.a)(Object(d.a)({},x.current),{},{movieId:t.current.id})),0!==x.current.artistId&&null!=x.current.artistId){e.next=9;break}return alert("Choose an artist!"),e.abrupt("return",!1);case 9:return e.next=11,S(x.current);case 11:if(!e.sent){e.next=17;break}return L([].concat(Object(oe.a)(t.current.casts),[x.current]).sort(F)),k(Object(d.a)(Object(d.a)({},x.current),{},{id:0,name:""})),e.abrupt("return",!0);case 17:return alert("Server error."),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){n(Object(d.a)(Object(d.a)({},t.current),{},{casts:e}))}return Object(r.useEffect)((function(){!function(){I.apply(this,arguments)}()}),[]),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("h2",null,"Cast: "),c.a.createElement(pt,{castList:t.current.casts,setCastList:L,castTypes:u})),c.a.createElement("div",{className:"adder-panel"},c.a.createElement("h3",null,"Add cast member:"),c.a.createElement("span",{className:"artist-name"},x.current.artistName),c.a.createElement(it,{typeList:u,updateValue:function(e){k(Object(d.a)(Object(d.a)({},x.current),{},{castTypeId:parseInt(e)}))}}),c.a.createElement("input",{value:x.current.name,onChange:N,name:"name",placeholder:"As"}),c.a.createElement("button",{onClick:function(){return P.apply(this,arguments)}},"Add"),c.a.createElement(p.b,{to:"/editartist?artistId=0"},"Create new star")),c.a.createElement("div",null,c.a.createElement("input",{value:g.current.search,name:"search",onChange:j,onKeyDown:function(e){var t;t=T,"Enter"===e.key&&t()},placeholder:"Search"}),c.a.createElement("button",{onClick:T},"Search"),c.a.createElement(ot,{artistList:b,onSelectionChanged:function(e){k(Object(d.a)(Object(d.a)({},x.current),{},{artistId:e.id,artistName:e.name}))}})))},ft=function(e){var t=e.genres,n=e.updateSelected,a=Object(r.useRef)();return c.a.createElement("select",{ref:a,onChange:function(){n(a.current.value)}},t.map((function(e){return c.a.createElement("option",{key:"opt".concat(e.id),value:e.id},e.name)})))},dt=function(e){var t=e.movie,n=e.setMovieGenres,a=Object(r.useState)([]),s=Object(f.a)(a,2),u=s[0],o=s[1],p=le(0),m=Object(f.a)(p,2),d=m[0],v=m[1];function b(){return(b=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:null!=(t=e.sent)?o(t):alert("Server error: could not download the list of genres");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=d.current&&0!==d.current||v(u[0].id),a={id:0,genreName:E(d.current),genreId:d.current,movieId:t.current.id},e.next=4,_(a);case 4:null!=(a=e.sent)&&n([].concat(Object(oe.a)(t.current.genres),[a]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(l.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(a);case 2:if(!e.sent){e.next=6;break}n(t.current.genres.filter((function(e){return e.id!==a}))),e.next=7;break;case 6:alert("Server error");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return u.find((function(t){return t.id===e})).name}return Object(r.useEffect)((function(){!function(){b.apply(this,arguments)}()}),[]),c.a.createElement("div",null,c.a.createElement("h3",null,"Genres:"),c.a.createElement("div",{className:"edit-genre-container"},t.current.genres.map((function(e){return c.a.createElement("div",{key:"genre-".concat(e.id),className:"edit-genre"},c.a.createElement("span",null,e.genreName),c.a.createElement("button",{onClick:function(){!function(e){w.apply(this,arguments)}(e.id)}},c.a.createElement(te.a,{icon:ne.i})))}))),c.a.createElement(ft,{genres:u,updateSelected:function(e){v(parseInt(e))}}),c.a.createElement("button",{onClick:function(){return h.apply(this,arguments)}},"Add"),c.a.createElement("br",null))};function vt(){var e=me({id:parseInt(Ve("movieId")),title:"",releaseDate:new Date,summary:"",runtime:0,casts:[],genres:[]}),t=Object(f.a)(e,3),n=t[0],a=t[1],s=t[2],u=Object(r.useRef)();function o(){return(o=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(n.current.id);case 2:null!=(t=e.sent)?(a(t),p()):alert("Server error");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){u.current.style.display="block"}return Object(r.useEffect)((function(){n.current.id>0&&function(){o.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){n.current.id>0?p():u.current.style.display="none"}),[n.current]),c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"main-container"},c.a.createElement(qe,{movie:n,setMovie:a,movieBinder:s}),c.a.createElement("div",{ref:u},c.a.createElement(dt,{movie:n,setMovieGenres:function(e){a(Object(d.a)(Object(d.a)({},n.current),{},{genres:e}))}}),c.a.createElement(mt,{movie:n,setMovie:a}))))}n(25);function bt(e){return ht.apply(this,arguments)}function ht(){return(ht=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/user/selectdetaileduser.php",{userName:t});case 2:return n=e.sent,e.abrupt("return",x(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e){return Et.apply(this,arguments)}function Et(){return(Et=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/user/updateuserinfo.php",t);case 2:if(!y(e.sent)){e.next=6;break}return localStorage.setItem("nickName",t.nickName),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(e){return jt.apply(this,arguments)}function jt(){return(jt=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/user/uploadavatar.php",t);case 2:if(n=e.sent,e.prev=3,200!==JSON.parse(n).response){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0),console.log(n);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function Ot(e){return yt.apply(this,arguments)}function yt(){return(yt=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/user/updatepermission.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e){return kt.apply(this,arguments)}function kt(){return(kt=Object(l.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userName:t},e.next=3,g("/user/doesexist.php",n);case 3:return a=e.sent,e.prev=4,e.abrupt("return",JSON.parse(a).exists);case 8:return e.prev=8,e.t0=e.catch(4),console.log(e.t0),console.log(a),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[4,8]])})))).apply(this,arguments)}function Nt(e,t){return St.apply(this,arguments)}function St(){return(St=Object(l.a)(i.a.mark((function e(t,n){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={authUser:t,autoLogin:n},e.next=3,g("/user/login.php",a);case 3:r=e.sent,e.prev=4,c=JSON.parse(r).response,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(4),console.log(e.t0),console.log(r),e.abrupt("return",!1);case 13:if(console.log(c),c.isSuccessful){e.next=17;break}return localStorage.clear(),e.abrupt("return",!1);case 17:return localStorage.clear(),localStorage.setItem("userName",c.user.userName),localStorage.setItem("nickName",c.user.nickName),console.log(c.user.permission.toString()),localStorage.setItem("permission",c.user.permission.toString()),n&&localStorage.setItem("session",c.user.session),e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,null,[[4,8]])})))).apply(this,arguments)}function It(e){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/user/insertuser.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.hasOwnProperty("userName")){e.next=2;break}return e.abrupt("return",{isLoggedIn:!1});case 2:return e.next=4,g("/user/isloggedin.php",{userName:localStorage.getItem("userName"),session:localStorage.getItem("session")});case 4:return t=e.sent,e.prev=5,e.abrupt("return",JSON.parse(t).response);case 9:e.prev=9,e.t0=e.catch(5),console.log(e.t0),console.log(t);case 13:return e.abrupt("return",{isLoggedIn:!1});case 14:case"end":return e.stop()}}),e,null,[[5,9]])})))).apply(this,arguments)}function Rt(e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(l.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={user:t,newPassword:n},e.next=3,g("/user/updatepassword.php",a);case 3:return r=e.sent,e.abrupt("return",y(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/user/logout.php");case 2:localStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt();case 2:if(!1!==(t=e.sent).isLoggedIn){e.next=6;break}return localStorage.clear(),e.abrupt("return",!1);case 6:return t.setNewSession&&localStorage.setItem("session",t.newSession),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var At=function(){var e=Object(r.useState)(""),t=Object(f.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),u=Object(f.a)(s,2),o=u[0],p=u[1],m=Object(r.useRef)(),d=Object(r.useRef)(),v=Object(r.useRef)(),b=Object(r.useRef)();function h(){return(h=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt(m.current.value);case 2:if(!e.sent){e.next=6;break}a("Taken"),e.next=7;break;case 6:a("Free");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,e.next=3,xt(m.current.value);case 3:if(!e.sent){e.next=7;break}p("Username already taken."),a("Taken"),t=!1;case 7:v.current.value!==b.current.value&&(console.log(v.current.value),console.log(b.current.value),p((function(e){return"".concat(e," The two passwords don't match.")})),t=!1),t&&E();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={userName:m.current.value,nickName:d.current.value,password:v.current.value,permission:1},e.next=3,It(t);case 3:if(!e.sent){e.next=7;break}p("You have successfully signed up to our website!"),e.next=8;break;case 7:p("Process failed.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",null,c.a.createElement("h2",null,"Sign up"),c.a.createElement("div",{className:"form-container"},c.a.createElement("label",{className:"form-item"},"New username:"),c.a.createElement("input",{ref:m,className:"form-item",name:"newUserName",placeholder:"to log in"}),c.a.createElement("div",{className:"form-item"}),c.a.createElement("div",{className:"form-item"},c.a.createElement("span",{className:"form-item"},n),c.a.createElement("button",{onClick:function(){return h.apply(this,arguments)}},"Check")),c.a.createElement("label",{className:"form-item"},"New nickname:"),c.a.createElement("input",{ref:d,className:"form-item",name:"newNickName",placeholder:"seen by others"}),c.a.createElement("label",{className:"form-item"},"New password:"),c.a.createElement("input",{ref:v,className:"form-item",type:"password",name:"newPassword1",placeholder:"new password"}),c.a.createElement("label",{className:"form-item"},"New password again:"),c.a.createElement("input",{ref:b,className:"form-item",type:"password",name:"newPassword2",placeholder:"new password again"})),c.a.createElement("p",null,o),c.a.createElement("button",{onClick:function(){return w.apply(this,arguments)},className:"login-btn",type:"button"},"Sign Up"))},Jt=function(){var e=Object(r.useState)(""),t=Object(f.a)(e,2),n=t[0],a=t[1],s=Object(r.useRef)(),u=Object(r.useRef)(),o=Object(r.useRef)(),p=c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"Not signed up yet?",c.a.createElement("button",{onClick:function(){h(c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"bottom-border"}),c.a.createElement(At,null)))}},"Do it now!")),c.a.createElement("div",{className:"bottom-border"})),d=Object(r.useState)(p),v=Object(f.a)(d,2),b=v[0],h=v[1],w=Object(m.f)();function E(){return(E=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt({userName:s.current.value,nickName:void 0,permission:1,password:u.current.value},o.current.checked);case 2:e.sent?(w.push("/"),window.location.reload()):a("Incorrect user authentications.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",null,c.a.createElement("h2",null,"Login"),c.a.createElement("form",{action:""},c.a.createElement("div",{className:"form-container"},c.a.createElement("label",{className:"form-item"},"Username:"),c.a.createElement("input",{className:"form-item",ref:s,name:"userName",placeholder:"username"}),c.a.createElement("label",{className:"form-item"},"Password:"),c.a.createElement("input",{className:"form-item",ref:u,type:"password",placeholder:"password",name:"password"}),c.a.createElement("div",{className:"form-item"},c.a.createElement("label",null,"Keep me logged in"),c.a.createElement("input",{ref:o,type:"checkbox"})),c.a.createElement("button",{onClick:function(){return E.apply(this,arguments)},className:"login-btn form-item",type:"button",name:"submit"},"Login")),c.a.createElement("p",null,n)),b)},Yt=function(){var e=Object(r.useState)(""),t=Object(f.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),u=Object(f.a)(s,2),o=u[0],p=u[1],m=Object(r.useState)(""),d=Object(f.a)(m,2),v=d[0],b=d[1],h=Object(r.useState)(""),w=Object(f.a)(h,2),E=w[0],g=w[1];function j(){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o===v){e.next=4;break}return g("The two passwords don't match"),y(),e.abrupt("return",!1);case 4:return e.next=6,Rt({userName:localStorage.getItem("userName"),password:n,permission:0,nickName:localStorage.getItem("nickName")},o);case 6:if(!e.sent){e.next=12;break}return g("You password has been updated."),y(),e.abrupt("return",!0);case 12:return g("Access denied."),y(),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){a(""),p(""),b("")}return c.a.createElement(r.Fragment,null,c.a.createElement("h2",null,"Update password"),c.a.createElement("div",{className:"form-container"},c.a.createElement("label",{className:"form-item"},"Current password:"),c.a.createElement("input",{value:n,onChange:function(e){return a(e.target.value)},type:"password",className:"form-item",placeholder:"old password"}),c.a.createElement("label",{className:"form-item"},"New password:"),c.a.createElement("input",{value:o,onChange:function(e){return p(e.target.value)},type:"password",className:"form-item",placeholder:"new password"}),c.a.createElement("label",{className:"form-item"},"New password again:"),c.a.createElement("input",{value:v,onChange:function(e){return b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&j()},type:"password",className:"form-item",placeholder:"new password to check"}),c.a.createElement("p",null,E)),c.a.createElement("button",{onClick:j,type:"button"},"Update password"))};n(31);function Bt(){var e=pe({userName:localStorage.getItem("userName"),nickName:localStorage.getItem("nickName"),permission:1,about:"",followerCount:0}),t=Object(f.a)(e,3),n=t[0],a=t[1],s=t[2],u=Object(r.useState)(""),o=Object(f.a)(u,2),p=o[0],m=o[1],d=Object(r.useState)(""),v=Object(f.a)(d,2),b=v[0],h=v[1],w=Object(r.useState)("/rewer/uploads/avatars/".concat(localStorage.getItem("userName"),".jpg")),E=Object(f.a)(w,2),g=E[0],j=E[1],O=Object(r.useRef)();function y(){return(y=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt(n);case 2:if(!e.sent){e.next=6;break}m("Your profile has been updated"),e.next=7;break;case 6:m("Request failed.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt(localStorage.getItem("userName"));case 2:(t=e.sent)&&a(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("imageFile",O.current.files[0],"".concat(localStorage.getItem("userName"),".jpg")),e.next=4,gt(t);case 4:if(!e.sent){e.next=9;break}h("Avatar updated."),j("/rewer/uploads/avatars/".concat(localStorage.getItem("userName"),".jpg?").concat((new Date).getTime())),e.next=10;break;case 9:h("Process failed. Make sure file's size is not bigger than 10MB.");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){N.apply(this,arguments)}()}),[]),c.a.createElement("div",null,c.a.createElement("p",null,"User settings"),c.a.createElement("button",{onClick:function(){return y.apply(this,arguments)}},"Log out"),c.a.createElement("div",{className:"profile-grid"},c.a.createElement("div",{className:"profile-grid-item"},c.a.createElement("img",{src:g,onError:function(){j("/rewer/uploads/avatars/default.jpg")},className:"image",alt:"Avatar",title:"Avatar"}),c.a.createElement("input",{ref:O,className:"file-input",type:"file"}),c.a.createElement("button",{onClick:function(){return S.apply(this,arguments)},type:"button"},"Upload"),c.a.createElement("p",null,b)),c.a.createElement("div",{className:"profile-grid-item"},c.a.createElement("h1",null,localStorage.getItem("userName")),c.a.createElement("textarea",{name:"about",value:n.about,onChange:s,rows:10}))),c.a.createElement("div",null,c.a.createElement("label",null,"My nickname: "),c.a.createElement("input",{type:"text",name:"nickName",value:n.nickName,onKeyDown:function(e){"Enter"===e.key&&x()},accept:".png,.jpg",onChange:s}),c.a.createElement("button",{onClick:x,type:"button",className:"save"},"Save")),c.a.createElement("p",null,p),c.a.createElement("div",{className:"bottom-border"}),c.a.createElement(Yt,null))}function Vt(){var e;return e=null!=localStorage.getItem("userName")?c.a.createElement(Bt,null):c.a.createElement(Jt,null),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"grid-container"},c.a.createElement("div",{className:"grid-item"}),c.a.createElement("div",{className:"grid-item main"},e),c.a.createElement("div",{className:"grid-item"})))}var Ht=n(35),Gt=(n(54),function(e){var t=e.to,n=e.content;return c.a.createElement(p.b,{to:t},n)}),qt=function(){var e=Object(r.useRef)(null),t=Object(r.useState)(null),n=Object(f.a)(t,2),a=n[0],s=n[1],u=Object(r.useState)([]),o=Object(f.a)(u,2),i=o[0],l=o[1];return window.onscroll=function(){e.current.offsetTop,window.pageYOffset,e.current.classList.add("sticky")},Object(r.useEffect)((function(){console.log(localStorage.getItem("userName")),console.log(localStorage.getItem("nickName")),console.log(localStorage.getItem("session")),console.log(localStorage.getItem("permission")),parseInt(localStorage.getItem("permission"))>1&&l((function(e){return[].concat(Object(oe.a)(e),[{to:"/manage",content:"Manage"}])})),null!=localStorage.getItem("userName")?s(c.a.createElement(te.a,{icon:ne.j})):s(c.a.createElement(te.a,{icon:ne.f}))}),[]),c.a.createElement("header",null,c.a.createElement("div",{ref:e,className:"topnav"},c.a.createElement(Gt,{to:"/profile",content:a}),c.a.createElement(Gt,{to:"/rewer",content:"Home"}),c.a.createElement(Gt,{to:He("/movies",[{name:"name",value:"m\xfav\xedie"},{name:"search",value:"s\xe1l\xe1l\xe1"}]),content:"Movies"}),c.a.createElement(Gt,{to:"/stars",content:"Stars"}),c.a.createElement(Gt,{to:"/follows",content:"Follows"}),i.map((function(e){return c.a.createElement(Gt,{key:"".concat(e.to).concat(e.content),to:e.to,content:e.content})})),c.a.createElement("a",{onClick:function(){e.current.classList.contains("responsive")?e.current.classList.remove("responsive"):(e.current.classList.add("responsive"),document.body.scrollTop=0,document.documentElement.scrollTop=0)},className:"icon"},c.a.createElement(te.a,{icon:ne.b}))))};function Wt(){var e=c.a.createElement("span",null);return parseInt(localStorage.getItem("permission"))>1&&(e=c.a.createElement(p.b,{className:"anchor-btn",to:"/editartist?artistId=0"},"Add new star")),c.a.createElement("div",{className:"main-container"},e)}var Kt=function(e){var t=Object(r.useRef)(),n=c.a.createElement("button",{onClick:function(){return P.apply(this,arguments)}},"Create"),a=c.a.createElement("button",{onClick:function(){return L.apply(this,arguments)}},"Save"),s=c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"Create the artist's page to modify their portrait.")),u=c.a.createElement(r.Fragment,null,c.a.createElement("input",{ref:t,type:"file",accept:".png,.jpg",className:"file-input"}),c.a.createElement("p",null,"It is recommended to use pictures with the standard portrait image ratio (9:16)"),c.a.createElement("button",{onClick:function(){return U.apply(this,arguments)}},"Upload")),o=me({id:parseInt(Ve("artistId")),name:"",birthPlace:"",birthDate:new Date,deathPlace:"",deathDate:new Date,bio:""}),p=Object(f.a)(o,3),m=p[0],d=p[1],v=p[2],b=Object(r.useState)(c.a.createElement(r.Fragment,null)),h=Object(f.a)(b,2),w=h[0],E=h[1],g=Object(r.useState)(""),j=Object(f.a)(g,2),O=j[0],y=j[1],x=Object(r.useState)(s),k=Object(f.a)(x,2),N=k[0],S=k[1],I=Object(r.useState)(""),C=Object(f.a)(I,2),D=C[0],T=C[1];function R(){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(parseInt(Ve("artistId")));case 2:null!=(t=e.sent)?(d(t),E(a),S(u)):y("Error trying to load artistpage.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(m.current);case 2:null!=m.current.id?(y("Artist's page successfully created."),Ge({name:"artistId",value:m.current.id.toString()}),R()):y("Internal error: the server was unable to fulfill your request.");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$e(m.current)?y("Changes saved."):(y("WARNING: your last attempt to save your work was declined by the server."),alert("Request failed: server error."));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("imageFile",t.current.files[0],"".concat(m.current.id,".jpg")),e.next=4,Xe(n);case 4:if(!e.sent){e.next=8;break}T("/rewer/uploads/portraits/".concat(m.current.id,".jpg?").concat((new Date).getTime())),e.next=9;break;case 8:alert("Process failed. Make sure file's size is not bigger than 10MB.");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){m.current.id>0?R():(E(n),S(s)),T("/rewer/uploads/portraits/".concat(m.current.id,".jpg"))}),[]),c.a.createElement("div",null,O,c.a.createElement("br",null),w,c.a.createElement("br",null),c.a.createElement("input",{value:m.current.name,onChange:v,type:"text",name:"name",placeholder:"Name",className:"name-input"}),c.a.createElement("div",{className:"detail-grid"},c.a.createElement("div",{className:"detail-grid-item span-2"},c.a.createElement("h3",null,"Born: "),c.a.createElement("input",{value:m.current.birthPlace,type:"text",onChange:v,name:"birthPlace",className:"place-input",placeholder:"Birthplace"}),c.a.createElement("input",{value:m.current.birthDate.toString(),type:"date",onChange:v,name:"birthDate"}),c.a.createElement("br",null),c.a.createElement("h3",null,"Died: "),c.a.createElement("input",{value:m.current.deathPlace,type:"text",onChange:v,name:"deathPlace",className:"place-input",placeholder:"leave empty if irrelevant",title:"leave empty if irrelevant"}),c.a.createElement("input",{value:m.current.deathDate.toString(),type:"date",onChange:v,name:"deathDate"}),c.a.createElement("textarea",{value:m.current.bio,onChange:v,name:"bio",placeholder:"Biography",rows:30})),c.a.createElement("div",{className:"detail-grid-item first"},c.a.createElement("img",{className:"portrait",src:D,onError:function(){T("/rewer/uploads/portraits/0.jpg")},alt:"Portrait"}),c.a.createElement("br",null),N)))};function _t(){return c.a.createElement("div",{className:"grid-container"},c.a.createElement("div",{className:"grid-item"}),c.a.createElement("div",{className:"grid-item main"},c.a.createElement(Kt,{artistId:10})),c.a.createElement("div",{className:"grid-item"}))}var zt=function(e){var t=e.cast;return c.a.createElement("div",{className:"cast-row"},c.a.createElement("img",{src:"/rewer/uploads/portraits/".concat(t.artistId,".jpg"),alt:t.artistName}),c.a.createElement("span",null,c.a.createElement(p.b,{to:"/star?artistId=".concat(t.artistId)},t.artistName)),c.a.createElement("p",{className:"cast-row-item"},t.name))},$t=function(e){var t=e.casts;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(zt,{key:"cast-".concat(e.id),cast:e})})))},Qt=function(e){var t=e.value,n=Object(r.useState)("score"),a=Object(f.a)(n,2),s=a[0],u=a[1];return Object(r.useEffect)((function(){u(t>6?"main-score high":t<4?"main-score low":"main-score")}),[t]),c.a.createElement("div",{className:s},c.a.createElement("p",null,t))},Xt=function(e){var t,n=e.movie;return c.a.createElement("div",null,c.a.createElement("div",{className:"title-grid"},c.a.createElement("p",{className:"title"},n.title),c.a.createElement(Qt,{value:Math.round(10*n.avgScore)/10})),n.genres.map((function(e){return c.a.createElement(p.b,{key:"genre-".concat(e.id),className:"genre",to:"todo"},e.genreName)})),c.a.createElement("div",{className:"info-grid"},c.a.createElement("div",{className:"info-grid-item"},c.a.createElement("img",{src:"/rewer/uploads/posters/".concat(n.id,".jpg"),className:"poster",title:n.title,alt:"".concat(n.title,"_poster")})),c.a.createElement("div",{className:"info-grid-item"},c.a.createElement("p",null,n.summary),c.a.createElement("p",null,"Premier: ","".concat((t=n.releaseDate.toString(),new Date(t).getDate())," ").concat(function(e){return Ce[new Date(e).getMonth()]}(n.releaseDate.toString()),"  ").concat(Se(n.releaseDate.toString()))),c.a.createElement("p",null,"Runtime: ","".concat(n.runtime," minutes")),c.a.createElement("p",null,"Directed by: "),c.a.createElement("ul",null,n.casts.filter((function(e){return 1===e.castTypeId})).map((function(e){return c.a.createElement("li",{key:"director-link-".concat(e.artistId)},c.a.createElement(p.b,{className:"star",to:"/star?artistId=".concat(e.artistId),title:e.name},e.artistName))}))),c.a.createElement("p",null,"Written by: "),c.a.createElement("ul",null,n.casts.filter((function(e){return 3===e.castTypeId})).map((function(e){return c.a.createElement("li",{key:"director-link-".concat(e.artistId)},c.a.createElement(p.b,{className:"star",to:"/star?artistId=".concat(e.artistId),title:e.name},e.artistName),c.a.createElement("br",null))}))))))},Zt=function(e){var t=e.review,n=e.onEdit,a=e.onDelete;return c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"review-grid"},c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){n(t)}},"Edit"),c.a.createElement("button",{onClick:function(){a(t)}},"Delete")),c.a.createElement("p",{className:"review-date"},Ie(t.date)),c.a.createElement(De,{value:t.score})),c.a.createElement("p",null,t.text),c.a.createElement("p",null,t.popIndex," points"))},en=function(e){var t=e.startValue,n=e.setScore,a=Object(r.useState)(t),s=Object(f.a)(a,2),u=s[0],o=s[1];return Object(r.useEffect)((function(){n(u)}),[u]),c.a.createElement("div",null,c.a.createElement(De,{value:u}),c.a.createElement("button",{onClick:function(){u<10&&o((function(e){return e+1}))},className:"score-btn plus"},c.a.createElement(te.a,{icon:ne.e})),c.a.createElement("button",{onClick:function(){u>1&&o((function(e){return e-1}))},className:"score-btn minus"},c.a.createElement(te.a,{icon:ne.d})))},tn=function(e){var t=e.review,n=e.onPost,a=pe(t),r=Object(f.a)(a,3),s=r[0],u=r[1],o=r[2];return c.a.createElement("div",null,c.a.createElement("div",{className:"score-grid"},c.a.createElement("textarea",{className:"score-item",name:"text",rows:10,value:s.text,onChange:o}),c.a.createElement("div",{className:"score-item"},c.a.createElement(en,{startValue:t.score,setScore:function(e){u(Object(d.a)(Object(d.a)({},s),{},{score:e}))}}))),c.a.createElement("button",{onClick:function(){n(s)}},"Post"))},nn=function(e){var t=e.movie,n=Object(r.useState)(c.a.createElement(tn,{review:{id:0,text:"",movieId:t.id,date:"",popIndex:0,score:5,userName:localStorage.getItem("userName")},onPost:g})),a=Object(f.a)(n,2),s=a[0],u=a[1],o=Object(r.useState)(""),m=Object(f.a)(o,2),v=m[0],b=m[1];function h(e){u(c.a.createElement(tn,{review:e,onPost:w})),b("Editing your review:")}function w(e){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(t);case 2:if(!e.sent){e.next=5;break}u(c.a.createElement(Zt,{review:t,onEdit:h,onDelete:O})),b("Review has been updated.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t);case 2:if(!e.sent){e.next=7;break}t=Object(d.a)(Object(d.a)({},t),{},{date:(new Date).toLocaleDateString("hu-HU"),popIndex:1}),u(c.a.createElement(Zt,{review:t,onEdit:h,onDelete:O})),e.next=8;break;case 7:alert("Server error: could not post your review.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return y.apply(this,arguments)}function y(){return(y=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,Ee(n);case 3:if(!e.sent){e.next=8;break}b("Your review has been deleted."),u(c.a.createElement(tn,{review:{id:0,text:"",movieId:t.id,date:"",popIndex:0,score:5,userName:""},onPost:g})),e.next=9;break;case 8:alert("Server error: could not delete your review.");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t.id);case 2:null==(n=e.sent)?(alert("Server error"),b("Your review info could not bet downloaded from the server.")):n.length>0?u(c.a.createElement(Zt,{review:n[0],onEdit:h,onDelete:O})):b("You haven't posted a review for this movie yet");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null==localStorage.getItem("userName")?u(c.a.createElement("p",null,"You must be ",c.a.createElement(p.b,{to:"/profile"},"logged in")," to write a review.")):function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){(new Date).getTime()<new Date(t.releaseDate).getTime()&&(u(c.a.createElement("p",null,"This movie has not been released yet.")),b(""))}),[t]),c.a.createElement(r.Fragment,null,c.a.createElement("h3",null,"My Review:"),c.a.createElement("p",null,v),c.a.createElement("div",{className:"review-container"},s))},an=function(e){var t=e.reviews;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(Ue,{key:"review-".concat(e.id),review:e})})))},rn=function(e){var t=e.defaultValue,n=e.onUpdate,a=Object(r.useRef)();return c.a.createElement("select",{ref:a,onChange:function(){n(ue[a.current.value])},value:t},c.a.createElement("option",{value:ue.popIndex},"Most popular"),c.a.createElement("option",{value:ue.date},"Latest"))};function cn(){var e=Object(r.useState)({id:parseInt(Ve("movieId")),title:"",releaseDate:new Date,summary:"",genres:[],casts:[]}),t=Object(f.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)([]),u=Object(f.a)(s,2),o=u[0],p=u[1],m=le([]),d=Object(f.a)(m,2),v=d[0],b=d[1],h=Object(r.useState)(""),w=Object(f.a)(h,2),E=w[0],g=w[1],j=Object(r.useRef)(),O=Object(r.useState)(void 0),y=Object(f.a)(O,2),x=y[0],k=y[1];function N(){return(N=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(n.id);case 2:(t=e.sent)&&(a(t),p(t.casts.filter((function(e){return e.castTypeId>3}))),(new Date).getTime()>new Date(t.releaseDate).getTime()?k(ue.popIndex):(j.current.style.display="none",g("Reviews will be available after ".concat(Ie(t.releaseDate.toString())))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(n.id,5,0,x);case 2:(t=e.sent)?(b(t),g("Reviews:"),5===t.length&&I()):alert("Server errror: could not download reviewdata.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){window.addEventListener("scroll",D)}function C(){window.removeEventListener("scroll",D)}function D(){window.innerHeight+window.scrollY>=.9*document.body.offsetHeight&&function(){T.apply(this,arguments)}()}function T(){return(T=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(),e.next=3,je(n.id,5,v.current.length,x);case 3:(t=e.sent)?(b([].concat(Object(oe.a)(v.current),Object(oe.a)(t))),5===t.length&&I()):alert("Server errror: could not download reviewdata.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){return function(){N.apply(this,arguments)}(),function(){C()}}),[]),Object(r.useEffect)((function(){return x&&function(){S.apply(this,arguments)}(),function(){C()}}),[x]),c.a.createElement("div",{className:"main-container"},c.a.createElement(Xt,{movie:n}),c.a.createElement("h2",null,"Cast"),c.a.createElement($t,{casts:o}),c.a.createElement(nn,{movie:n}),c.a.createElement("h2",null,E),c.a.createElement("div",{ref:j},c.a.createElement(rn,{defaultValue:x,onUpdate:function(e){k(e)}}),c.a.createElement(an,{reviews:v.current})))}var sn=function(e){var t=e.artist,n=Object(r.useState)(null),a=Object(f.a)(n,2),s=a[0],u=a[1],o=c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"Died: ",c.a.createElement("i",null,"".concat(Ie(t.deathDate.toString()),","))),c.a.createElement("p",null,c.a.createElement("i",null,t.deathPlace))),i=Object(r.useState)(c.a.createElement("p",null)),l=Object(f.a)(i,2),p=l[0],m=l[1],d=c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"".concat(t.bio.substring(0,1500),"...")),c.a.createElement("p",{onClick:v,className:"show-more"},"Show more"));function v(){m(c.a.createElement(r.Fragment,null,c.a.createElement("p",null,t.bio),c.a.createElement("p",{onClick:b,className:"show-more"},"Show less")))}function b(){m(d)}return Object(r.useEffect)((function(){null!=t.deathPlace&&""!==t.deathPlace?u(o):u(c.a.createElement(r.Fragment,null))}),[t]),Object(r.useEffect)((function(){t.bio.length>1500?b():v()}),[t]),c.a.createElement("div",null,c.a.createElement("h1",null,t.name),c.a.createElement("div",{className:"info-grid"},c.a.createElement("div",{className:"info-grid-item right-border"},c.a.createElement("img",{className:"portrait",src:"/rewer/uploads/portraits/".concat(t.id,".jpg"),alt:"".concat(t.name,"_portrait")}),c.a.createElement("p",{className:"border-bottom"},"Born: ",c.a.createElement("i",null,"".concat(Ie(t.birthDate.toString()),","))),c.a.createElement("p",null,c.a.createElement("i",null,t.birthPlace)),s),c.a.createElement("div",{className:"info-grid-item"},p)))},un=function(e){var t=e.cast,n=Object(r.useState)(t.name),a=Object(f.a)(n,2),s=a[0],u=a[1];return Object(r.useEffect)((function(){t.castTypeId>3?u(t.name):""===t.name?u(t.castTypeName):u("".concat(t.castTypeName," (").concat(t.name,")"))}),[t]),c.a.createElement("div",null,c.a.createElement("div",{className:"cast-row"},c.a.createElement("img",{src:"/rewer/uploads/posters/".concat(t.movieId,".jpg"),alt:t.movieName}),c.a.createElement("span",null,c.a.createElement(p.b,{to:"/movie?movieId=".concat(t.movieId)},"".concat(t.movieName," (").concat(Se(t.movieDate),")"))),c.a.createElement("p",null,s)))},on=function(e){var t=e.casts;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(un,{key:"artist-cast-".concat(e.id),cast:e})})))};function ln(){var e=Object(r.useState)({id:parseInt(Ve("artistId")),name:"",birthPlace:"",birthDate:new Date,deathPlace:"",deathDate:new Date,bio:"",casts:[]}),t=Object(f.a)(e,2),n=t[0],a=t[1];function s(){return(s=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(n.id);case 2:(t=e.sent)?a(t):alert("Server error.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),c.a.createElement("div",{className:"main-container"},c.a.createElement(sn,{artist:n}),c.a.createElement(on,{casts:n.casts}))}function pn(e){return mn.apply(this,arguments)}function mn(){return(mn=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/follow/insertfollow.php",t);case 2:return n=e.sent,e.abrupt("return",N(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fn(e){return dn.apply(this,arguments)}function dn(){return(dn=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/follow/deletefollow.php",t);case 2:return n=e.sent,e.abrupt("return",y(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vn=function(e){var t=e.defaultValue,n=e.onUpdate,a=Object(r.useRef)();return c.a.createElement("select",{ref:a,value:t,onChange:function(){n(a.current.value)}},c.a.createElement("option",{value:"0"},"Banned"),c.a.createElement("option",{value:"1"},"User"),c.a.createElement("option",{value:"2"},"Moderator"),c.a.createElement("option",{value:"3"},"Admin"))},bn=function(e){var t=e.user,n=Object(r.useState)(t),a=Object(f.a)(n,2),s=a[0],u=a[1],o=Object(r.useState)(c.a.createElement(r.Fragment,null)),p=Object(f.a)(o,2),m=p[0],v=p[1],b=Object(r.useState)("/rewer/uploads/avatars/".concat(s.userName,".jpg")),h=Object(f.a)(b,2),w=h[0],E=h[1],g=Object(r.useState)({id:s.isFollowed,follower:localStorage.getItem("userName"),followed:s.userName}),j=Object(f.a)(g,2),O=j[0],y=j[1];function x(){return(x=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.a)(Object(d.a)({},s),{},{permission:parseInt(t)}),e.next=3,Ot(n);case 3:if(!e.sent){e.next=7;break}u(n),e.next=8;break;case 7:alert("Server error");case 8:u(Object(d.a)(Object(d.a)({},s),{},{permission:parseInt(t)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return N.apply(this,arguments)}function N(){return(N=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(c.a.createElement("button",{className:"follow"},"Follow")),e.next=3,pn(O);case 3:(t=e.sent)?y(Object(d.a)(Object(d.a)({},O),{},{id:t})):alert("Server error.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(c.a.createElement("button",{className:"unfollow"},"Unfollow")),e.next=3,fn(O);case 3:if(!e.sent){e.next=7;break}y(Object(d.a)(Object(d.a)({},O),{},{id:0})),e.next=8;break;case 7:alert("Server error.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){u(t)}),[t]),Object(r.useEffect)((function(){var e;e=t,null!=localStorage.getItem("userName")&&localStorage.getItem("userName")!==e.userName&&(O.id>0?v(c.a.createElement("button",{onClick:S,className:"unfollow"},"Unfollow")):v(c.a.createElement("button",{onClick:k,className:"follow"},"Follow")))}),[O]),Object(r.useEffect)((function(){y({id:s.isFollowed,follower:localStorage.getItem("userName"),followed:s.userName})}),[s]),c.a.createElement("div",null,c.a.createElement("h1",null,s.nickName),m,3===parseInt(localStorage.getItem("permission"))?c.a.createElement(r.Fragment,null,c.a.createElement("h3",null,"User status:"),c.a.createElement(vn,{defaultValue:s.permission.toString(),onUpdate:function(e){!function(e){x.apply(this,arguments)}(e)}})):c.a.createElement(r.Fragment,null),c.a.createElement("div",{className:"user-grid"},c.a.createElement("div",null,c.a.createElement("p",null,s.about)),c.a.createElement("div",null,c.a.createElement("img",{src:w,onError:function(){E("/rewer/uploads/avatars/default.jpg")},alt:"user-avatar"}))))};function hn(){var e=Object(r.useState)({userName:Ve("userName"),nickName:"",permission:1,about:""}),t=Object(f.a)(e,2),n=t[0],a=t[1],s=le([]),u=Object(f.a)(s,2),o=u[0],p=u[1],m=Object(r.useState)(ue.date),v=Object(f.a)(m,2),b=v[0],h=v[1];function w(){return(w=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt(Ve("userName"));case 2:t=e.sent,console.log(t),t&&a(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){window.addEventListener("scroll",j)}function g(){window.removeEventListener("scroll",j)}Object(r.useEffect)((function(){return function(){w.apply(this,arguments)}(),function(){g()}}),[]),Object(r.useEffect)((function(){return function(){O.apply(this,arguments)}(),function(){g()}}),[b]);var j=function e(){window.innerHeight+window.scrollY>=.9*document.body.offsetHeight&&(window.removeEventListener("scroll",e),function(){y.apply(this,arguments)}())};function O(){return(O=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,ye(n.userName,5,0,b);case 3:(t=e.sent)&&(p(t),t.length,E());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,ye(n.userName,5,o.current.length,b);case 3:(t=e.sent)?(p([].concat(Object(oe.a)(o.current),Object(oe.a)(t))),t.length):alert("Server errror: could not download reviewdata.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",{className:"main-container"},c.a.createElement(bn,{user:n}),c.a.createElement("h3",null,n.userName,"'s reviews"),c.a.createElement(rn,{defaultValue:b,onUpdate:function(e){h(e)}}),o.current.map((function(e){return c.a.createElement(Me,{key:"review-".concat(e.id),review:Object(d.a)(Object(d.a)({},e),{},{nickName:""})})})))}function wn(){return c.a.createElement("div",{className:"main-container"},c.a.createElement(Ae,null))}var En=function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut();case 2:if(!e.sent){e.next=6;break}console.log("user is logged in"),e.next=7;break;case 6:console.log("user is not logged in");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){e.apply(this,arguments)}()}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,null,c.a.createElement(Ht.a,null,c.a.createElement("title",null,"Rewer"),c.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})),c.a.createElement(qt,null),c.a.createElement(m.c,null,c.a.createElement(m.a,{exact:!0,path:"/rewer",component:Je}),c.a.createElement(m.a,{exact:!0,path:"/movies",component:Ye}),c.a.createElement(m.a,{exact:!0,path:"/movie",component:cn}),c.a.createElement(m.a,{exact:!0,path:"/profile",component:Vt}),c.a.createElement(m.a,{exact:!0,path:"/user",component:hn}),c.a.createElement(m.a,{exact:!0,path:"/editartist",component:_t}),c.a.createElement(m.a,{exact:!0,path:"/star",component:ln}),c.a.createElement(m.a,{exact:!0,path:"/stars",component:Wt}),c.a.createElement(m.a,{exact:!0,path:"/editmovie",component:vt}),c.a.createElement(m.a,{exact:!0,path:"/follows",component:wn}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(p.a,null,c.a.createElement(c.a.StrictMode,null,c.a.createElement(En,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.cf073244.chunk.js.map