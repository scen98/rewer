{"version":3,"sources":["../node_modules/dateformat/lib/dateformat.js","components/article/EditArticle.tsx","components/article/MyArticleRow.tsx","components/article/MyArticlesList.tsx","pages/MyArticles.tsx","hooks.tsx","utils.ts","callers/articleCaller.ts","../../../../../webpack/universalModuleDefinition","../../../../../index.js","../webpack:/webpack/bootstrap 5c04cbde4fb824613eb6","../../../../../src/Compress.js","../../../../../src/core/base64.js","../../../../../src/core/converter.js","../../../../../src/core/file.js","../../../../../src/core/image.js","../../../../../src/core/photo.js","../../../../../src/core/rotate.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","global","_arguments","arguments","dateFormat","token","timezone","timezoneClip","date","mask","utc","gmt","length","kindOf","test","undefined","Date","isNaN","TypeError","maskSlice","String","masks","slice","_","_d","D","_m","y","_H","_M","_s","_L","_o","getTimezoneOffset","flags","d","dd","pad","ddd","i18n","dayNames","dddd","m","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","H","HH","M","MM","s","ss","l","L","Math","floor","t","timeNames","tt","T","TT","Z","match","pop","replace","o","abs","p","S","W","getWeek","N","getDayOfWeek","default","shortDate","paddedShortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","expiresHeaderFormat","val","len","targetThursday","getFullYear","getMonth","getDate","setDate","getDay","firstThursday","ds","setHours","getHours","weekDiff","dow","Array","isArray","toString","call","toLowerCase","define","require","EditArticle","defArticle","onUpdate","useBinder","article","setArticle","bindArticle","useState","isPublished","setIsPublished","useImage","id","imgsrc","imgError","setImgsrc","fileInput","useRef","messenger","useContext","MessageContext","a","formData","FormData","current","files","addWarning","resizeImageFn","resizedFile","append","uploadArticleImage","getTime","addFail","useEffect","publishDate","clear","className","src","onError","alt","ref","type","accept","onClick","value","title","name","onChange","placeholder","text","rows","checked","toISOString","e","target","readMore","MyArticleRow","onDelete","ESize","Medium","onImgError","useCutter","isTextCut","cutText","editMode","setEditMode","showModal","ModalContext","content","acceptButton","refuseButton","href","MyArticleList","articles","map","key","MyArticles","userName","localStorage","getItem","newArticle","bindNewArticle","postCaller","articleCaller","signal","useAsyncReference","setArticles","useScroll","addListener","removeListener","mainMsg","setMainMsg","keyword","setKeyword","getMyArticles","limit","offset","articlePath","selectArticlesByUser","myArticles","ECallType","SELECT","newArticleCopy","insertArticle","INSERT","newId","toUpdate","updateArticle","ISOK","replacedList","find","toDelete","deleteArticle","filter","document","abort","onKeyDown","onEnter","forceRender","newState","Object","is","get","set","event","useAsyncBinder","updateState","defaultText","defaultCutPos","getCutText","firstText","firstCut","isCut","setIsCut","outputText","setOutputText","cut","cutPos","newText","didCut","toCut","substring","callback","pos","newPos","position","listener","window","innerHeight","scrollY","body","offsetHeight","addEventListener","removeEventListener","path","fileName","size","Normal","tryAgain","imgSrc","setImgSrc","tryAgainRef","imgSrcSetter","newPath","newFileName","array","oldItem","newItem","item","file","maxWidth","maxHeight","quality","Compress","compress","resize","resizedImage","img","base64str","data","imgExt","ext","resizedFiile","convertBase64ToFile","selectLatestArticles","uploadImage","UploadFile","ok","module","modules","exports","loaded","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","_base","_converter","_file","_image","_photo","_rotate","_interopRequireDefault","__esModule","_base2","_converter2","_file2","_image2","_photo2","_rotate2","_createClass","defineProperties","props","i","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","instance","_classCallCheck","this","el","options","Promise","resolve","reject","input","querySelector","setAttribute","evt","output","_this","arr","arr2","from","compressFile","photo","start","performance","now","startSize","orientation","then","load","startWidth","naturalWidth","startHeight","naturalHeight","width","height","endWidth","endHeight","imageToCanvas","canvas","iterations","base64prefix","prefix","loopCompression","targetSize","targetQuality","canvasToBase64","newSize","minQuality","base64","finalSize","end","difference","elapsedTimeInSeconds","initialSizeInMb","MB","endSizeInMb","endWidthInPx","endHeightInPx","initialWidthInPx","initialHeightInPx","sizeReducedInPercent","compressImage","all","mime","base64ToFile","apply","split","byteString","atob","charCodeAt","Blob","Uint8Array","createElement","context","getContext","image","drawImage","translate","scale","rotate","PI","toDataURL","KB","fileReader","FileReader","result","err","readAsDataURL","Image","targetWidth","targetHeight","originalAspectRatio","outputWidth","outputHeight","min","endSize","reader","onload","view","DataView","getUint16","byteLength","marker","getUint32","little","tags","readAsArrayBuffer"],"mappings":"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","file":"static/js/14.d52c923d.chunk.js","sourcesContent":["\"use strict\";function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}(function(global){\"use strict\";var _arguments=arguments;var dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LlopSZWN]|\"[^\"]*\"|'[^']*'/g;var timezone=/\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;var timezoneClip=/[^-+\\dA-Z]/g;return function(date,mask,utc,gmt){if(_arguments.length===1&&kindOf(date)===\"string\"&&!/\\d/.test(date)){mask=date;date=undefined}date=date||date===0?date:new Date;if(!(date instanceof Date)){date=new Date(date)}if(isNaN(date)){throw TypeError(\"Invalid date\")}mask=String(dateFormat.masks[mask]||mask||dateFormat.masks[\"default\"]);var maskSlice=mask.slice(0,4);if(maskSlice===\"UTC:\"||maskSlice===\"GMT:\"){mask=mask.slice(4);utc=true;if(maskSlice===\"GMT:\"){gmt=true}}var _=function _(){return utc?\"getUTC\":\"get\"};var _d=function d(){return date[_()+\"Date\"]()};var D=function D(){return date[_()+\"Day\"]()};var _m=function m(){return date[_()+\"Month\"]()};var y=function y(){return date[_()+\"FullYear\"]()};var _H=function H(){return date[_()+\"Hours\"]()};var _M=function M(){return date[_()+\"Minutes\"]()};var _s=function s(){return date[_()+\"Seconds\"]()};var _L=function L(){return date[_()+\"Milliseconds\"]()};var _o=function o(){return utc?0:date.getTimezoneOffset()};var _W=function W(){return getWeek(date)};var _N=function N(){return getDayOfWeek(date)};var flags={d:function d(){return _d()},dd:function dd(){return pad(_d())},ddd:function ddd(){return dateFormat.i18n.dayNames[D()]},dddd:function dddd(){return dateFormat.i18n.dayNames[D()+7]},m:function m(){return _m()+1},mm:function mm(){return pad(_m()+1)},mmm:function mmm(){return dateFormat.i18n.monthNames[_m()]},mmmm:function mmmm(){return dateFormat.i18n.monthNames[_m()+12]},yy:function yy(){return String(y()).slice(2)},yyyy:function yyyy(){return pad(y(),4)},h:function h(){return _H()%12||12},hh:function hh(){return pad(_H()%12||12)},H:function H(){return _H()},HH:function HH(){return pad(_H())},M:function M(){return _M()},MM:function MM(){return pad(_M())},s:function s(){return _s()},ss:function ss(){return pad(_s())},l:function l(){return pad(_L(),3)},L:function L(){return pad(Math.floor(_L()/10))},t:function t(){return _H()<12?dateFormat.i18n.timeNames[0]:dateFormat.i18n.timeNames[1]},tt:function tt(){return _H()<12?dateFormat.i18n.timeNames[2]:dateFormat.i18n.timeNames[3]},T:function T(){return _H()<12?dateFormat.i18n.timeNames[4]:dateFormat.i18n.timeNames[5]},TT:function TT(){return _H()<12?dateFormat.i18n.timeNames[6]:dateFormat.i18n.timeNames[7]},Z:function Z(){return gmt?\"GMT\":utc?\"UTC\":(String(date).match(timezone)||[\"\"]).pop().replace(timezoneClip,\"\").replace(/GMT\\+0000/g,\"UTC\")},o:function o(){return(_o()>0?\"-\":\"+\")+pad(Math.floor(Math.abs(_o())/60)*100+Math.abs(_o())%60,4)},p:function p(){return(_o()>0?\"-\":\"+\")+pad(Math.floor(Math.abs(_o())/60),2)+\":\"+pad(Math.floor(Math.abs(_o())%60),2)},S:function S(){return[\"th\",\"st\",\"nd\",\"rd\"][_d()%10>3?0:(_d()%100-_d()%10!=10)*_d()%10]},W:function W(){return _W()},N:function N(){return _N()}};return mask.replace(token,function(match){if(match in flags){return flags[match]()}return match.slice(1,match.length-1)})}}();dateFormat.masks={default:\"ddd mmm dd yyyy HH:MM:ss\",shortDate:\"m/d/yy\",paddedShortDate:\"mm/dd/yyyy\",mediumDate:\"mmm d, yyyy\",longDate:\"mmmm d, yyyy\",fullDate:\"dddd, mmmm d, yyyy\",shortTime:\"h:MM TT\",mediumTime:\"h:MM:ss TT\",longTime:\"h:MM:ss TT Z\",isoDate:\"yyyy-mm-dd\",isoTime:\"HH:MM:ss\",isoDateTime:\"yyyy-mm-dd'T'HH:MM:sso\",isoUtcDateTime:\"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\",expiresHeaderFormat:\"ddd, dd mmm yyyy HH:MM:ss Z\"};dateFormat.i18n={dayNames:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],monthNames:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],timeNames:[\"a\",\"p\",\"am\",\"pm\",\"A\",\"P\",\"AM\",\"PM\"]};var pad=function pad(val,len){val=String(val);len=len||2;while(val.length<len){val=\"0\"+val}return val};var getWeek=function getWeek(date){var targetThursday=new Date(date.getFullYear(),date.getMonth(),date.getDate());targetThursday.setDate(targetThursday.getDate()-(targetThursday.getDay()+6)%7+3);var firstThursday=new Date(targetThursday.getFullYear(),0,4);firstThursday.setDate(firstThursday.getDate()-(firstThursday.getDay()+6)%7+3);var ds=targetThursday.getTimezoneOffset()-firstThursday.getTimezoneOffset();targetThursday.setHours(targetThursday.getHours()-ds);var weekDiff=(targetThursday-firstThursday)/(864e5*7);return 1+Math.floor(weekDiff)};var getDayOfWeek=function getDayOfWeek(date){var dow=date.getDay();if(dow===0){dow=7}return dow};var kindOf=function kindOf(val){if(val===null){return\"null\"}if(val===undefined){return\"undefined\"}if(_typeof(val)!==\"object\"){return _typeof(val)}if(Array.isArray(val)){return\"array\"}return{}.toString.call(val).slice(8,-1).toLowerCase()};if(typeof define===\"function\"&&define.amd){define(function(){return dateFormat})}else if((typeof exports===\"undefined\"?\"undefined\":_typeof(exports))===\"object\"){module.exports=dateFormat}else{global.dateFormat=dateFormat}})(void 0);","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { Fragment, useContext, useEffect, useRef, useState } from 'react'\r\nimport \"./articleStyles.css\";\r\nimport { IArticle } from \"../../../common/article\";\r\nimport { useBinder, useImage } from '../../hooks';\r\nimport { resizeImageFn } from '../../utils';\r\nimport { uploadArticleImage } from '../../callers/articleCaller';\r\nimport { MessageContext } from '../Messenger';\r\nconst dateFormat = require(\"dateformat\");\r\n\r\ninterface IEditArticle{\r\n    defArticle: IArticle;\r\n    onUpdate: (article: IArticle)=>void;\r\n}\r\n\r\nexport const EditArticle: React.FC<IEditArticle> = ({defArticle, onUpdate})=> {\r\n    const [article, setArticle, bindArticle] = useBinder(defArticle);\r\n    const [isPublished, setIsPublished] = useState(false);\r\n    const [imgsrc, imgError, setImgsrc] = useImage(\"/rewer/uploads/articles\", `${article.id}.jpg`);\r\n    const fileInput = useRef<HTMLInputElement>();\r\n    const { messenger } = useContext(MessageContext)\r\n    function updateArticle(){\r\n        onUpdate(article);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(defArticle.publishDate != null){\r\n            setIsPublished(true);\r\n        }\r\n        return ()=>{\r\n            messenger.clear();\r\n        }\r\n    }, []);\r\n\r\n    function setPublished(){\r\n        if(isPublished){\r\n            setArticle({ ...article, publishDate: null });\r\n        } else {\r\n            setArticle( { ...article, publishDate: new Date().toISOString() });\r\n        }\r\n        setIsPublished(!isPublished);\r\n    }\r\n\r\n    async function uploadImage(){\r\n        const formData = new FormData();\r\n        if(fileInput.current.files.length < 1){\r\n            messenger.addWarning(\"Not file was chosen.\");\r\n            return;\r\n        }\r\n        const resizedFile = await resizeImageFn(fileInput.current.files[0], 400, 600, 0.9);\r\n        formData.append(\"image\", resizedFile, `${article.id}.jpg`);\r\n        if(await uploadArticleImage(formData)){\r\n            setImgsrc( \"/rewer/uploads/articles\", `${article.id}.jpg?${new Date().getTime()}`);\r\n        } else {\r\n            messenger.addFail(\"Server error: could not upload image.\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"edit-article-grid\">\r\n                <div>\r\n                    <img src={imgsrc} onError={imgError} alt=\"article_image\" />\r\n                    <input ref={fileInput} className=\"article-img-input\" type=\"file\" accept=\".png,.jpg,.jpeg\" />\r\n                    <button onClick={uploadImage}>Upload</button>\r\n                </div>\r\n                <div>\r\n                    <label>Title</label>\r\n                    <input value={article.title} name=\"title\" onChange={bindArticle} placeholder=\"title\" />\r\n                    <textarea name=\"text\" value={article.text} onChange={bindArticle} rows={10} placeholder=\"short news\"/><br/>\r\n                    <label>Publish: </label>\r\n                    <input type=\"checkbox\" checked={isPublished} onChange={()=>{ setPublished() }}/>\r\n                    {(isPublished)?\r\n                    ( <input value={dateFormat(new Date(article.publishDate), \"yyyy-mm-dd\") + \"T\" + dateFormat(new Date(article.publishDate), \"HH:MM\")} onChange={(e)=>{ setArticle({...article, publishDate: e.target.value }) }} type=\"datetime-local\" />):\r\n                    (<Fragment></Fragment>)} <br/>\r\n                    <label>Read more link: </label>\r\n                    <input name=\"readMore\" type=\"text\" value={article.readMore} onChange={bindArticle} placeholder=\"Leave empty if irrelevant\" />\r\n                    <button onClick={()=>{ updateArticle() }}>Save</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditArticle;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { Fragment, useContext, useEffect, useState } from 'react'\r\nimport { IArticle } from '../../../common/article'\r\nimport { ESize, useCutter, useImage } from '../../hooks'\r\nimport { IModalContext, ModalContext } from '../Modal';\r\nimport EditArticle from './EditArticle';\r\n\r\ninterface IMyArticleRow{\r\n    article: IArticle;\r\n    onUpdate: (toUpdate: IArticle)=>void;\r\n    onDelete: (toDlete: IArticle)=>void;\r\n}\r\n\r\nexport const MyArticleRow: React.FC<IMyArticleRow> = ({article, onUpdate, onDelete}: IMyArticleRow)=> {\r\n    const [imgsrc, onImgError, setImgsrc] = useImage(\"/rewer/uploads/articles\", `${article.id}.jpg`, ESize.Medium);\r\n    const cutPos = 300;\r\n    const [text, isTextCut, cutText] = useCutter(article.text, cutPos);\r\n    const [editMode, setEditMode] = useState(false);\r\n    const { showModal } = useContext<IModalContext>(ModalContext);\r\n    function showDeleteModal(){\r\n        showModal(()=> { onDelete(article) }, {\r\n            title: `Deleting article with title \"${article.title}\"`,\r\n            content: <Fragment>\r\n                        <p>If you delete this article, you will not be able to retrieve it later.</p>\r\n                        <i>Note: if you want to hide this article from the public, consider setting its state to unpublished.</i>\r\n                        <p>Are you sure you want to permanently delete this article?</p>\r\n                    </Fragment>,\r\n            acceptButton: <Fragment>Delete article</Fragment>,\r\n            refuseButton: <Fragment>Cancel</Fragment>\r\n        })  \r\n    }\r\n    useEffect(() => {\r\n        if(!editMode) {\r\n            cutText(article.text, cutPos); \r\n            setImgsrc(\"/rewer/uploads/articles\", `${article.id}.jpg`);\r\n        }      \r\n    }, [editMode])\r\n    return (\r\n        <div>\r\n            {(!editMode)?\r\n            (<div className=\"my-article-row\">\r\n                <div>\r\n                    <img src={imgsrc} onError={onImgError} alt={`${article.title}_image`}/>\r\n                    <button onClick={()=>{ setEditMode(true) }}>Edit</button>\r\n                    <button onClick={showDeleteModal}>Delete</button>\r\n                </div>            \r\n            <div>\r\n                <h3>{article.title}</h3>\r\n                \r\n                <p>{text}</p>\r\n                {(isTextCut)?\r\n                (<Fragment><p onClick={()=> { cutText(article.text) }} className=\"show-more\">Show more</p></Fragment>):\r\n                (<Fragment>\r\n                    {(article.text.length > cutPos)?\r\n                    (<Fragment><p className=\"show-more\" onClick={()=>{ cutText(article.text, cutPos) }}>Show less</p></Fragment>):\r\n                    (<Fragment></Fragment>)}\r\n                </Fragment>)\r\n                }\r\n                {(article.readMore.length > 0)?\r\n                (<a href={article.readMore}>Read more</a>):\r\n                (<Fragment></Fragment>)}\r\n            </div>\r\n        </div>) :\r\n        (<Fragment>\r\n            <EditArticle defArticle={article} onUpdate={onUpdate} />\r\n            <button onClick={()=>{ setEditMode(false) }}>End edit</button>\r\n        </Fragment>)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyArticleRow;","import React from 'react'\r\nimport { IArticle } from '../../../common/article'\r\nimport MyArticleRow from './MyArticleRow'\r\n\r\ninterface IMyArticlesList{\r\n    articles: IArticle[];\r\n    onUpdate: (toUpdate: IArticle)=>void;\r\n    onDelete: (toDelete: IArticle)=>void;\r\n}\r\n\r\nexport const MyArticleList: React.FC<IMyArticlesList> = ({articles, onUpdate, onDelete}: IMyArticlesList)=> {\r\n    return (\r\n        <div>\r\n            {articles.map(a=>{\r\n                return <MyArticleRow article={a} onUpdate={onUpdate} onDelete={onDelete} key={`my-article-${a.id}`}/>\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState, useContext } from 'react'\r\nimport { IArticle } from '../../common/article';\r\nimport { articlePath } from '../callers/articleCaller';\r\nimport { ECallType, postCaller } from '../callers/caller';\r\nimport { MyArticleList } from '../components/article/MyArticlesList';\r\nimport { MessageContext } from '../components/Messenger';\r\nimport { onEnter, useAsyncReference, useBinder, useScroll } from '../hooks'\r\nimport { replacedList } from '../utils';\r\nconst dateFormat = require(\"dateformat\");\r\n\r\nexport default function MyArticles() {\r\n    const [newArticle, , bindNewArticle] = useBinder({ id: 0, title: \"\", text: \"\", publishDate: null, userName: localStorage.getItem(\"userName\"), readMore: \"\" });\r\n    const [articleCaller, signal] = postCaller();\r\n    const [articles, setArticles] = useAsyncReference([]);\r\n    const articlePerPage = 10;\r\n    const [addListener, removeListener] = useScroll(0.9, getMoreArticles);\r\n    const [mainMsg, setMainMsg] = useState<string>(\"Downloading your articles...\");\r\n    const [keyword, setKeyword] = useState<string>(\"\");\r\n    const { messenger } = useContext(MessageContext);\r\n\r\n    useEffect(()=>{\r\n        document.title = \"My Articles - Rewer\";\r\n        getMyArticles();\r\n        return ()=>{\r\n            signal.abort();\r\n            removeListener();\r\n            messenger.clear();\r\n        }\r\n    }, []);\r\n    async function getMyArticles(){\r\n        const myArticles = await articleCaller({ userName: localStorage.getItem(\"userName\"), keyword: keyword, limit: articlePerPage, offset: 0}, articlePath.selectArticlesByUser);\r\n        if(myArticles){\r\n            setArticles(myArticles);\r\n            if(myArticles.length === articlePerPage) addListener();\r\n            setMainMsg(\"\");\r\n        }\r\n    }\r\n\r\n    async function getMoreArticles(){\r\n        removeListener();\r\n        const myArticles = await articleCaller({ userName: localStorage.getItem(\"userName\"), keyword: keyword, limit: articlePerPage, offset: articles.current.length }, articlePath.selectArticlesByUser, ECallType.SELECT);\r\n        if(myArticles){\r\n            setArticles([...articles.current, ...myArticles]);\r\n            if(myArticles.length === articlePerPage) addListener();\r\n        } else {\r\n            messenger.addFail(\"Server error: could not retrieve article data.\");\r\n        }\r\n    }\r\n\r\n    async function insertArticle(){\r\n        const newArticleCopy = { ...newArticle, text: `This article was created on ${dateFormat(new Date(), \"HH:MM d.mm.yyyy\")}`}\r\n        const newId = await articleCaller(newArticleCopy, articlePath.insertArticle, ECallType.INSERT);\r\n        if(newId){\r\n            setArticles([{ ...newArticleCopy, id: newId }, ...articles.current ]);\r\n        } else {\r\n            messenger.addFail(\"Server error: could not add new article.\");\r\n        }\r\n    }\r\n\r\n    async function updateArticle(toUpdate: IArticle){\r\n        const result = await articleCaller(toUpdate, articlePath.updateArticle, ECallType.ISOK);\r\n        if(result){\r\n            setArticles(replacedList(articles.current, articles.current.find(a=> a.id === toUpdate.id), toUpdate));\r\n        } else {\r\n            messenger.addFail(\"Server error: could not save article.\")\r\n        }\r\n    }\r\n\r\n    async function deleteArticle(toDelete: IArticle){\r\n        const result = await articleCaller(toDelete, articlePath.deleteArticle, ECallType.ISOK);\r\n        if(result){\r\n            setArticles(articles.current.filter(a=> a.id !== toDelete.id));\r\n        } else {\r\n            messenger.addFail(\"Server error: could not delete article.\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"main-container\">\r\n            <div>\r\n                <h2>Create new article:</h2>\r\n                <label>New article's title: </label>\r\n                <input type=\"text\" value={newArticle.title} onChange={bindNewArticle} name=\"title\" />\r\n                <button onClick={insertArticle}>Create</button>\r\n                <input value={keyword} onChange={(e)=>{ setKeyword(e.target.value) }} onKeyDown={(e)=>{ onEnter(e, getMyArticles) }} type=\"text\" placeholder=\"search\" />\r\n                <button onClick={getMyArticles} >Search</button>                \r\n            </div>\r\n            <p>{mainMsg}</p>\r\n            <MyArticleList articles={articles.current} onUpdate={updateArticle} onDelete={deleteArticle} />\r\n        </div>\r\n    )\r\n}\r\n","import { useState, useRef } from \"react\";\r\nexport function useAsyncReference<T>(value: T) {\r\n    const ref = useRef(value);\r\n    const [, forceRender] = useState(false);\r\n    const updateState = (newState) => {\r\n        if (!Object.is(ref.current, newState)) {\r\n            ref.current = newState;\r\n            forceRender(s => !s);\r\n        }\r\n    }\r\n    return [ref, updateState] as const;\r\n}\r\n\r\nexport function useBinder<T>(value: T){\r\n    const [get, set] = useState<T>(value);\r\n    const bind = (event)=>{\r\n        set({...get, [event.target.name]: event.target.value});\r\n    }\r\n    return [get, set, bind] as const;\r\n}\r\n\r\nexport function useAsyncBinder<T>(value: T){\r\n    const ref = useRef(value);\r\n    const [, forceRender] = useState(false);\r\n    const updateState = (newState) => {\r\n        if (!Object.is(ref.current, newState)) {\r\n            ref.current = newState;\r\n            forceRender(s => !s);\r\n        }\r\n    }\r\n    const bind = (event) => {\r\n        updateState({...ref.current, [event.target.name]: event.target.value});\r\n    }\r\n    return [ref, updateState, bind] as const;\r\n}\r\n\r\nexport function useCutter(defaultText: string, defaultCutPos = 0): readonly [string, boolean, (text: string, custPos?: number)=>void]{\r\n    const [firstText, firstCut] = getCutText(defaultText, defaultCutPos > 0, defaultCutPos);\r\n    const [isCut, setIsCut] = useState(firstCut);\r\n    const [outputText, setOutputText] = useState(firstText);\r\n\r\n    const cut = (text: string, cutPos = 0) => {\r\n        const [newText, didCut] = getCutText(text, cutPos > 0, cutPos);\r\n        setOutputText(newText);\r\n        setIsCut(didCut);\r\n    }\r\n\r\n    return [outputText, isCut, cut] as const;\r\n}\r\n\r\nfunction getCutText(text: string, toCut: boolean, cutPos: number): [string, boolean]{\r\n    if(toCut && text.length > cutPos){\r\n        return [text.substring(0, cutPos) + \"...\", true];\r\n    }\r\n    return [text, false];\r\n}\r\n\r\nexport function setBinder(event, object, setter: (any)=> void){\r\n    setter({...object.current, [event.target.name]: event.target.value});\r\n}\r\n\r\nexport function onEnter(event, callback){\r\n    if (event.key === 'Enter') {\r\n        callback();\r\n    }\r\n}\r\n\r\nexport function useScroll(pos: number, callback: ()=> any): readonly [()=>void, ()=>void]{ \r\n    let newPos = pos;\r\n    if(pos > 1 || pos < 0) newPos = 0.8;\r\n    const position = useRef(newPos);\r\n    const listener = ()=>{\r\n        if((window.innerHeight + window.scrollY) >= (document.body.offsetHeight*position.current)){\r\n            callback();\r\n        }\r\n    }\r\n    const addListener = () =>{\r\n        window.addEventListener(\"scroll\", listener);\r\n    }\r\n    const removeListener = ()=>{\r\n        window.removeEventListener(\"scroll\", listener);\r\n    }\r\n    return [addListener, removeListener] as const;\r\n}\r\n\r\nexport enum ESize{\r\n    Normal = \"\",\r\n    Medium = \"medium-\",\r\n    Small = \"small-\",\r\n}\r\n\r\nexport function useImage(path: string, fileName: string, size = ESize.Normal, tryAgain = false){\r\n    const [imgSrc, setImgSrc] = useState<string>(`${path}/${size}${fileName}`);\r\n    const tryAgainRef = useRef(tryAgain);\r\n    const onError= () =>{\r\n        if(tryAgainRef.current){\r\n            setImgSrc(`${path}/${ESize.Normal}${fileName}`);\r\n            tryAgainRef.current = false;\r\n        } else {\r\n            setImgSrc(`${path}/${size}0.jpg`);\r\n        }\r\n    }\r\n    const imgSrcSetter = (newPath: string, newFileName: string) => {\r\n        setImgSrc(`${newPath}/${size}${newFileName}`);\r\n    }\r\n    return [imgSrc, onError, imgSrcSetter] as const;\r\n}\r\n\r\nexport interface IWindowState{\r\n    name: string;\r\n    maxValue: number;\r\n}\r\n\r\nexport function useWidth(defWindowStates: IWindowState[]){\r\n    const windowsStates = useRef(defWindowStates.sort(compareWindowStates));\r\n    const [currentWindowState, setCurrentWindowState] = useState(windowsStates.current.find(w=> w.maxValue > window.innerWidth));\r\n    const listen = ()=>{\r\n        window.addEventListener(\"resize\", ()=>{\r\n            windowStateSetter();\r\n        });\r\n    }\r\n    const cleanUpListener = ()=>{\r\n        window.removeEventListener(\"resize\", ()=>{\r\n            windowStateSetter();\r\n        });\r\n    }\r\n    const windowStateSetter = ()=>{\r\n        setCurrentWindowState(windowsStates.current.find(w=> w.maxValue > window.innerWidth));\r\n    }\r\n    return [currentWindowState, listen, cleanUpListener] as const;\r\n}\r\n\r\nfunction compareWindowStates(wstate1: IWindowState, wstate2: IWindowState){\r\n    if(wstate1.maxValue < wstate2.maxValue) return -1;\r\n    if(wstate1.maxValue > wstate2.maxValue) return 1;\r\n    return 0;\r\n}","export const itemReplacer = (array, oldItem, newItem) => {\r\n  array.map(item=> item === oldItem? newItem : item);\r\n}\r\n\r\nexport const replacedList = (array, oldItem, newItem) => {\r\n  return array.map(item=> item === oldItem? newItem : item);\r\n}\r\n\r\nexport async function resizeImageFn(file, maxWidth: number, maxHeight: number, quality = 1) {\r\n  const Compress = require('compress.js');\r\n  const compress = new Compress();\r\n  const resizedImage = await compress.compress([file], {\r\n    size: 1,\r\n    quality: quality, \r\n    maxWidth: maxWidth, \r\n    maxHeight: maxHeight, \r\n    resize: true\r\n  })\r\n  const img = resizedImage[0];\r\n  const base64str = img.data;\r\n  const imgExt = img.ext;\r\n  const resizedFiile = Compress.convertBase64ToFile(base64str, imgExt);\r\n  return resizedFiile;\r\n}","import { UploadFile } from \"./caller\";\r\n\r\nexport const articlePath = {\r\n    insertArticle: \"/article/insert_article\",\r\n    updateArticle: \"/article/update_article\",\r\n    deleteArticle: \"/article/delete_article\",\r\n    selectLatestArticles: \"/article/select_latest_articles\",\r\n    selectArticlesByUser: \"/article/select_articles_by_user\",\r\n    uploadImage: \"/article/upload_article_image\"\r\n}\r\n\r\nexport async function uploadArticleImage(file: FormData): Promise<boolean>{\r\n    const response = await UploadFile(\"/article/upload_article_image\", file);\r\n    if(response.ok){\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport const isBoolActuallyBool = (bool: boolean | any)=>{\r\n    const type = typeof bool;\r\n    if(type !== \"boolean\"){\r\n        throw `BoolIsActuallyA${type}Exception`;\r\n    }\r\n    if(bool !== true) {\r\n        const newTrue = !bool;\r\n        return newTrue;\r\n    }\r\n}\r\n\r\nexport const generateFakeErrorMessage = ()=>{\r\n    const errorCode = Math.floor(Math.random() * 1000);\r\n    const stack = Math.floor(Math.random() * 100000000000);\r\n    const word = Math.random().toString(36).substring(7);\r\n    const stack2 = Math.floor(Math.random() * 100000000000);\r\n    const word2 = Math.random().toString(36).substring(7);\r\n    const types = [\"Memory\", \"Fatal\", \"Unknown\", \"Server\", \"Connection\", \"Stackoverflow\", \"Stackbelowflow\", \"Index\"];\r\n    const errorType = types[Math.floor(Math.random() * types.length + 1)];\r\n    const errorString = `${errorType} error in stack ${word}${stack}-${word2}${stack2}. Errorcode: ${errorCode}.`;\r\n    alert(errorString);\r\n}","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Compress\"] = factory();\n\telse\n\t\troot[\"Compress\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Compress\"] = factory();\n\telse\n\t\troot[\"Compress\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(1), __webpack_require__(2), __webpack_require__(3), __webpack_require__(4), __webpack_require__(5), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(module, require('./core/base64.js'), require('./core/converter.js'), require('./core/file.js'), require('./core/image.js'), require('./core/photo.js'), require('./core/rotate.js'));\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod, global.base64, global.converter, global.file, global.image, global.photo, global.rotate);\n\t    global.Compress = mod.exports;\n\t  }\n\t})(this, function (module, _base, _converter, _file, _image, _photo, _rotate) {\n\t  'use strict';\n\t\n\t  var _base2 = _interopRequireDefault(_base);\n\t\n\t  var _converter2 = _interopRequireDefault(_converter);\n\t\n\t  var _file2 = _interopRequireDefault(_file);\n\t\n\t  var _image2 = _interopRequireDefault(_image);\n\t\n\t  var _photo2 = _interopRequireDefault(_photo);\n\t\n\t  var _rotate2 = _interopRequireDefault(_rotate);\n\t\n\t  function _interopRequireDefault(obj) {\n\t    return obj && obj.__esModule ? obj : {\n\t      default: obj\n\t    };\n\t  }\n\t\n\t  function _toConsumableArray(arr) {\n\t    if (Array.isArray(arr)) {\n\t      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n\t        arr2[i] = arr[i];\n\t      }\n\t\n\t      return arr2;\n\t    } else {\n\t      return Array.from(arr);\n\t    }\n\t  }\n\t\n\t  function _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t      throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t  }\n\t\n\t  var _createClass = function () {\n\t    function defineProperties(target, props) {\n\t      for (var i = 0; i < props.length; i++) {\n\t        var descriptor = props[i];\n\t        descriptor.enumerable = descriptor.enumerable || false;\n\t        descriptor.configurable = true;\n\t        if (\"value\" in descriptor) descriptor.writable = true;\n\t        Object.defineProperty(target, descriptor.key, descriptor);\n\t      }\n\t    }\n\t\n\t    return function (Constructor, protoProps, staticProps) {\n\t      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t      if (staticProps) defineProperties(Constructor, staticProps);\n\t      return Constructor;\n\t    };\n\t  }();\n\t\n\t  var Compress = function () {\n\t    function Compress() {\n\t      _classCallCheck(this, Compress);\n\t    }\n\t\n\t    _createClass(Compress, [{\n\t      key: 'attach',\n\t      value: function attach(el, options) {\n\t        var _this = this;\n\t\n\t        return new Promise(function (resolve, reject) {\n\t          var input = document.querySelector(el);\n\t          input.setAttribute('accept', 'image/*');\n\t          input.addEventListener('change', function (evt) {\n\t            var output = _this.compress([].concat(_toConsumableArray(evt.target.files)), options);\n\t            resolve(output);\n\t          }, false);\n\t        });\n\t      }\n\t    }, {\n\t      key: 'compress',\n\t      value: function compress(files, options) {\n\t        function compressFile(file, options) {\n\t          var photo = new _photo2.default(options);\n\t          photo.start = window.performance.now();\n\t          photo.alt = file.name;\n\t          photo.ext = file.type;\n\t          photo.startSize = file.size;\n\t\n\t          return _rotate2.default.orientation(file).then(function (orientation) {\n\t            photo.orientation = orientation;\n\t            return _file2.default.load(file);\n\t          }).then(compressImage(photo));\n\t        }\n\t        function compressImage(photo) {\n\t          return function (src) {\n\t            return _image2.default.load(src).then(function (img) {\n\t              photo.startWidth = img.naturalWidth;\n\t              photo.startHeight = img.naturalHeight;\n\t\n\t              if (photo.resize) {\n\t                var _Image$resize = _image2.default.resize(photo.maxWidth, photo.maxHeight)(img.naturalWidth, img.naturalHeight),\n\t                    width = _Image$resize.width,\n\t                    height = _Image$resize.height;\n\t\n\t                photo.endWidth = width;\n\t                photo.endHeight = height;\n\t              } else {\n\t                photo.endWidth = img.naturalWidth;\n\t                photo.endHeight = img.naturalHeight;\n\t              }\n\t              return _converter2.default.imageToCanvas(photo.endWidth, photo.endHeight, photo.orientation)(img);\n\t            }).then(function (canvas) {\n\t              photo.iterations = 1;\n\t\n\t              photo.base64prefix = _base2.default.prefix(photo.ext);\n\t              return loopCompression(canvas, photo.startSize, photo.quality, photo.size, photo.minQuality, photo.iterations);\n\t            }).then(function (base64) {\n\t              photo.finalSize = _base2.default.size(base64);\n\t              return _base2.default.data(base64);\n\t            }).then(function (data) {\n\t              photo.end = window.performance.now();\n\t              var difference = photo.end - photo.start;\n\t\n\t              return {\n\t                data: data,\n\t                prefix: photo.base64prefix,\n\t                elapsedTimeInSeconds: difference / 1000,\n\t                alt: photo.alt,\n\t                initialSizeInMb: _converter2.default.size(photo.startSize).MB,\n\t                endSizeInMb: _converter2.default.size(photo.finalSize).MB,\n\t                ext: photo.ext,\n\t                quality: photo.quality,\n\t                endWidthInPx: photo.endWidth,\n\t                endHeightInPx: photo.endHeight,\n\t                initialWidthInPx: photo.startWidth,\n\t                initialHeightInPx: photo.startHeight,\n\t                sizeReducedInPercent: (photo.startSize - photo.finalSize) / photo.startSize * 100,\n\t                iterations: photo.iterations\n\t              };\n\t            });\n\t          };\n\t        }\n\t        function loopCompression(canvas, size) {\n\t          var quality = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t          var targetSize = arguments[3];\n\t          var targetQuality = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\t          var iterations = arguments[5];\n\t\n\t          var base64str = _converter2.default.canvasToBase64(canvas, quality);\n\t          var newSize = _base2.default.size(base64str);\n\t\n\t          iterations += 1;\n\t\n\t          if (newSize > targetSize) {\n\t            return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations);\n\t          }\n\t\n\t          if (quality > targetQuality) {\n\t            return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations);\n\t          }\n\t\n\t          if (quality < 0.5) {\n\t            return base64str;\n\t          }\n\t          return base64str;\n\t        }\n\t        return Promise.all(files.map(function (file) {\n\t          return compressFile(file, options);\n\t        }));\n\t      }\n\t    }], [{\n\t      key: 'convertBase64ToFile',\n\t      value: function convertBase64ToFile(base64, mime) {\n\t        return _converter2.default.base64ToFile(base64, mime);\n\t      }\n\t    }]);\n\t\n\t    return Compress;\n\t  }();\n\t\n\t  module.exports = Compress;\n\t});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.base64 = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t  var size = function size(base64) {\n\t    var len = base64.replace(/^data:image\\/\\w+;base64,/, '').length;\n\t    return (len - 814) / 1.37;\n\t  };\n\t\n\t  var mime = function mime(base64) {\n\t    return base64.split(';')[0].match(/jpeg|png|gif/)[0];\n\t  };\n\t\n\t  var data = function data(base64) {\n\t    return base64.replace(/^data:image\\/\\w+;base64,/, '');\n\t  };\n\t\n\t  var prefix = function prefix(ext) {\n\t    return 'data:' + ext + ';base64,';\n\t  };\n\t\n\t  exports.default = { size: size, mime: mime, data: data, prefix: prefix };\n\t});\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.converter = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var base64ToFile = function base64ToFile(base64) {\n\t    var mime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'image/jpeg';\n\t\n\t    var byteString = window.atob(base64);\n\t    var content = [];\n\t    for (var i = 0; i < byteString.length; i++) {\n\t      content[i] = byteString.charCodeAt(i);\n\t    }\n\t    return new window.Blob([new Uint8Array(content)], { type: mime });\n\t  };\n\t\n\t  var imageToCanvas = function imageToCanvas(width, height, orientation) {\n\t    var canvas = document.createElement('canvas');\n\t    var context = canvas.getContext('2d');\n\t\n\t    canvas.width = width;\n\t    canvas.height = height;\n\t\n\t\n\t    return function (image) {\n\t      if (!orientation || orientation > 8) {\n\t        context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\t        return canvas;\n\t      }\n\t      if (orientation > 4) {\n\t        canvas.width = height;\n\t        canvas.height = width;\n\t      }\n\t      switch (orientation) {\n\t        case 2:\n\t          context.translate(width, 0);\n\t          context.scale(-1, 1);\n\t          break;\n\t        case 3:\n\t          context.translate(width, height);\n\t          context.rotate(Math.PI);\n\t          break;\n\t        case 4:\n\t          context.translate(0, height);\n\t          context.scale(1, -1);\n\t          break;\n\t        case 5:\n\t          context.rotate(0.5 * Math.PI);\n\t          context.scale(1, -1);\n\t          break;\n\t        case 6:\n\t          context.rotate(0.5 * Math.PI);\n\t          context.translate(0, -height);\n\t          break;\n\t        case 7:\n\t          context.rotate(0.5 * Math.PI);\n\t          context.translate(width, -height);\n\t          context.scale(-1, 1);\n\t          break;\n\t        case 8:\n\t          context.rotate(-0.5 * Math.PI);\n\t          context.translate(-width, 0);\n\t          break;\n\t      }\n\t      if (orientation > 4) {\n\t        context.drawImage(image, 0, 0, canvas.height, canvas.width);\n\t      } else {\n\t        context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\t      }\n\t      return canvas;\n\t    };\n\t  };\n\t\n\t  var canvasToBase64 = function canvasToBase64(canvas) {\n\t    var quality = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.75;\n\t\n\t    var base64 = canvas.toDataURL('image/jpeg', quality);\n\t    return base64;\n\t  };\n\t\n\t  var size = function size(_size) {\n\t    return {\n\t      KB: _size / 1000,\n\t      MB: _size / (1000 * 1000)\n\t    };\n\t  };\n\t\n\t  exports.default = { base64ToFile: base64ToFile, imageToCanvas: imageToCanvas, canvasToBase64: canvasToBase64, size: size };\n\t});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.file = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var load = function load(file) {\n\t    return new Promise(function (resolve, reject) {\n\t      var fileReader = new window.FileReader();\n\t      fileReader.addEventListener('load', function (evt) {\n\t        resolve(evt.target.result);\n\t      }, false);\n\t\n\t      fileReader.addEventListener('error', function (err) {\n\t        reject(err);\n\t      }, false);\n\t\n\t      fileReader.readAsDataURL(file);\n\t    });\n\t  };\n\t\n\t  exports.default = { load: load };\n\t});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.image = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var load = function load(src) {\n\t    return new Promise(function (resolve, reject) {\n\t      var img = new window.Image();\n\t      img.addEventListener('load', function () {\n\t        resolve(img);\n\t      }, false);\n\t\n\t      img.addEventListener('error', function (err) {\n\t        reject(err);\n\t      }, false);\n\t\n\t      img.src = src;\n\t    });\n\t  };\n\t\n\t  var resize = function resize(targetWidth, targetHeight) {\n\t    return function (width, height) {\n\t      if (!targetWidth && !targetHeight) return { width: width, height: height };\n\t\n\t      var originalAspectRatio = width / height;\n\t      var targetAspectRatio = targetWidth / targetHeight;\n\t\n\t      var outputWidth = void 0,\n\t          outputHeight = void 0;\n\t\n\t      if (originalAspectRatio > targetAspectRatio) {\n\t        outputWidth = Math.min(width, targetWidth);\n\t        outputHeight = outputWidth / originalAspectRatio;\n\t      } else {\n\t        outputHeight = Math.min(height, targetHeight);\n\t        outputWidth = outputHeight * originalAspectRatio;\n\t      }\n\t\n\t      return { width: outputWidth, height: outputHeight };\n\t    };\n\t  };\n\t\n\t  exports.default = { load: load, resize: resize };\n\t});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.photo = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  \"use strict\";\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  function _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t      throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t  }\n\t\n\t  var Photo = function Photo(_ref) {\n\t    var _ref$quality = _ref.quality,\n\t        quality = _ref$quality === undefined ? 0.75 : _ref$quality,\n\t        _ref$size = _ref.size,\n\t        size = _ref$size === undefined ? 2 : _ref$size,\n\t        _ref$maxWidth = _ref.maxWidth,\n\t        maxWidth = _ref$maxWidth === undefined ? 1920 : _ref$maxWidth,\n\t        _ref$maxHeight = _ref.maxHeight,\n\t        maxHeight = _ref$maxHeight === undefined ? 1920 : _ref$maxHeight,\n\t        _ref$resize = _ref.resize,\n\t        resize = _ref$resize === undefined ? true : _ref$resize;\n\t\n\t    _classCallCheck(this, Photo);\n\t\n\t    this.start = window.performance.now();\n\t    this.end = null;\n\t\n\t    this.alt = null;\n\t    this.ext = null;\n\t    this.startSize = null;\n\t    this.startWidth = null;\n\t    this.startHeight = null;\n\t\n\t    this.size = size * 1000 * 1000;\n\t    this.endSize = null;\n\t    this.endWidth = null;\n\t    this.endHeight = null;\n\t    this.iterations = 0;\n\t    this.base64prefix = null;\n\t\n\t    this.quality = quality;\n\t    this.resize = resize;\n\t    this.maxWidth = maxWidth;\n\t    this.maxHeight = maxHeight;\n\t    this.orientation = 1;\n\t  };\n\t\n\t  exports.default = Photo;\n\t});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.rotate = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  \"use strict\";\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t\n\t  var orientation = function orientation(file) {\n\t    return new Promise(function (resolve, reject) {\n\t      var reader = new window.FileReader();\n\t\n\t      reader.onload = function (event) {\n\t        var view = new DataView(event.target.result);\n\t\n\t        if (view.getUint16(0, false) !== 0xFFD8) {\n\t          resolve(-2);\n\t        }\n\t        var length = view.byteLength;\n\t        var offset = 2;\n\t\n\t        while (offset < length) {\n\t          var marker = view.getUint16(offset, false);\n\t          offset += 2;\n\t\n\t          if (marker === 0xFFE1) {\n\t            if (view.getUint32(offset += 2, false) !== 0x45786966) {\n\t              resolve(-1);\n\t            }\n\t            var little = view.getUint16(offset += 6, false) === 0x4949;\n\t            offset += view.getUint32(offset + 4, little);\n\t            var tags = view.getUint16(offset, little);\n\t            offset += 2;\n\t\n\t            for (var i = 0; i < tags; i++) {\n\t              if (view.getUint16(offset + i * 12, little) === 0x0112) {\n\t                resolve(view.getUint16(offset + i * 12 + 8, little));\n\t              }\n\t            }\n\t          } else if ((marker & 0xFF00) !== 0xFF00) break;else offset += view.getUint16(offset, false);\n\t        }\n\t        resolve(-1);\n\t      };\n\t      reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n\t    });\n\t  };\n\t\n\t  exports.default = { orientation: orientation };\n\t});\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5c04cbde4fb824613eb6","import Base64 from './core/base64.js'\nimport Converter from './core/converter.js'\nimport File from './core/file.js'\nimport Image from './core/image.js'\nimport Photo from './core/photo.js'\nimport Rotate from './core/rotate.js'\n\nclass Compress {\n  attach (el, options) {\n    return new Promise((resolve, reject) => {\n      const input = document.querySelector(el)\n      input.setAttribute('accept', 'image/*')\n      input.addEventListener('change', (evt) => {\n        const output = this.compress([...evt.target.files], options)\n        resolve(output)\n      }, false)\n    })\n  }\n\n  compress (files, options) {\n    function compressFile (file, options) {\n      // Create a new photo object\n      const photo = new Photo(options)\n      photo.start = window.performance.now()\n      photo.alt = file.name\n      photo.ext = file.type\n      photo.startSize = file.size\n\n      return Rotate.orientation(file)\n      .then((orientation) => {\n        photo.orientation = orientation\n        return File.load(file)\n      })\n      .then(compressImage(photo))\n    }\n    function compressImage (photo) {\n      return (src) => {\n        return Image.load(src).then((img) => {\n          // Store the initial dimensions\n          photo.startWidth = img.naturalWidth\n          photo.startHeight = img.naturalHeight\n          // Resize the image\n          if (photo.resize) {\n            const { width, height } = Image.resize(photo.maxWidth, photo.maxHeight)(img.naturalWidth, img.naturalHeight)\n            photo.endWidth = width\n            photo.endHeight = height\n          } else {\n            photo.endWidth = img.naturalWidth\n            photo.endHeight = img.naturalHeight\n          }\n          return Converter.imageToCanvas(photo.endWidth, photo.endHeight, photo.orientation)(img)\n        })\n        .then((canvas) => {\n          photo.iterations = 1\n          // Base64.mime(Converter.canvasToBase64(canvas))\n          photo.base64prefix = Base64.prefix(photo.ext)\n          return loopCompression(canvas, photo.startSize, photo.quality, photo.size, photo.minQuality, photo.iterations)\n        })\n        .then((base64) => {\n          photo.finalSize = Base64.size(base64)\n          return Base64.data(base64)\n        })\n        .then((data) => {\n          photo.end = window.performance.now()\n          const difference = photo.end - photo.start // in ms\n\n          return {\n            data: data,\n            prefix: photo.base64prefix,\n            elapsedTimeInSeconds: difference / 1000, // in seconds\n            alt: photo.alt,\n            initialSizeInMb: Converter.size(photo.startSize).MB,\n            endSizeInMb: Converter.size(photo.finalSize).MB,\n            ext: photo.ext,\n            quality: photo.quality,\n            endWidthInPx: photo.endWidth,\n            endHeightInPx: photo.endHeight,\n            initialWidthInPx: photo.startWidth,\n            initialHeightInPx: photo.startHeight,\n            sizeReducedInPercent: (photo.startSize - photo.finalSize) / photo.startSize * 100,\n            iterations: photo.iterations\n          }\n        })\n      }\n    }\n    function loopCompression (canvas, size, quality = 1, targetSize, targetQuality = 1, iterations) {\n      const base64str = Converter.canvasToBase64(canvas, quality)\n      const newSize = Base64.size(base64str)\n      // const base64str = convertCanvasToBase64(src)\n      // const size = getFileSize(base64str);\n      iterations += 1\n      // add in iteration count\n      if (newSize > targetSize) {\n        return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations)\n      }\n\n      if (quality > targetQuality) {\n        return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations)\n      }\n\n      if (quality < 0.5) {\n        return base64str\n      }\n      return base64str\n    }\n    return Promise.all(files.map((file) => {\n      return compressFile(file, options)\n    }))\n  }\n  static convertBase64ToFile (base64, mime) {\n    return Converter.base64ToFile(base64, mime)\n  }\n}\n\n// Supported input formats\n// image/png, image/jpeg, image/jpg, image/gif, image/bmp, image/tiff, image/x-icon,  image/svg+xml, image/webp, image/xxx\n// image/png, image/jpeg, image/webp\nmodule.exports = Compress\n\n\n\n// WEBPACK FOOTER //\n// ./src/Compress.js","const size = (base64) => {\n  const len = base64.replace(/^data:image\\/\\w+;base64,/, '').length\n  return (len - 814) / 1.37\n  // return len * 3 / 4\n}\n\n// strip off the data: url prefix to get just the base64-encoded bytes\n// var data = img.replace(/^data:image\\/\\w+;base64,/, \"\");\nconst mime = (base64) => {\n  return base64.split(';')[0].match(/jpeg|png|gif/)[0]\n}\n\nconst data = (base64) => {\n  return base64.replace(/^data:image\\/\\w+;base64,/, '')\n}\n\nconst prefix = (ext) => {\n  return `data:${ext};base64,`\n}\n\nexport default { size, mime, data, prefix }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/base64.js","\nconst base64ToFile = (base64, mime = 'image/jpeg') => {\n  const byteString = window.atob(base64)\n  const content = []\n  for (let i = 0; i < byteString.length; i++) {\n    content[i] = byteString.charCodeAt(i)\n  }\n  return new window.Blob([new Uint8Array(content)], {type: mime})\n}\n\nconst imageToCanvas = (width, height, orientation) => {\n  const canvas = document.createElement('canvas')\n  const context = canvas.getContext('2d')\n\n  canvas.width = width\n  canvas.height = height\n  // canvas.style.width = width\n  // canvas.style.height = height\n\n  return (image) => {\n    if (!orientation || orientation > 8) {\n      context.drawImage(image, 0, 0, canvas.width, canvas.height)\n      return canvas\n    }\n    if (orientation > 4) {\n      canvas.width = height\n      canvas.height = width\n      // canvas.style.width = height\n      // canvas.style.height = width\n    }\n    switch (orientation) {\n      case 2:\n        // horizontal flip\n        context.translate(width, 0)\n        context.scale(-1, 1)\n        break\n      case 3:\n        // 180 rotate left\n        context.translate(width, height)\n        context.rotate(Math.PI)\n        break\n      case 4:\n        // vertical flip\n        context.translate(0, height)\n        context.scale(1, -1)\n        break\n      case 5:\n        // vertical flip + 90 rotate right\n        context.rotate(0.5 * Math.PI)\n        context.scale(1, -1)\n        break\n      case 6:\n        // 90 rotate right\n        context.rotate(0.5 * Math.PI)\n        context.translate(0, -height)\n        break\n      case 7:\n        // horizontal flip + 90 rotate right\n        context.rotate(0.5 * Math.PI)\n        context.translate(width, -height)\n        context.scale(-1, 1)\n        break\n      case 8:\n        // 90 rotate left\n        context.rotate(-0.5 * Math.PI)\n        context.translate(-width, 0)\n        break\n    }\n    if (orientation > 4) {\n      context.drawImage(image, 0, 0, canvas.height, canvas.width)\n    } else {\n      context.drawImage(image, 0, 0, canvas.width, canvas.height)\n    }\n    return canvas\n  }\n}\n\nconst canvasToBase64 = (canvas, quality = 0.75) => {\n  // in order to compress the final image format has to be jpeg\n  const base64 = canvas.toDataURL('image/jpeg', quality)\n  return base64\n}\n\n// const canvasToImage = (canvas, quality=.75, mimeType='image/jpeg') => {\n//   const image = new Image()\n//   const base64str = canvas.toDataURL(mimeType, quality)\n//   image.src = base64str\n//   return image\n// }\n\nconst size = (size) => {\n  return {\n    KB: size / 1000,\n    MB: size / (1000 * 1000)\n  }\n}\n\nexport default { base64ToFile, imageToCanvas, canvasToBase64, size }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/converter.js","\nconst load = (file) => {\n  return new Promise((resolve, reject) => {\n    const fileReader = new window.FileReader()\n    fileReader.addEventListener('load', (evt) => {\n      resolve(evt.target.result)\n    }, false)\n\n    fileReader.addEventListener('error', (err) => {\n      reject(err)\n    }, false)\n\n    fileReader.readAsDataURL(file)\n  })\n}\n\nexport default { load }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/file.js","\nconst load = (src) => {\n  return new Promise((resolve, reject) => {\n    const img = new window.Image()\n    img.addEventListener('load', () => {\n      resolve(img)\n    }, false)\n\n    img.addEventListener('error', (err) => {\n      reject(err)\n    }, false)\n\n    img.src = src\n  })\n}\n  /*\n   * Resize the image based on the given height or width boundary.\n   * Auto resize based on aspect ratio.\n  **/\nconst resize = (targetWidth, targetHeight) => {\n  return (width, height) => {\n    if (!targetWidth && !targetHeight) return { width, height }\n\n    const originalAspectRatio = width / height\n    const targetAspectRatio = targetWidth / targetHeight\n\n    let outputWidth, outputHeight\n\n    if (originalAspectRatio > targetAspectRatio) {\n      outputWidth = Math.min(width, targetWidth)\n      outputHeight = outputWidth / originalAspectRatio\n    } else {\n      outputHeight = Math.min(height, targetHeight)\n      outputWidth = outputHeight * originalAspectRatio\n    }\n\n    return { width: outputWidth, height: outputHeight }\n  }\n}\n\nexport default { load, resize }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/image.js","// The photo model\nclass Photo {\n  constructor ({ quality = 0.75, size = 2, maxWidth = 1920, maxHeight = 1920, resize = true }) {\n    this.start = window.performance.now()\n    this.end = null\n\n    this.alt = null\n    this.ext = null\n    this.startSize = null\n    this.startWidth = null\n    this.startHeight = null\n    // How much will the quality decrease by each compression\n    // this.stepQuality = stepQuality\n\n    // size in MB\n    this.size = size * 1000 * 1000\n    this.endSize = null\n    this.endWidth = null\n    this.endHeight = null\n    this.iterations = 0\n    this.base64prefix = null\n    // Carry out image resizing\n    this.quality = quality\n    this.resize = resize\n    this.maxWidth = maxWidth\n    this.maxHeight = maxHeight\n    this.orientation = 1\n  }\n}\nexport default Photo\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/photo.js","// https://stackoverflow.com/questions/20600800/js-client-side-exif-orientation-rotate-and-mirror-jpeg-images/31273162#31273162\n\nconst orientation = (file) => {\n  return new Promise((resolve, reject) => {\n    const reader = new window.FileReader()\n\n    reader.onload = function (event) {\n      var view = new DataView(event.target.result)\n\n      if (view.getUint16(0, false) !== 0xFFD8) {\n        resolve(-2)\n      }\n      const length = view.byteLength\n      let offset = 2\n\n      while (offset < length) {\n        const marker = view.getUint16(offset, false)\n        offset += 2\n\n        if (marker === 0xFFE1) {\n          if (view.getUint32(offset += 2, false) !== 0x45786966) {\n            resolve(-1)\n          }\n          const little = view.getUint16(offset += 6, false) === 0x4949\n          offset += view.getUint32(offset + 4, little)\n          const tags = view.getUint16(offset, little)\n          offset += 2\n\n          for (let i = 0; i < tags; i++) {\n            if (view.getUint16(offset + (i * 12), little) === 0x0112) {\n              resolve(view.getUint16(offset + (i * 12) + 8, little))\n            }\n          }\n        } else if ((marker & 0xFF00) !== 0xFF00) break\n        else offset += view.getUint16(offset, false)\n      }\n      resolve(-1)\n    }\n    reader.readAsArrayBuffer(file.slice(0, 64 * 1024))\n  })\n}\n\nexport default { orientation }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/rotate.js"],"sourceRoot":""}