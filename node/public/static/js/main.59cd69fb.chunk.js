(this.webpackJsonprewer=this.webpackJsonprewer||[]).push([[0],{16:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},41:function(e,t,a){e.exports=a(59)},46:function(e,t,a){},48:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"GETAsynch",(function(){return I})),a.d(n,"GETAsynchNode",(function(){return D})),a.d(n,"UploadFile",(function(){return T})),a.d(n,"POSTAsynch",(function(){return P})),a.d(n,"IsSuccessful",(function(){return R})),a.d(n,"isResponse200",(function(){return L})),a.d(n,"tryParse",(function(){return U})),a.d(n,"getNewId",(function(){return A})),a.d(n,"parseId",(function(){return Y}));var r=a(0),c=a.n(r),s=a(34),i=a.n(s),u=(a(46),a(1)),o=a.n(u),l=a(3),m=(a(48),a(22),a(5)),p=a(8),d=a(2),f=a(7),b=a(12),v=function(e){var t=e.value,a=Object(r.useState)("score"),n=Object(d.a)(a,2),s=n[0],i=n[1];return Object(r.useEffect)((function(){i(t>6?"score high":t>3||t>1?"score":"score unset")}),[t]),c.a.createElement("div",{className:s},c.a.createElement("p",null,Math.round(10*t)/10))};function E(e){return new Date(e).getFullYear()}function h(e){var t=new Date(e);return"".concat(t.getDate()," ").concat(g[t.getMonth()]," ").concat(t.getFullYear())}function w(e){var t,a;return t=e.getMonth()<9?"0".concat(e.getMonth()+1):(e.getMonth()+1).toString(),a=e.getDate()<10?"0".concat(e.getDate()):e.getDate().toString(),"".concat(e.getFullYear(),"-").concat(t,"-").concat(a)}var g=["Janury","February","March","April","May","June","July","August","September","October","November","December"],j=function(e){var t=e.movie,a=Object(r.useState)("/rewer/uploads/posters/".concat(t.id,".jpg")),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)(""),o=Object(d.a)(u,2),l=o[0],p=o[1],f=Object(r.useState)(""),b=Object(d.a)(f,2),E=b[0],w=b[1];return Object(r.useEffect)((function(){t.avgScore>6?p("high-poster"):t.avgScore>3?p("medium-poster"):t.avgScore>0?p("low-poster"):p(""),window.screen.width>600&&(t.summary.length>120?w("".concat(t.summary.substring(0,120),"...")):w(t.summary))}),[t]),c.a.createElement(m.b,{className:"movie-row-grid",to:"/movie?movieId=".concat(t.id)},c.a.createElement("img",{className:l,src:s,alt:"poster-".concat(t.id),title:t.title,onError:function(){i("/rewer/uploads/posters/0.jpg")}}),c.a.createElement("div",null,c.a.createElement("p",{className:"row-title"},t.title),c.a.createElement("p",{className:"summary"},E)),new Date(t.releaseDate)>=new Date?c.a.createElement(v,{value:t.avgScore}):c.a.createElement("p",{className:"movie-row-date"},h(t.releaseDate.toString())))},O=function(e){var t=e.movies;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(j,{key:"movie-row-".concat(e.id),movie:e})})))},y=(a(16),function(e){var t=e.movie,a=Object(r.useState)(""),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)(""),o=Object(d.a)(u,2),l=o[0],m=o[1],p=Object(r.useState)(""),f=Object(d.a)(p,2),b=f[0],v=f[1],E=Object(r.useRef)();return Object(r.useEffect)((function(){t.avgScore>6?(m("high-poster"),v("high"),E.current.style.display="block"):t.avgScore>3?(m("medium-poster"),v("medium"),E.current.style.display="block"):t.avgScore>0?(m("low-poster"),v("low"),E.current.style.display="block"):E.current.style.display="none",i("/rewer/uploads/posters/".concat(t.id,".jpg"))}),[t]),Object(r.useEffect)((function(){}),[t]),c.a.createElement("div",{className:"movie-container fade"},c.a.createElement("img",{className:l,src:s,alt:"".concat(t.title,"-poster"),onError:function(){i("/rewer/uploads/posters/0.jpg")}}),c.a.createElement("p",{className:"movie-title"},t.title),c.a.createElement("div",{ref:E,className:b},c.a.createElement("p",{className:"score-line"},Math.round(10*t.avgScore)/10)))}),x=a(9),k=a(10),N=function(e){var t=e.movies,a=e.onHover,n=Object(r.useRef)(),s=Object(r.useRef)(),i=Object(r.useState)(t.slice(0,3)),u=Object(d.a)(i,2),o=u[0],l=u[1],p=Object(r.useState)(0),f=Object(d.a)(p,2),b=f[0],v=f[1];return Object(r.useEffect)((function(){l(t.slice(0,3)),t.length<=3?(n.current.style.visibility="hidden",s.current.style.visibility="hidden"):(n.current.style.visibility="visible",s.current.style.visibility="visible")}),[t]),Object(r.useEffect)((function(){l(t.slice(3*b,3*b+3))}),[b]),c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"slide-grid"},c.a.createElement("button",{ref:n,className:"slide-btn",onClick:function(){v(b-1<0?Math.ceil(t.length/3)-1:function(e){return e-1})}},c.a.createElement(x.a,{icon:k.a})),c.a.createElement("div",{className:"movie-grid"},o.map((function(e){return c.a.createElement("div",{onMouseEnter:function(){a(e)},key:"latest-".concat(e.id)},c.a.createElement(m.b,{to:"/movie?movieId=".concat(e.id),className:"movie-anchor"},c.a.createElement(y,{movie:e})))}))),c.a.createElement("button",{ref:s,className:"slide-btn",onClick:function(){3*(b+1)>=t.length?v(0):v((function(e){return e+1}))}},c.a.createElement(x.a,{icon:k.c}))))},S=N;function I(e){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",cache:"no-cache",credentials:"include"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",cache:"no-cache",credentials:"include"});case 2:if(!(a=e.sent).ok){e.next=7;break}return e.abrupt("return",a.text());case 7:return console.log(a),e.abrupt("return",a.status.toString());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return _.apply(this,arguments)}function _(){return(_=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",cache:"no-cache",body:a});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.abrupt("return",n);case 7:return console.log(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(a)});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.abrupt("return",n);case 7:return console.log(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return"success"===JSON.parse(e).msg||(console.log(e),!1)}function L(e){try{if(200===JSON.parse(e).response)return!0}catch(t){console.log(t),console.log(e)}}function U(e){try{return JSON.parse(e).object}catch(t){console.log(t),console.log(e)}return null}function A(e,t){try{if(e.id=JSON.parse(t).newId,null!=e.id)return!0;console.log(t)}catch(a){console.log(a),console.log(t)}return!1}function Y(e){try{return JSON.parse(e).newId}catch(t){console.log(t),console.log(e)}return null}function H(e){return V.apply(this,arguments)}function V(){return(V=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/movie/select_detailed_movie",{id:t});case 2:if(200===(a=e.sent).status){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return G.apply(this,arguments)}function G(){return(G=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/movie/select_latest_movies",{limit:t,offset:a});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t,a){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(o.a.mark((function e(t,a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/movie/select_latest_movies_by_genre",{genreId:t,limit:a,offset:n});case 2:if(!(r=e.sent).ok){e.next=7;break}return e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,a){return K.apply(this,arguments)}function K(){return(K=Object(l.a)(o.a.mark((function e(t,a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/movie/select_movies_by_score",{min:t,limit:a,offset:n});case 2:if(!(r=e.sent).ok){e.next=7;break}return e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return $.apply(this,arguments)}function $(){return($=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/genre/select_genres");case 2:if(!(t=e.sent).ok){e.next=7;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return X.apply(this,arguments)}function X(){return(X=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/movie/insert_movie",t);case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent.newId);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/movie/update_movie",t);case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("/movie/upload_poster",t);case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/genre/insert_movie_genre",t);case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent.newId);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return(se=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/genre/delete_movie_genre",{id:t});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,t){return ue.apply(this,arguments)}function ue(){return(ue=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/movie/select_upcoming_movies",{limit:t,offset:a});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){return e.genreName.localeCompare(t.genreName)}var le=function(e){var t=e.onMovieUpdate,a=Object(r.useState)([]),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)({id:0,title:"",summary:"",casts:[],genres:[],releaseDate:""}),p=Object(d.a)(u,2),v=p[0],E=p[1];function h(){return(h=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(9,0);case 2:(t=e.sent)&&(i(t),E(t[0]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){h.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){t&&t(function(){var e,t=[],a=Object(b.a)(s);try{for(a.s();!(e=a.n()).done;){var n=e.value;t=[].concat(Object(f.a)(t),Object(f.a)(n.casts))}}catch(r){a.e(r)}finally{a.f()}return t}())}),[s]),c.a.createElement("div",null,window.screen.width>600?c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"highlight-grid"},c.a.createElement(S,{movies:s,onHover:function(e){E(e)}}),c.a.createElement("div",{className:"highlighted-movie fade"},c.a.createElement("h3",null,v.title),c.a.createElement("p",{className:"highlight-text"},v.summary),c.a.createElement("p",null,"Directed by:"),c.a.createElement("ul",null,v.casts.filter((function(e){return 1===e.castTypeId})).map((function(e){return c.a.createElement("li",{key:"latest-".concat(e.artistId)},c.a.createElement(m.b,{to:"/star?artistId=".concat(e.artistId)},e.artistName))}))),c.a.createElement("p",null,"Starring: "),c.a.createElement("ul",null,v.casts.filter((function(e){return e.castTypeId>3})).slice(0,3).map((function(e){return c.a.createElement("li",{key:"latest-".concat(e.artistId)},c.a.createElement(m.b,{to:"/star?artistId=".concat(e.artistId)},e.artistName))}))),c.a.createElement(m.b,{to:"/movie?movieId=".concat(v.id)},"Read more")))):c.a.createElement(O,{movies:s}))};function me(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)({id:0,title:"",summary:"",casts:[],genres:[],releaseDate:""}),i=Object(d.a)(s,2),u=i[0],p=i[1];function f(){return(f=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(3,0);case 2:(t=e.sent)&&(n(t),p(t[0]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]),c.a.createElement("div",null,window.screen.width>600?c.a.createElement("div",{className:"highlight-grid"},c.a.createElement(N,{movies:a,onHover:function(e){p(e)}}),c.a.createElement("div",{className:"highlighted-movie fade"},c.a.createElement("h3",null,u.title),c.a.createElement("p",{className:"highlight-text"},u.summary),c.a.createElement("p",null,"Directed by:"),c.a.createElement("ul",null,u.casts.filter((function(e){return 1===e.castTypeId})).map((function(e){return c.a.createElement("li",{key:"upcoming-".concat(e.artistId)},c.a.createElement(m.b,{to:"/star?artistId=".concat(e.artistId)},e.artistName))}))),c.a.createElement("p",null,"Starring: "),c.a.createElement("ul",null,u.casts.filter((function(e){return e.castTypeId>3})).slice(0,3).map((function(e){return c.a.createElement("li",{key:"upcoming-".concat(e.artistId)},c.a.createElement(m.b,{to:"/star?artistId=".concat(e.artistId)},e.artistName))}))),c.a.createElement("p",null,"Coming: ",c.a.createElement("b",null,h(u.releaseDate))),c.a.createElement(m.b,{to:"/movie?movieId=".concat(u.id)},"Read more"))):c.a.createElement(O,{movies:a}))}var pe=function(e){var t=e.message;return c.a.createElement("p",null,"You must be ",c.a.createElement(m.b,{to:"/profile"},"logged in")," ",t)},de=a(19),fe=a(4);function be(e){var t=Object(r.useRef)(e),a=Object(r.useState)(!1),n=Object(d.a)(a,2)[1];return[t,function(e){Object.is(t.current,e)||(t.current=e,n((function(e){return!e})))}]}function ve(e){var t=Object(r.useState)(e),a=Object(d.a)(t,2),n=a[0],c=a[1];return[n,c,function(e){c(Object(fe.a)(Object(fe.a)({},n),{},Object(de.a)({},e.target.name,e.target.value)))}]}function Ee(e,t){"Enter"===e.key&&t()}var he;a(23);function we(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/review/select_review_by_user_and_movie",{userName:localStorage.getItem("userName"),movieId:t,limit:1,offset:0});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/review/select_reviews_by_movie",t);case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/review/select_followed_reviews",{limit:t,offset:a});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t,a,n){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(l.a)(o.a.mark((function e(t,a,n,r){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/review/select_reviews_by_user",{userName:t,limit:a,offset:n,orderby:r});case 2:if(!(c=e.sent).ok){e.next=7;break}return e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/review/insert_review",t);case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent.newId);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return De.apply(this,arguments)}function De(){return(De=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/review/delete_review",{id:t});case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/review/update_review",t);case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/review/insert_reviewlike",t);case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent.newId);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/review/update_reviewlike",t);case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.popIndex="popIndex",e.date="date"}(he||(he={}));var Le=function(e){var t=e.reviewLike,a=e.popIndex,n=Object(r.useState)(t),s=Object(d.a)(n,2),i=s[0],u=s[1],m=Object(r.useState)(a),p=Object(d.a)(m,2),f=p[0],b=p[1],v=Object(r.useState)(""),E=Object(d.a)(v,2),h=E[0],w=E[1],g=Object(r.useState)(""),j=Object(d.a)(g,2),O=j[0],y=j[1],N=Object(r.useRef)(),S=Object(r.useRef)();function I(e){var t=e.value-i.value;b((function(e){return e+t}))}function C(e){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t);case 2:a=e.sent,I(n=Object(fe.a)(Object(fe.a)({},i),{},{id:a,value:t.value})),u(n),(null==n||n.id<1)&&alert("Server error: could not like/dislike the selected review.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(t),I(t),e.next=4,Me(t);case 4:if(e.sent){e.next=6;break}alert("Server error: could not like/dislike the selected review.");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){null==localStorage.getItem("userName")&&(N.current.style.display="none",S.current.style.display="none")}),[]),Object(r.useEffect)((function(){w("up-arrow unliked"),y("down-arrow unliked"),i&&(1===i.value?w("up-arrow liked"):-1===i.value&&y("down-arrow disliked"))}),[i]),c.a.createElement("div",null,c.a.createElement("span",{ref:N,className:h},c.a.createElement(x.a,{onClick:function(){var e;e=1===i.value?Object(fe.a)(Object(fe.a)({},i),{},{value:0}):(i.value,Object(fe.a)(Object(fe.a)({},i),{},{value:1})),i.id>0?F(e):C(e)},icon:k.i})),c.a.createElement("span",{className:"pop-index"},f),c.a.createElement("span",{ref:S,className:O},c.a.createElement(x.a,{onClick:function(){var e;e=-1===i.value?Object(fe.a)(Object(fe.a)({},i),{},{value:0}):(i.value,Object(fe.a)(Object(fe.a)({},i),{},{value:-1})),i.id>0?F(e):C(e)},icon:k.h})))},Ue=function(e){var t=e.review,a=Object(r.useState)(t),n=Object(d.a)(a,2),s=n[0],i=(n[1],Object(r.useState)(c.a.createElement("p",null))),u=Object(d.a)(i,2),o=u[0],l=u[1],p=c.a.createElement(r.Fragment,null,c.a.createElement("p",{className:"review-text"},t.text.substring(0,500)),c.a.createElement("p",{onClick:function(){l(c.a.createElement(r.Fragment,null,c.a.createElement("p",{className:"review-text"},t.text),c.a.createElement("p",{onClick:f,className:"show-more"},"Show less")))},className:"show-more"},"Show more"));function f(){l(p)}return Object(r.useEffect)((function(){t.text.length>500?f():l(c.a.createElement("p",{className:"review-text"},t.text))}),[t]),c.a.createElement("div",{className:"review-container"},c.a.createElement("div",{className:"review-grid"},c.a.createElement(m.b,{className:"nick-name",to:"/user?userName=".concat(s.userName)},s.nickName),c.a.createElement("p",{className:"review-date"},h(s.date)),c.a.createElement(v,{value:s.score})),o,c.a.createElement(Le,{reviewLike:s.myLike,popIndex:s.popIndex}))},Ae=function(e){var t=e.review,a=Object(r.useState)(""),n=Object(d.a)(a,2),s=n[0],i=n[1];return Object(r.useEffect)((function(){null!=t.seriesId?i("/rewer/uploads/seriesPosters/".concat(t.seriesId,".jpg")):i("/rewer/uploads/posters/".concat(t.movieId,".jpg"))}),[t]),c.a.createElement("div",{className:"followed-review-grid"},c.a.createElement("div",{className:"review-poster-container"},null!=t.seriesId?c.a.createElement(r.Fragment,null,c.a.createElement(m.b,{to:"/series?seriesId=".concat(t.seriesId)},c.a.createElement("img",{src:s,alt:"".concat(t.movieTitle,"-poster"),onError:function(){i("/rewer/uploads/seriesPosters/0.jpg")}}),c.a.createElement("p",null,t.seriesTitle)),c.a.createElement(m.b,{to:"/movie?movieId=".concat(t.movieId)},c.a.createElement("p",null,t.movieTitle))):c.a.createElement(m.b,{to:"/movie?movieId=".concat(t.movieId)},c.a.createElement("img",{src:s,alt:"".concat(t.movieTitle,"-poster"),onError:function(){i("/rewer/uploads/posters/0.jpg")}}),c.a.createElement("p",null,t.movieTitle))),c.a.createElement("div",null,c.a.createElement(Ue,{review:t})))},Ye=function(e){var t=e.review,a=Object(r.useState)(c.a.createElement("p",null)),n=Object(d.a)(a,2),s=n[0],i=n[1],u=c.a.createElement(r.Fragment,null,c.a.createElement("p",{className:"review-text"},t.text.substring(0,500)),c.a.createElement("p",{onClick:function(){i(c.a.createElement(r.Fragment,null,c.a.createElement("p",{className:"review-text"},t.text),c.a.createElement("p",{onClick:b,className:"show-more"},"Show less")))},className:"show-more"},"Show more")),o=Object(r.useState)("movie-title"),l=Object(d.a)(o,2),p=l[0],f=l[1];function b(){i(u)}return Object(r.useEffect)((function(){t.text.length>500?b():i(c.a.createElement("p",{className:"review-text"},t.text)),t.score>6?f("movie-title title-high"):t.score>3?f("movie-title title-medium"):f("movie-title title-low")}),[t]),c.a.createElement("div",{className:"review-container"},c.a.createElement("div",{className:"review-grid"},c.a.createElement(m.b,{className:"nick-name",to:"/user?userName=".concat(t.userName)},t.nickName),c.a.createElement("p",{className:"review-date"},h(t.date)),c.a.createElement(v,{value:t.score})),t.seriesId?c.a.createElement(r.Fragment,null,c.a.createElement(m.b,{className:p,to:"/series?seriesId=".concat(t.seriesId)},t.seriesTitle,":"),c.a.createElement("br",null),c.a.createElement("br",null)):c.a.createElement(r.Fragment,null),c.a.createElement(m.b,{className:p,to:"/movie?movieId=".concat(t.movieId)},t.movieTitle),s,c.a.createElement(Le,{reviewLike:t.myLike,popIndex:t.popIndex}))};function He(){var e=be([]),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(c.a.createElement(r.Fragment,null)),i=Object(d.a)(s,2),u=i[0],m=i[1];function p(){window.addEventListener("scroll",v)}function b(){window.removeEventListener("scroll",v)}function v(){window.innerHeight+window.scrollY>=.9*document.body.offsetHeight&&function(){E.apply(this,arguments)}()}function E(){return(E=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),e.next=3,ye(10,a.current.length);case 3:(t=e.sent)?(n([].concat(Object(f.a)(a.current),Object(f.a)(t))),10===t.length&&p()):alert("Server error: could not download review data.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(10,0);case 2:(t=e.sent)?(n(t),10===t.length&&p()):null!=localStorage.getItem("userName")&&setTimeout(w,2e3);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(10,0);case 2:(t=e.sent)?(n(t),10===t.length&&p()):m(c.a.createElement(pe,{message:"manage your followers."}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){return localStorage.getItem("userName")&&function(){h.apply(this,arguments)}(),function(){b()}}),[]),c.a.createElement("div",null,window.screen.width>600?c.a.createElement(r.Fragment,null,u,a.current.map((function(e){return c.a.createElement(Ae,{key:"followed-".concat(e.id),review:e})}))):c.a.createElement(r.Fragment,null,u,a.current.map((function(e){return c.a.createElement(Ye,{key:"followed-".concat(e.id),review:e})}))))}var Ve=function(e){var t=e.series,a=Object(r.useState)("/rewer/uploads/seriesPosters/".concat(t.id,".jpg")),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)(""),o=Object(d.a)(u,2),l=o[0],m=o[1],p=Object(r.useState)(""),f=Object(d.a)(p,2),b=f[0],v=f[1],E=Object(r.useRef)();return Object(r.useEffect)((function(){t.avgScore>6?(m("high-poster"),v("high"),E.current.style.display="block"):t.avgScore>3?(m("medium-poster"),v("medium"),E.current.style.display="block"):t.avgScore>0?(m("low-poster"),v("low"),E.current.style.display="block"):E.current.style.display="none"}),[t]),c.a.createElement("div",{className:"movie-container fade"},c.a.createElement("img",{className:l,src:s,alt:"".concat(t.title,"-poster"),onError:function(){i("/rewer/uploads/seriesPosters/0.jpg")}}),c.a.createElement("p",{className:"movie-title"},t.title),c.a.createElement("div",{ref:E,className:b},c.a.createElement("p",{className:"score-line"},Math.round(10*t.avgScore)/10)))},Be=function(e){var t=e.series,a=e.onHover,n=Object(r.useRef)(),s=Object(r.useRef)(),i=Object(r.useState)([]),u=Object(d.a)(i,2),o=u[0],l=u[1],p=Object(r.useState)(0),f=Object(d.a)(p,2),b=f[0],v=f[1];return Object(r.useEffect)((function(){l(t.slice(0,3)),t.length<=3?(n.current.style.visibility="hidden",s.current.style.visibility="hidden"):(n.current.style.visibility="visible",s.current.style.visibility="visible")}),[t]),Object(r.useEffect)((function(){l(t.slice(3*b,3*b+3))}),[b]),c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"slide-grid"},c.a.createElement("button",{ref:n,className:"slide-btn",onClick:function(){v(b-1<0?Math.ceil(t.length/3)-1:function(e){return e-1})}},c.a.createElement(x.a,{icon:k.a})),c.a.createElement("div",{className:"movie-grid"},o.map((function(e){return c.a.createElement("div",{key:"series-".concat(e.id),onMouseEnter:function(){a(e)}},c.a.createElement(m.b,{className:"movie-anchor",to:"/series?seriesId=".concat(e.id)},c.a.createElement(Ve,{series:e})))}))),c.a.createElement("button",{ref:s,className:"slide-btn",onClick:function(){3*(b+1)>=t.length?v(0):v((function(e){return e+1}))}},c.a.createElement(x.a,{icon:k.c}))))},Ge=function(e){var t=e.series,a=Object(r.useState)("/rewer/uploads/seriesPosters/".concat(t.id,".jpg")),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)(""),o=Object(d.a)(u,2),l=o[0],p=o[1];return Object(r.useEffect)((function(){t.avgScore>6?p("high-poster"):t.avgScore>3?p("medium-poster"):t.avgScore>0?p("low-poster"):p("")}),[t]),c.a.createElement("div",{className:"movie-row-grid"},c.a.createElement(m.b,{to:"/series?seriesId=".concat(t.id)},c.a.createElement("img",{className:l,src:s,alt:"poster-".concat(t.id),title:t.title,onError:function(){i("/rewer/uploads/seriesPosters/0.jpg")}})),c.a.createElement("div",null,c.a.createElement("p",{className:"row-title"},t.title,":"),c.a.createElement("p",null,t.summary),c.a.createElement(m.b,{className:"episode-title",to:"movie?movieId=".concat(t.lastEpisodeId)},t.lastEpisodeTitle)),c.a.createElement(v,{value:t.avgScore}))};function Je(){return We.apply(this,arguments)}function We(){return(We=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/cast/select_cast_types");case 2:if(!(t=e.sent).ok){e.next=7;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/cast/insert_cast",t);case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent.newId);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e){return $e.apply(this,arguments)}function $e(){return($e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/cast/insert_casts",{casts:t});case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/cast/update_cast",t);case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){return et.apply(this,arguments)}function et(){return(et=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/cast/delete_cast",{id:t});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e,t){return e.castTypeId<t.castTypeId?-1:e.castTypeId>t.castTypeId?1:0}function at(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/series/insert_series",t);case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent.newId);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return ct.apply(this,arguments)}function ct(){return(ct=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/series/update_series",t);case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e){return it.apply(this,arguments)}function it(){return(it=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("/series/upload_series_poster",t);case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(l.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/series/select_detailed_series",{id:t});case 2:if((a=e.sent).ok){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,a.json();case 7:(n=e.sent).genres.sort(oe),Ot(n),r=Object(b.a)(n.seasons);try{for(r.s();!(c=r.n()).done;)c.value.episodes.sort(xt)}catch(s){r.e(s)}finally{r.f()}return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/series/select_latest_preview_series",{limit:t,offset:a});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("genre/insert_series_genre",t);case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent.newId);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("genre/delete_series_genre",{id:t});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e){var t=0;return e.seasons.forEach((function(e){t+=e.episodes.length})),t}function Et(e){return e.seasons.length>0&&e.seasons[0].episodes.length>0?e.seasons[0].episodes[0].releaseDate:null}function ht(e){var t,a=[],n=Object(b.a)(e.seasons);try{for(n.s();!(t=n.n()).done;){wt(t.value,a)}}catch(r){n.e(r)}finally{n.f()}return a}function wt(e,t){var a,n=Object(b.a)(e.episodes);try{for(n.s();!(a=n.n()).done;){gt(a.value,t)}}catch(r){n.e(r)}finally{n.f()}}function gt(e,t){var a,n=Object(b.a)(e.casts);try{for(n.s();!(a=n.n()).done;){jt(a.value,t)}}catch(r){n.e(r)}finally{n.f()}}function jt(e,t){var a=t.find((function(t){return t.artistId===e.artistId}));null!=a?function(e,t){var a=t.characterNames;0===t.characterNames.filter((function(t){return t===e.name})).length&&a.push(e.name);t=Object(fe.a)(Object(fe.a)({},t),{},{episodeCount:t.episodeCount++,characterNames:a})}(e,a):t.push({artistId:e.artistId,artistName:e.artistName,episodeCount:1,characterNames:[e.name],castTypeId:e.castTypeId})}function Ot(e){var t,a=Object(b.a)(e.seasons);try{for(a.s();!(t=a.n()).done;){yt(t.value)}}catch(n){a.e(n)}finally{a.f()}}function yt(e){var t,a=Object(b.a)(e.episodes);try{for(a.s();!(t=a.n()).done;){t.value.casts.sort(tt)}}catch(n){a.e(n)}finally{a.f()}}function xt(e,t){if(new Date(e.releaseDate)>new Date(t.releaseDate))return 1;if(new Date(e.releaseDate)<new Date(t.releaseDate))return-1;if(e.releaseDate===t.releaseDate){if(e.id>t.id)return 1;if(e.id<t.id)return-1}return 0}function kt(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)({id:0,title:"",summary:"",lastEpisodeId:0,lastEpisodeTitle:""}),i=Object(d.a)(s,2),u=i[0],p=i[1];function f(){return(f=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(6,0);case 2:t=e.sent,a&&(n(t),p(t[0]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]),c.a.createElement("div",null,window.screen.width>800?c.a.createElement("div",{className:"highlight-grid"},c.a.createElement(Be,{series:a,onHover:function(e){p(e)}}),c.a.createElement("div",{className:"highlighted-movie fade"},c.a.createElement("h3",null,u.title),c.a.createElement("p",{className:"highlight-text"},u.summary),c.a.createElement("p",null,"Last episode: "),c.a.createElement(m.b,{to:"/movie?movieId=".concat(u.lastEpisodeId)},u.lastEpisodeTitle),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(m.b,{to:"/movie?movieId=".concat(u.id)},"Read more"))):c.a.createElement(r.Fragment,null,a.map((function(e){return c.a.createElement(Ge,{key:"series-row".concat(e.id),series:e})}))))}function Nt(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1];function s(){return(s=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(3,4,0);case 2:(t=e.sent)&&n(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),c.a.createElement(r.Fragment,null,c.a.createElement("h3",{className:"center-text"},"Top Rated"),a.map((function(e){return c.a.createElement(j,{key:"top-rated-".concat(e.id),movie:Object(fe.a)(Object(fe.a)({},e),{},{summary:""})})})))}var St=function(e){var t=e.cast,a=Object(r.useState)(""),n=Object(d.a)(a,2),s=n[0],i=n[1];return Object(r.useEffect)((function(){i("/rewer/uploads/portraits/".concat(t.artistId,".jpg"))}),[]),c.a.createElement("div",{className:"cast-row"},c.a.createElement("img",{src:s,onError:function(){i("/rewer/uploads/portraits/0.jpg")},alt:"star-".concat(t.artistName)}),c.a.createElement(m.b,{to:"/star?artistId=".concat(t.artistId),className:"line-start"},t.artistName,": "),window.screen.width>=1280?c.a.createElement(m.b,{to:"/movie?movieId=".concat(t.movieId),className:"line-end"},t.movieName):c.a.createElement(r.Fragment,null))},It=function(e){var t=e.casts,a=e.length,n=Object(r.useState)([]),s=Object(d.a)(n,2),i=s[0],u=s[1];return Object(r.useEffect)((function(){u(function(e){var t;t=e.length<a?e.length:a;var n,r,c=e.filter((function(e){return 4===e.castTypeId||5===e.castTypeId})),s=[];for(n=0;t>n;n++)r=c[Math.floor(Math.random()*c.length)],s.push(r),c=c.filter((function(e){return e.artistId!==r.artistId}));return s}(t))}),[t]),c.a.createElement("div",null,c.a.createElement("h3",{className:"center-text"},"Spotlight"),i.map((function(e){return c.a.createElement(St,{key:"sportlight-".concat(e.id),cast:e})})))},Ct=function(e){var t=e.genres,a=e.setSelectedGenre,n=e.selectedGenre,s=e.any,i=Object(r.useState)([]),u=Object(d.a)(i,2),o=u[0],l=u[1];return Object(r.useEffect)((function(){l(s?[{id:0,name:"Any"}].concat(Object(f.a)(t)):t)}),[t]),c.a.createElement("select",{value:n.id.toString(),onChange:function(e){a(o.find((function(t){return t.id===parseInt(e.target.value)})))}},o.map((function(e){return c.a.createElement("option",{key:"opt".concat(e.id),value:e.id},e.name)})))},Dt=function(e){var t=e.length,a=Object(r.useState)([]),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)({id:0,name:""}),m=Object(d.a)(u,2),p=m[0],f=m[1],b=Object(r.useState)([]),v=Object(d.a)(b,2),E=v[0],h=v[1];function w(){return(w=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:(t=e.sent)&&i(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(p.id,t,0);case 2:(a=e.sent)&&h(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){w.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){s.length>0&&f(s[Math.floor(Math.random()*s.length)])}),[s]),Object(r.useEffect)((function(){p.id>0&&function(){g.apply(this,arguments)}()}),[p]),c.a.createElement("div",null,c.a.createElement("h3",{className:"center-text"},"Fresh of",c.a.createElement(Ct,{selectedGenre:p,genres:s,setSelectedGenre:function(e){f(e)}})),c.a.createElement(O,{movies:E.map((function(e){return Object(fe.a)(Object(fe.a)({},e),{},{summary:""})}))}))};function Ft(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(p.g)();function i(){s.push("/search?keyword=".concat(a))}return c.a.createElement("div",null,c.a.createElement("input",{onChange:function(e){n(e.target.value)},onKeyDown:function(e){Ee(e,i)},placeholder:"search"}),c.a.createElement("button",{onClick:i},"Search"))}function Tt(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1];return c.a.createElement(r.Fragment,null,window.screen.width>800?c.a.createElement("div",{className:"home-grid"},c.a.createElement("div",{className:"main-item"},c.a.createElement("h2",{className:"main-title"},"In Theatres"),c.a.createElement(le,{onMovieUpdate:function(e){n(e)}}),c.a.createElement("h2",{className:"main-title"},"Upcoming"),c.a.createElement(me,null),c.a.createElement("h2",{className:"main-title"},"Shows with new episodes"),c.a.createElement(kt,null),c.a.createElement("h2",{className:"main-title"},"Follows"),null!=localStorage.getItem("userName")?c.a.createElement(He,null):c.a.createElement(pe,{message:"to follow other users."})),c.a.createElement("div",{className:"right-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Ft,null)),c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Nt,null)),c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(It,{casts:a,length:5})),c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Dt,{length:5})))):c.a.createElement("div",{className:"main-container"},c.a.createElement("h2",{className:"main-title"},"In Theatres"),c.a.createElement(le,null),c.a.createElement("h2",{className:"main-title"},"Upcoming"),c.a.createElement(me,null),c.a.createElement("h2",{className:"main-title"},"Shows with new episodes"),c.a.createElement(kt,null),c.a.createElement("h2",{className:"main-title"},"Follows"),null!=localStorage.getItem("userName")?c.a.createElement(He,null):c.a.createElement(pe,{message:"to follow other users."})))}var _t=function(e,t,a){return e.map((function(e){return e===t?a:e}))};function Pt(e,t,a){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(l.a)(o.a.mark((function e(t,n,r){var c,s,i,u,l,m,p,d,f=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=f.length>3&&void 0!==f[3]?f[3]:1,s=a(56),i=new s,e.next=5,i.compress([t],{size:1,quality:c,maxWidth:n,maxHeight:r,resize:!0});case 5:return u=e.sent,l=u[0],m=l.data,p=l.ext,d=s.convertBase64ToFile(m,p),e.abrupt("return",d);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rt=function(e){var t=e.movie,a=e.movieBinder,n=(e.setMovie,Object(r.useRef)()),s=Object(r.useState)(""),i=Object(d.a)(s,2),u=i[0],m=i[1];function p(){return(p=Object(l.a)(o.a.mark((function e(){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,e.next=3,Pt(n.current.files[0],400,600,.9);case 3:return r=e.sent,a.append("poster",r,"".concat(t.id,".jpg")),e.next=7,te(a);case 7:if(!e.sent){e.next=11;break}m("/rewer/uploads/posters/".concat(t.id,".jpg?").concat((new Date).getTime())),e.next=12;break;case 11:alert("Upload unsuccessful");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){}),[]),Object(r.useEffect)((function(){t.id>0?m("/rewer/uploads/posters/".concat(t.id,".jpg?").concat((new Date).getTime())):m("/rewer/uploads/posters/0.jpg?")}),[t.id]),c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"detail-grid"},c.a.createElement("div",{className:"span-2"},c.a.createElement("input",{value:t.title,onChange:a,name:"title",type:"text",placeholder:"Title",className:"title-input"}),c.a.createElement("br",null),c.a.createElement("label",null,"Runtime:"),c.a.createElement("input",{value:t.runtime,onChange:a,name:"runtime",type:"text"}),c.a.createElement("br",null),c.a.createElement("label",null,"Release date:"),c.a.createElement("input",{value:w(new Date(t.releaseDate)),onChange:a,name:"releaseDate",type:"date"}),c.a.createElement("textarea",{value:t.summary,onChange:a,name:"summary",placeholder:"Write something about the story...",rows:20})),c.a.createElement("div",null,c.a.createElement("img",{src:u,onError:function(){m("/rewer/uploads/posters/0.jpg")},alt:"Poster",title:"Poster",className:"edit-poster"}),t.id>0?c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"It is recommended to use an image with a standard poster image ratio"),c.a.createElement("input",{ref:n,type:"file",accept:".png,.jpg,.jpeg",className:"file-input"}),c.a.createElement("button",{onClick:function(){return p.apply(this,arguments)}},"Upload")):c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"Create the movie's page to edit this picture.")))))};function Lt(e){var t=window.location.search,a=new URLSearchParams(t);return decodeURIComponent(a.get(e))}function Ut(e){!function(e){var t=document.location.href,a=t.split("?");if(a.length>=2){for(var n=a.shift(),r=a.join("?"),c=encodeURIComponent(e)+"=",s=r.split(/[&;]/g),i=s.length;i-- >0;)-1!==s[i].lastIndexOf(c,0)&&s.splice(i,1);t=n+"?"+s.join("&"),window.history.pushState("",document.title,t)}}(e.name),function(e){window.location.href.split("?").length>1?window.history.pushState("","","".concat(window.location.href,"&").concat(e.name,"=").concat(e.value)):window.history.pushState("","","".concat(window.location.href,"?").concat(e.name,"=").concat(e.value))}(e)}var At=function(e){var t,a=e.artist,n=e.onClick,s=e.selectedArtist,i=Object(r.useRef)();return c.a.createElement("div",{ref:i,onClick:function(){n()},className:null==s?"artist-row":s.id===a.id?"artist-row selected-row":"artist-row"},c.a.createElement("img",{src:"/rewer/uploads/portraits/".concat(a.id,".jpg"),alt:"NOT SET"}),c.a.createElement("p",null,a.name),c.a.createElement("p",{title:a.birthPlace},(t=new Date(a.birthDate),"".concat(t.getFullYear(),". ").concat(g[t.getMonth()]," ").concat(t.getDate()))))},Yt=(a(26),function(e){var t=e.artistList,a=e.onSelectionChanged,n=be(void 0),r=Object(d.a)(n,2),s=r[0],i=r[1];return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(At,{key:"artist-row-".concat(e.id),selectedArtist:s.current,artist:e,onClick:function(){i(e),a(s.current)}})})))}),Ht=function(e){var t=e.typeList,a=e.updateValue,n=e.initialValue,s=void 0===n?null:n,i=Object(r.useRef)();return Object(r.useEffect)((function(){null!=s&&(i.current.value=s)}),[]),c.a.createElement("select",{ref:i,onChange:function(){a(i.current.value)}},t.map((function(e){return c.a.createElement("option",{key:"castType_".concat(e.value),value:e.value},e.name)})))},Vt=(a(32),function(e){var t=e.cast,a=e.castTypes,n=e.onDelete,s=e.onUpdate,i=Object(r.useState)("edit-cast-row-container"),u=Object(d.a)(i,2),m=u[0],p=u[1],f=function(e){var t=Object(r.useRef)(e),a=Object(r.useState)(!1),n=Object(d.a)(a,2)[1],c=function(e){Object.is(t.current,e)||(t.current=e,n((function(e){return!e})))};return[t,c,function(e){c(Object(fe.a)(Object(fe.a)({},t.current),{},Object(de.a)({},e.target.name,e.target.value)))}]}(t),b=Object(d.a)(f,3),v=b[0],E=b[1],h=b[2];function w(){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(t.id);case 2:if(!e.sent){e.next=6;break}n(),e.next=7;break;case 6:alert("Server error");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(v.current);case 2:if(!e.sent){e.next=7;break}s(v.current),k(),e.next=8;break;case 7:alert("Server error: could not save your work.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(e){E(Object(fe.a)(Object(fe.a)({},v.current),{},{castTypeId:parseInt(e)}))},x=function(){m.includes("unsaved")||p(m+" unsaved")},k=function(){m.includes("unsaved")&&p(m.replace(" unsaved",""))};return c.a.createElement("div",{className:m},window.screen.width>600?c.a.createElement("div",{className:"edit-cast-row"},c.a.createElement("img",{src:"/rewer/uploads/portraits/".concat(v.current.artistId,".jpg"),alt:t.artistName}),c.a.createElement("p",null,v.current.artistName),c.a.createElement("input",{name:"name",value:v.current.name,onChange:function(e){h(e),x()}}),c.a.createElement(Ht,{typeList:a,initialValue:v.current.castTypeId,updateValue:function(e){y(e),x()}}),c.a.createElement("button",{onClick:j},"Update"),c.a.createElement("button",{onClick:w},"Delete")):c.a.createElement("div",null,c.a.createElement("div",{className:"edit-cast-row-mobile-row-1"},c.a.createElement("img",{src:"/rewer/uploads/portraits/".concat(v.current.artistId,".jpg"),alt:t.artistName}),c.a.createElement("p",null,v.current.artistName),c.a.createElement("input",{name:"name",value:v.current.name,onChange:function(e){h(e),x()}})),c.a.createElement("div",{className:"edit-cast-row-mobile-row-2"},c.a.createElement(Ht,{typeList:a,initialValue:v.current.castTypeId,updateValue:function(e){y(e),x()}}),c.a.createElement("button",{onClick:j},"Update"),c.a.createElement("button",{onClick:w},"Delete"))))}),Bt=function(e){var t=e.castList,a=e.setCastList,n=e.castTypes;function r(e){a(_t(t,t.find((function(t){return t.id===e.id})),e))}return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(Vt,{key:"edit-cast-".concat(e.id),onDelete:function(){var n;n=e.id,a(t.filter((function(e){return e.id!==n})))},cast:e,onUpdate:r,castTypes:n})})))};function Gt(e,t,a){return Jt.apply(this,arguments)}function Jt(){return(Jt=Object(l.a)(o.a.mark((function e(t,a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/artist/select_artists_by_keyword",{keyword:t,limit:a,offset:n});case 2:if(!(r=e.sent).ok){e.next=7;break}return e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(e){return qt.apply(this,arguments)}function qt(){return(qt=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/artist/select_detailed_artist",{id:t});case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(e){return zt.apply(this,arguments)}function zt(){return(zt=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/artist/insert_artist",t);case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent.newId);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $t(e){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/artist/update_artist",t);case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("/artist/upload_portrait",t);case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ea=function(e){var t=e.movie,a=e.setMovie,n=e.season,s=e.setEpisodes,i=Object(r.useState)([]),u=Object(d.a)(i,2),p=u[0],v=u[1],E=Object(r.useState)([]),h=Object(d.a)(E,2),w=h[0],g=h[1],j=ve({search:""}),O=Object(d.a)(j,3),y=O[0],x=(O[1],O[2]),k=ve({id:0,movieId:t.id,artistId:0,castTypeId:1,name:"",artistName:"Not selected"}),N=Object(d.a)(k,3),S=N[0],I=N[1],C=N[2];function D(){return(D=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([F(),_()]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,Je();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g,e.next=3,Gt(y.search,25,0);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.id&&null!=t.id){e.next=3;break}return alert("You must create the movie's page first."),e.abrupt("return",!1);case 3:if(0!==S.artistId&&null!=S.artistId){e.next=8;break}return alert("Choose an artist!"),e.abrupt("return",!1);case 8:return e.next=10,R();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe(S);case 2:if(!(a=e.sent)){e.next=9;break}return A([].concat(Object(f.a)(t.casts),[Object(fe.a)(Object(fe.a)({},S),{},{id:a})]).sort(tt)),I(Object(fe.a)(Object(fe.a)({},S),{},{id:0,name:""})),e.abrupt("return",!0);case 9:return alert("Server error."),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(l.a)(o.a.mark((function e(){var a,r,c,i,u,l,m,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.id&&null!=t.id){e.next=3;break}return alert("You must create the movie's page first."),e.abrupt("return",!1);case 3:if(0!==S.artistId&&null!=S.artistId){e.next=6;break}return alert("Choose an artist!"),e.abrupt("return",!1);case 6:a=[],r=Object(b.a)(n.episodes);try{for(r.s();!(c=r.n()).done;)i=c.value,a.push(Object(fe.a)(Object(fe.a)({},S),{},{movieId:i.id}))}catch(o){r.e(o)}finally{r.f()}return e.next=11,ze(a);case 11:a=e.sent,u=n.episodes,l=Object(b.a)(u);try{for(p=function(){var e=m.value;e.casts.push(a.find((function(t){return t.movieId===e.id})))},l.s();!(m=l.n()).done;)p()}catch(o){l.e(o)}finally{l.f()}s(u);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){a(Object(fe.a)(Object(fe.a)({},t),{},{casts:e}))}return Object(r.useEffect)((function(){!function(){D.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){I(Object(fe.a)(Object(fe.a)({},S),{},{movieId:t.id}))}),[t.id]),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("h2",null,"Cast: "),c.a.createElement(Bt,{castList:t.casts,setCastList:A,castTypes:p})),c.a.createElement("div",{className:"adder-panel"},c.a.createElement("h3",null,"Add cast member:"),c.a.createElement("span",{className:"artist-name"},S.artistName),c.a.createElement(Ht,{typeList:p,updateValue:function(e){I(Object(fe.a)(Object(fe.a)({},S),{},{castTypeId:parseInt(e)}))}}),c.a.createElement("input",{value:S.name,onChange:C,name:"name",placeholder:"As"}),c.a.createElement("button",{onClick:function(){return M.apply(this,arguments)}},"Add"),t.seasonId>0?c.a.createElement("button",{onClick:function(){return U.apply(this,arguments)}},"Add to each episode"):c.a.createElement(r.Fragment,null),c.a.createElement("br",null),c.a.createElement(m.b,{to:"/editartist?artistId=0"},"Create new star")),c.a.createElement("div",null,c.a.createElement("input",{value:y.search,name:"search",onChange:x,onKeyDown:function(e){Ee(e,_)},placeholder:"Search"}),c.a.createElement("button",{onClick:_},"Search"),c.a.createElement(Yt,{artistList:w,onSelectionChanged:function(e){I(Object(fe.a)(Object(fe.a)({},S),{},{artistId:e.id,artistName:e.name}))}})))},ta=function(e){var t=e.movie,a=e.onAdd,n=e.onDelete,s=Object(r.useState)([]),i=Object(d.a)(s,2),u=i[0],m=i[1],p=Object(r.useState)({id:0,name:""}),f=Object(d.a)(p,2),b=f[0],v=f[1];function E(){return(E=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:null!=(t=e.sent)?m(t):alert("Server error: could not download the list of genres");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){E.apply(this,arguments)}()}),[]),c.a.createElement("div",null,c.a.createElement("h3",null,"Genres:"),c.a.createElement("div",{className:"edit-genre-container"},t.genres.map((function(e){return c.a.createElement("div",{key:"genre-".concat(e.id),className:"edit-genre"},c.a.createElement("span",null,e.genreName),c.a.createElement("button",{onClick:function(){n(e.id)}},c.a.createElement(x.a,{icon:k.j})))}))),c.a.createElement(Ct,{genres:u,selectedGenre:b,setSelectedGenre:function(e){v(e)}}),c.a.createElement("button",{onClick:function(){b.id>0?a(b):a(u[0])}},"Add"),c.a.createElement("br",null))};function aa(){var e=ve({id:parseInt(Lt("movieId")),title:"",releaseDate:new Date,summary:"",runtime:0,casts:[],genres:[]}),t=Object(d.a)(e,3),a=t[0],n=t[1],s=t[2],i=Object(r.useState)(""),u=Object(d.a)(i,2),m=u[0],p=u[1];function b(){return(b=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(a.id);case 2:(t=e.sent)?n(t):alert("Server error");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(a);case 2:if(!e.sent){e.next=6;break}p("Movie details saved: ".concat((new Date).getHours()," : ").concat((new Date).getMinutes())),e.next=7;break;case 6:p("Internal error: movie details could not be saved.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(a);case 2:(t=e.sent)?(n(Object(fe.a)(Object(fe.a)({},a),{},{id:t})),Ut({name:"movieId",value:t.toString()})):p("Internal error: movie could not be created.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:0,movieId:a.id,genreId:t.id,genreName:t.name},e.next=3,ne(r);case 3:r.id=e.sent,r.id>0?n(Object(fe.a)(Object(fe.a)({},a),{},{genres:[].concat(Object(f.a)(a.genres),[r])})):alert("Server error: could not add genre.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t);case 2:if(!e.sent){e.next=6;break}n(Object(fe.a)(Object(fe.a)({},a),{},{genres:a.genres.filter((function(e){return e.id!==t}))})),e.next=7;break;case 6:alert("Server error: could not delete genre.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){a.id>0&&function(){b.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){p("")}),[a.id]),c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"main-container"},a.id>0?c.a.createElement("button",{onClick:function(){return v.apply(this,arguments)}},"Save"):c.a.createElement("button",{onClick:function(){return E.apply(this,arguments)}},"Create"),m,c.a.createElement(Rt,{movie:a,setMovie:n,movieBinder:s}),a.id>0?c.a.createElement(r.Fragment,null,c.a.createElement(ta,{movie:a,onAdd:function(e){!function(e){h.apply(this,arguments)}(e)},onDelete:function(e){!function(e){w.apply(this,arguments)}(e)}}),c.a.createElement(ea,{movie:a,setMovie:n})):c.a.createElement(r.Fragment,null)))}a(27);function na(e,t){return ra.apply(this,arguments)}function ra(){return(ra=Object(l.a)(o.a.mark((function e(t,a){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={authUser:t,autoLogin:a},e.next=3,P("/user/login",n);case 3:if(200===(r=e.sent).status){e.next=7;break}return localStorage.clear(),e.abrupt("return",r);case 7:return e.next=9,r.json();case 9:return(c=e.sent)&&ca(c),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ca(e){localStorage.clear(),localStorage.setItem("userName",e.userName),localStorage.setItem("nickName",e.nickName),localStorage.setItem("permission",e.permission.toString()),e&&localStorage.setItem("session",e.session)}function sa(){return ia.apply(this,arguments)}function ia(){return(ia=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={isLoggedin:!1,setNewSession:!1},localStorage.hasOwnProperty("userName")){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,P("/user/is_logged_in",{userName:localStorage.getItem("userName"),session:localStorage.getItem("session")});case 5:return a=e.sent,e.prev=6,e.t0=JSON,e.next=10,a.text();case 10:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 14:e.prev=14,e.t2=e.catch(6),console.log(e.t2),console.log(a),pa();case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}function ua(e,t){return oa.apply(this,arguments)}function oa(){return(oa=Object(l.a)(o.a.mark((function e(t,a){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={authUser:t,newPassword:a},e.next=3,P("/user/update_password",r);case 3:return c=e.sent,e.t0=n,e.next=7,c.text();case 7:return e.t1=e.sent,e.abrupt("return",e.t0.isResponse200.call(e.t0,e.t1));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function la(){return ma.apply(this,arguments)}function ma(){return(ma=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sa();case 2:if(!1!==(t=e.sent).isLoggedin){e.next=6;break}return localStorage.clear(),e.abrupt("return",!1);case 6:return t.setNewSession&&localStorage.setItem("session",t.newSession),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(){return da.apply(this,arguments)}function da(){return(da=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/user/log_out");case 2:localStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(e){return ba.apply(this,arguments)}function ba(){return(ba=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/user/insert_user",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function va(e){return Ea.apply(this,arguments)}function Ea(){return(Ea=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/user/update_permission",t);case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ha(e){return wa.apply(this,arguments)}function wa(){return(wa=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={userName:t},e.next=3,P("/user/does_exist",a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ga(e){return ja.apply(this,arguments)}function ja(){return(ja=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={userName:t},e.next=3,P("/user/select_detailed_user",a);case 3:if(200!==(n=e.sent).status){e.next=8;break}return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(e){return ya.apply(this,arguments)}function ya(){return(ya=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("/user/upload_avatar",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(e){return ka.apply(this,arguments)}function ka(){return(ka=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/user/update_user_info",t);case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(e){return Sa.apply(this,arguments)}function Sa(){return(Sa=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/user/select_followers",t);case 2:if(200===(a=e.sent).status){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ia(e){return Ca.apply(this,arguments)}function Ca(){return(Ca=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/user/select_followed_users",t);case 2:if(200===(a=e.sent).status){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Da=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),u=i[0],m=i[1],p=ve({userName:"",nickName:"",password:"",permission:0}),f=Object(d.a)(p,3),b=f[0],v=(f[1],f[2]),E=Object(r.useRef)();function h(){return w.apply(this,arguments)}function w(){return(w=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ha(b.userName);case 2:if(200===(t=e.sent).status){e.next=6;break}return n("Server error: invalid response from the server."),e.abrupt("return",!0);case 6:return e.next=8,t.json();case 8:if(!e.sent.exists){e.next=12;break}return m("Username already taken."),n("Taken"),e.abrupt("return",!0);case 12:return n("Free"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==b.userName.length){e.next=3;break}return m("The username must be at least one character long."),e.abrupt("return",!1);case 3:if(!(b.userName.length>255)){e.next=6;break}return m("The username is too long."),e.abrupt("return",!1);case 6:return e.next=8,h();case 8:if(!e.sent){e.next=10;break}return e.abrupt("return",!1);case 10:if(b.password===E.current.value){e.next=13;break}return m("The two passwords don't match."),e.abrupt("return",!1);case 13:return console.log("requesting"),e.next=16,j();case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sending request"),e.next=3,fa(b);case 3:if(201!==e.sent.status){e.next=9;break}return m("You have successfully signed up to our website!"),e.abrupt("return",!0);case 9:return m("Server error: process failed."),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",null,c.a.createElement("h2",null,"Sign up"),c.a.createElement("div",{className:"form-container"},c.a.createElement("label",{className:"form-item"},"New username:"),c.a.createElement("input",{value:b.userName,onChange:v,className:"form-item",name:"userName",placeholder:"to log in"}),c.a.createElement("div",{className:"form-item"}),c.a.createElement("div",{className:"form-item"},c.a.createElement("span",{className:"form-item"},a),c.a.createElement("button",{onClick:h},"Check")),c.a.createElement("label",{className:"form-item"},"New nickname:"),c.a.createElement("input",{value:b.nickName,onChange:v,className:"form-item",name:"nickName",placeholder:"seen by others"}),c.a.createElement("label",{className:"form-item"},"New password:"),c.a.createElement("input",{value:b.password,onChange:v,className:"form-item",type:"password",name:"password",placeholder:"new password"}),c.a.createElement("label",{className:"form-item"},"New password again:"),c.a.createElement("input",{ref:E,className:"form-item",type:"password",name:"newPassword2",placeholder:"new password again"})),c.a.createElement("p",null,u),c.a.createElement("button",{onClick:function(){return g.apply(this,arguments)},className:"login-btn",type:"button"},"Sign Up"))},Fa=a(36),Ta=a(37),_a=function(){function e(t,a){Object(Fa.a)(this,e),this.messages=void 0,this.defaultError=void 0,this.messages=t,this.defaultError=a||"Unknown error"}return Object(Ta.a)(e,[{key:"getError",value:function(e){var t=this.messages.find((function(t){return t.statusCode===e}));return t?t.message:this.defaultError}}]),e}(),Pa=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useRef)(),i=Object(r.useRef)(),u=Object(r.useRef)(),m=c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"Not signed up yet?",c.a.createElement("button",{onClick:function(){E(c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"bottom-border"}),c.a.createElement(Da,null)))}},"Do it now!")),c.a.createElement("div",{className:"bottom-border"})),f=Object(r.useState)(m),b=Object(d.a)(f,2),v=b[0],E=b[1];Object(p.g)();function h(){return(h=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,na({userName:s.current.value,nickName:void 0,permission:1,password:i.current.value},u.current.checked);case 2:t=e.sent,a=new _a([{statusCode:200,message:"Login successful."},{statusCode:403,message:"Incorrect password."},{statusCode:404,message:"Incorrect username."},{statusCode:404,message:"Server error: could not finish user authentication."}]),n(a.getError(t.status)),200===t.status&&console.log("success");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",null,c.a.createElement("h2",null,"Login"),c.a.createElement("form",{action:""},c.a.createElement("div",{className:"form-container"},c.a.createElement("label",{className:"form-item"},"Username:"),c.a.createElement("input",{className:"form-item",ref:s,name:"userName",placeholder:"username"}),c.a.createElement("label",{className:"form-item"},"Password:"),c.a.createElement("input",{className:"form-item",ref:i,type:"password",placeholder:"password",name:"password"}),c.a.createElement("div",{className:"form-item"},c.a.createElement("label",null,"Keep me logged in"),c.a.createElement("input",{ref:u,type:"checkbox"})),c.a.createElement("button",{onClick:function(){return h.apply(this,arguments)},className:"login-btn form-item",type:"button",name:"submit"},"Login")),c.a.createElement("p",null,a)),v)},Ma=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),u=i[0],m=i[1],p=Object(r.useState)(""),f=Object(d.a)(p,2),b=f[0],v=f[1],E=Object(r.useState)(""),h=Object(d.a)(E,2),w=h[0],g=h[1];function j(){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u===b){e.next=4;break}return g("The two passwords don't match"),y(),e.abrupt("return",!1);case 4:return e.next=6,ua({userName:localStorage.getItem("userName"),password:a,permission:0,nickName:localStorage.getItem("nickName")},u);case 6:if(!e.sent){e.next=12;break}return g("You password has been updated."),y(),e.abrupt("return",!0);case 12:return g("Access denied."),y(),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){n(""),m(""),v("")}return c.a.createElement(r.Fragment,null,c.a.createElement("h2",null,"Update password"),c.a.createElement("div",{className:"form-container"},c.a.createElement("label",{className:"form-item"},"Current password:"),c.a.createElement("input",{value:a,onChange:function(e){return n(e.target.value)},type:"password",className:"form-item",placeholder:"old password"}),c.a.createElement("label",{className:"form-item"},"New password:"),c.a.createElement("input",{value:u,onChange:function(e){return m(e.target.value)},type:"password",className:"form-item",placeholder:"new password"}),c.a.createElement("label",{className:"form-item"},"New password again:"),c.a.createElement("input",{value:b,onChange:function(e){return v(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&j()},type:"password",className:"form-item",placeholder:"new password to check"}),c.a.createElement("p",null,w)),c.a.createElement("button",{onClick:j,type:"button"},"Update password"))};a(33);function Ra(){var e=ve({userName:localStorage.getItem("userName"),nickName:localStorage.getItem("nickName"),permission:1,about:"",followerCount:0}),t=Object(d.a)(e,3),a=t[0],n=t[1],s=t[2],i=Object(r.useState)(""),u=Object(d.a)(i,2),m=u[0],p=u[1],f=Object(r.useState)(""),b=Object(d.a)(f,2),v=b[0],E=b[1],h=Object(r.useState)("/rewer/uploads/avatars/".concat(localStorage.getItem("userName"),".jpg")),w=Object(d.a)(h,2),g=w[0],j=w[1],O=Object(r.useRef)();function y(){return(y=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xa(a);case 2:if(!e.sent){e.next=6;break}p("Your profile has been updated"),e.next=7;break;case 6:p("Request failed.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ga(localStorage.getItem("userName"));case 2:(t=e.sent)&&n(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new FormData,O.current.files[0]){e.next=4;break}return E("No file selected."),e.abrupt("return");case 4:return e.next=6,Pt(O.current.files[0],300,300,.8);case 6:return a=e.sent,t.append("avatar",a,"".concat(localStorage.getItem("userName"),".jpg")),e.next=10,Oa(t);case 10:if(e.t0=e.sent.status,200!==e.t0){e.next=16;break}E("Avatar updated."),j("/rewer/uploads/avatars/".concat(localStorage.getItem("userName"),".jpg?").concat((new Date).getTime())),e.next=17;break;case 16:E("Process failed. Make sure file's size is not bigger than 10MB.");case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){N.apply(this,arguments)}()}),[]),c.a.createElement("div",null,c.a.createElement("p",null,"User settings"),c.a.createElement("button",{onClick:function(){return y.apply(this,arguments)}},"Log out"),c.a.createElement("div",{className:"profile-grid"},c.a.createElement("div",{className:"profile-grid-item"},c.a.createElement("img",{src:g,onError:function(){j("/rewer/uploads/avatars/default.jpg")},className:"image",alt:"Avatar",title:"Avatar"}),c.a.createElement("input",{ref:O,className:"file-input",type:"file"}),c.a.createElement("button",{onClick:function(){return S.apply(this,arguments)},type:"button"},"Upload"),c.a.createElement("p",null,v)),c.a.createElement("div",{className:"profile-grid-item"},c.a.createElement("h1",null,localStorage.getItem("userName")),c.a.createElement("textarea",{name:"about",value:a.about,onChange:s,rows:10}))),c.a.createElement("div",null,c.a.createElement("label",null,"My nickname: "),c.a.createElement("input",{type:"text",name:"nickName",value:a.nickName,onKeyDown:function(e){"Enter"===e.key&&x()},accept:".png,.jpg",onChange:s}),c.a.createElement("button",{onClick:x,type:"button",className:"save"},"Save")),c.a.createElement("p",null,m),c.a.createElement("div",{className:"bottom-border"}),c.a.createElement(Ma,null))}var La=function(e){var t=e.user,a=Object(r.useState)(""),n=Object(d.a)(a,2),s=n[0],i=n[1];return Object(r.useEffect)((function(){i("/rewer/uploads/avatars/".concat(t.userName,".jpg"))}),[t]),c.a.createElement(m.b,{to:"/user?userName=".concat(t.userName)},c.a.createElement("div",{className:"followed-user-row highlight"},c.a.createElement("img",{src:s,onError:function(){i("/rewer/uploads/avatars/default.jpg")},className:"followed-user-row-item",alt:"user-poster"}),c.a.createElement("p",{className:"followed-user-row-item"},t.nickName)))},Ua=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1];function s(){return(s=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ia({userName:localStorage.getItem("userName")});case 2:(t=e.sent)&&n(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){localStorage.getItem("userName")&&function(){s.apply(this,arguments)}()}),[]),c.a.createElement(r.Fragment,null,c.a.createElement("h3",{className:"center-text"},"Followed"),a.map((function(e){return c.a.createElement(La,{key:"followed-".concat(e.userName),user:e})})))},Aa=function(e){var t=e.length,a=Object(r.useState)([]),n=Object(d.a)(a,2),s=n[0],i=n[1];function u(){return(u=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na({userName:localStorage.getItem("userName"),limit:t});case 2:(a=e.sent)&&i(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){localStorage.getItem("userName")&&function(){u.apply(this,arguments)}()}),[]),c.a.createElement(r.Fragment,null,c.a.createElement("h3",{className:"center-text"},"My Followers"),s.slice(0,8).map((function(e){return c.a.createElement(La,{key:"followed-".concat(e.userName),user:e})})),s.length>t?c.a.createElement(m.b,{to:"TODO"},"More"):c.a.createElement(r.Fragment,null))};function Ya(){var e;return e=null!=localStorage.getItem("userName")?c.a.createElement(Ra,null):c.a.createElement(Pa,null),c.a.createElement(c.a.Fragment,null,window.screen.width>700?c.a.createElement("div",{className:"main-container"},null!=localStorage.getItem("userName")?c.a.createElement(r.Fragment,null,c.a.createElement(Ra,null),c.a.createElement(Ua,null),c.a.createElement("div",{className:"bottom-border"}),c.a.createElement(Aa,{length:1e4})):c.a.createElement(Pa,null)):c.a.createElement("div",{className:"main-container"},e))}var Ha=a(38),Va=(a(57),function(e){var t=e.to,a=e.content;return c.a.createElement(m.b,{to:t},a)}),Ba=function(){var e,t=Object(r.useRef)(null),a=Object(r.useState)(null),n=Object(d.a)(a,2),s=n[0],i=n[1];return window.onscroll=function(){e=t.current.offsetTop,window.pageYOffset>e?t.current.classList.add("sticky"):t.current.classList.remove("sticky")},window.onclick=function(){},Object(r.useEffect)((function(){console.log(localStorage.getItem("userName")),console.log(localStorage.getItem("nickName")),console.log(localStorage.getItem("session")),console.log(localStorage.getItem("permission")),null!=localStorage.getItem("userName")?i(c.a.createElement(x.a,{icon:k.k})):i(c.a.createElement(x.a,{icon:k.g}))}),[]),c.a.createElement("header",null,c.a.createElement("div",{ref:t,className:"topnav"},c.a.createElement("div",{onClick:function(){setTimeout((function(){t.current.classList.remove("responsive")}),250)}},c.a.createElement(Va,{to:"/profile",content:s}),c.a.createElement(Va,{to:"/rewer",content:"Home"}),c.a.createElement(Va,{to:"/follows",content:"Follows"})),c.a.createElement("a",{onClick:function(){t.current.classList.contains("responsive")?t.current.classList.remove("responsive"):(t.current.classList.add("responsive"),document.body.scrollTop=0,document.documentElement.scrollTop=0)},className:"icon"},c.a.createElement(x.a,{icon:k.b}))))},Ga=function(e){var t=e.artist,a=(e.setArtist,e.bindArtist),n=Object(r.useRef)(),s=Object(r.useState)(""),i=Object(d.a)(s,2),u=i[0],m=i[1];function p(){return(p=Object(l.a)(o.a.mark((function e(){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,e.next=3,Pt(n.current.files[0],300,400,.8);case 3:return r=e.sent,a.append("portrait",r,"".concat(t.id,".jpg")),e.next=7,Xt(a);case 7:if(!e.sent){e.next=11;break}m("/rewer/uploads/portraits/".concat(t.id,".jpg?").concat((new Date).getTime())),e.next=12;break;case 11:alert("Process failed.");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){m("/rewer/uploads/portraits/".concat(t.id,".jpg"))}),[]),c.a.createElement("div",null,c.a.createElement("input",{value:t.name,onChange:a,type:"text",name:"name",placeholder:"Name",className:"name-input"}),c.a.createElement("div",{className:"detail-grid"},c.a.createElement("div",{className:"detail-grid-item span-2"},c.a.createElement("h3",null,"Born: "),c.a.createElement("input",{value:t.birthPlace,type:"text",onChange:a,name:"birthPlace",className:"place-input",placeholder:"Birthplace"}),c.a.createElement("input",{value:w(new Date(t.birthDate)),type:"date",onChange:a,name:"birthDate"}),c.a.createElement("br",null),c.a.createElement("h3",null,"Died: "),c.a.createElement("input",{value:t.deathPlace,type:"text",onChange:a,name:"deathPlace",className:"place-input",placeholder:"leave empty if irrelevant",title:"leave empty if irrelevant"}),c.a.createElement("input",{value:w(new Date(t.deathDate)).toString(),type:"date",onChange:a,name:"deathDate"}),c.a.createElement("textarea",{value:t.bio,onChange:a,name:"bio",placeholder:"Biography",rows:30})),c.a.createElement("div",{className:"detail-grid-item first"},c.a.createElement("img",{className:"portrait",src:u,onError:function(){m("/rewer/uploads/portraits/0.jpg")},alt:"Portrait"}),c.a.createElement("br",null),t.id>0?c.a.createElement(r.Fragment,null,c.a.createElement("input",{ref:n,type:"file",accept:".png,.jpg",className:"file-input"}),c.a.createElement("p",null,"It is recommended to use pictures with the standard portrait image ratio (9:16)"),c.a.createElement("button",{onClick:function(){return p.apply(this,arguments)}},"Upload")):c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"Create the artist's page to modify their portrait.")))))};function Ja(){var e=ve({id:parseInt(Lt("artistId")),name:"",birthPlace:"",birthDate:new Date,deathPlace:"",deathDate:new Date,bio:""}),t=Object(d.a)(e,3),a=t[0],n=t[1],s=t[2],i=Object(r.useState)(""),u=Object(d.a)(i,2),m=u[0],p=u[1];function f(){return(f=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt(a.id);case 2:(t=e.sent)?n(t):alert("Server error: could not download artist data.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(a);case 2:(t=e.sent)?(p("Artist's page successfully created."),Ut({name:"artistId",value:t.toString()}),n(Object(fe.a)(Object(fe.a)({},a),{},{id:t}))):p("Internal error: the server was unable to fulfill your request.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t(a);case 2:if(!e.sent){e.next=6;break}p("Changes saved: ".concat((new Date).getHours()," : ").concat((new Date).getMinutes())),e.next=8;break;case 6:p("WARNING: your last attempt to save your work was declined by the server."),alert("Request failed: server error.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){a.id>0&&function(){f.apply(this,arguments)}()}),[]),c.a.createElement("div",{className:"main-container"},m,c.a.createElement("br",null),a.id>0?c.a.createElement("button",{onClick:function(){return v.apply(this,arguments)}},"Save changes"):c.a.createElement("button",{onClick:function(){return b.apply(this,arguments)}},"Create artist's page"),c.a.createElement(Ga,{artist:a,setArtist:n,bindArtist:s}))}var Wa=function(e){var t=e.cast;return c.a.createElement("div",{className:"cast-row"},c.a.createElement("img",{src:"/rewer/uploads/portraits/".concat(t.artistId,".jpg"),alt:t.artistName}),c.a.createElement("span",null,c.a.createElement(m.b,{to:"/star?artistId=".concat(t.artistId)},t.artistName)),c.a.createElement("p",{className:"cast-row-item"},t.name))},qa=function(e){var t=e.casts;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(Wa,{key:"cast-".concat(e.id),cast:e})})))};function Ka(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1];function s(){return(s=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(5*Math.random()),e.next=3,B(2,t);case 3:(a=e.sent)&&n(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),c.a.createElement(r.Fragment,null,c.a.createElement("h3",{className:"center-text"},"Featured Films"),c.a.createElement("div",{className:"double-grid"},a.map((function(e){return c.a.createElement(m.b,{key:"featured-".concat(e.id),to:"/movie?movieId=".concat(e.id)},c.a.createElement(y,{movie:e}))}))))}var za=function(e){var t=e.value,a=Object(r.useState)("score"),n=Object(d.a)(a,2),s=n[0],i=n[1];return Object(r.useEffect)((function(){i(t>6?"main-score high":t<4?"main-score low":"main-score")}),[t]),c.a.createElement("div",{className:s},c.a.createElement("p",null,Math.round(10*t)/10))},$a=function(e){var t,a=e.movie;return c.a.createElement("div",null,c.a.createElement("div",{className:"title-grid"},c.a.createElement("p",{className:"title"},a.title),c.a.createElement(za,{value:a.avgScore})),c.a.createElement("div",null,parseInt(localStorage.getItem("permission"))>1?c.a.createElement(m.b,{to:"/editmovie?movieId=".concat(a.id)},"Edit this movie's page"):c.a.createElement(r.Fragment,null)),null!=a.genres?a.genres.map((function(e){return c.a.createElement(m.b,{key:"genre-".concat(e.id),className:"genre",to:"todo"},e.genreName)})):c.a.createElement(r.Fragment,null),c.a.createElement("div",{className:"movie-info-grid"},c.a.createElement("div",{className:"movie-info-grid-item"},c.a.createElement("p",null,a.summary),c.a.createElement("p",null,"Premier: ","".concat((t=a.releaseDate.toString(),new Date(t).getDate())," ").concat(function(e){return g[new Date(e).getMonth()]}(a.releaseDate.toString()),"  ").concat(E(a.releaseDate.toString()))),c.a.createElement("p",null,"Runtime: ","".concat(a.runtime," minutes")),c.a.createElement("p",null,"Directed by: "),c.a.createElement("ul",null,a.casts.filter((function(e){return 1===e.castTypeId})).map((function(e){return c.a.createElement("li",{key:"director-link-".concat(e.artistId)},c.a.createElement(m.b,{className:"star",to:"/star?artistId=".concat(e.artistId),title:e.name},e.artistName))}))),c.a.createElement("p",null,"Written by: "),c.a.createElement("ul",null,a.casts.filter((function(e){return 3===e.castTypeId})).map((function(e){return c.a.createElement("li",{key:"director-link-".concat(e.artistId)},c.a.createElement(m.b,{className:"star",to:"/star?artistId=".concat(e.artistId),title:e.name},e.artistName),c.a.createElement("br",null))})))),window.screen.width>800?c.a.createElement("img",{src:"/rewer/uploads/posters/".concat(a.id,".jpg"),className:"poster",title:a.title,alt:"".concat(a.title,"-poster")}):c.a.createElement(r.Fragment,null)))},Qa=function(e){var t=e.reviews;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(Ue,{key:"review-".concat(e.id),review:e})})))},Xa=function(e){var t=e.defaultValue,a=e.onUpdate,n=Object(r.useRef)();return c.a.createElement("select",{ref:n,onChange:function(){a(he[n.current.value])},value:t},c.a.createElement("option",{value:he.popIndex},"Most popular"),c.a.createElement("option",{value:he.date},"Latest"))},Za=function(e){var t=e.movie,a=be([]),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)(void 0),m=Object(d.a)(u,2),p=m[0],b=m[1],v=Object(r.useState)(""),E=Object(d.a)(v,2),w=E[0],g=E[1];function j(){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je({movieId:t.id,limit:5,offset:0,orderby:p});case 2:(a=e.sent)?(i(a),g("Reviews"),5===a.length&&x()):g("Server errror: could not download reviewdata.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(),e.next=3,je({movieId:t.id,limit:5,offset:s.current.length,orderby:p});case 3:(a=e.sent)?(i([].concat(Object(f.a)(s.current),Object(f.a)(a))),5===a.length&&x()):alert("Server errror: could not download reviewdata.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){window.addEventListener("scroll",N)}function k(){window.removeEventListener("scroll",N)}function N(){window.innerHeight+window.scrollY>=.9*document.body.offsetHeight&&function(){y.apply(this,arguments)}()}return Object(r.useEffect)((function(){return function(){k()}}),[]),Object(r.useEffect)((function(){return(new Date).getTime()>=new Date(t.releaseDate).getTime()?p===he.popIndex?t.id>0&&j():b(he.popIndex):g("Reviews will be available on ".concat(h(t.releaseDate.toString()))),function(){k()}}),[t.id,t.releaseDate]),Object(r.useEffect)((function(){return t.id>0&&null!=p&&j(),function(){k()}}),[p]),c.a.createElement("div",null,c.a.createElement("h2",{className:"center-text"},w),(new Date).getTime()>=new Date(t.releaseDate).getTime()?c.a.createElement(r.Fragment,null,c.a.createElement(Xa,{defaultValue:p,onUpdate:function(e){b(e)}}),c.a.createElement(Qa,{reviews:s.current})):c.a.createElement(r.Fragment,null))},en=function(e){var t=e.review,a=e.onEdit,n=e.onDelete;return c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"review-grid"},c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){a(t)}},"Edit"),c.a.createElement("button",{onClick:function(){n(t)}},"Delete")),c.a.createElement("p",{className:"review-date"},h(t.date)),c.a.createElement(v,{value:t.score})),c.a.createElement("p",null,t.text),c.a.createElement("p",null,t.popIndex," points"))},tn=function(e){var t=e.startValue,a=e.setScore,n=Object(r.useState)(t),s=Object(d.a)(n,2),i=s[0],u=s[1];return Object(r.useEffect)((function(){a(i)}),[i]),c.a.createElement("div",null,c.a.createElement(v,{value:i}),c.a.createElement("button",{onClick:function(){i<10&&u((function(e){return e+1}))},className:"score-btn plus"},c.a.createElement(x.a,{icon:k.e})),c.a.createElement("button",{onClick:function(){i>1&&u((function(e){return e-1}))},className:"score-btn minus"},c.a.createElement(x.a,{icon:k.d})))},an=function(e){var t=e.review,a=e.onPost,n=ve(t),r=Object(d.a)(n,3),s=r[0],i=r[1],u=r[2];return c.a.createElement("div",null,c.a.createElement("div",{className:"score-grid"},c.a.createElement("textarea",{className:"score-item",name:"text",rows:10,value:s.text,onChange:u}),c.a.createElement("div",{className:"score-item"},c.a.createElement(tn,{startValue:t.score,setScore:function(e){i(Object(fe.a)(Object(fe.a)({},s),{},{score:e}))}}))),c.a.createElement("button",{onClick:function(){a(s)}},"Post"))},nn=function(e){var t=e.movie,a=Object(r.useState)(c.a.createElement(an,{review:{id:0,text:"",movieId:t.id,date:"",popIndex:0,score:5,userName:localStorage.getItem("userName")},onPost:h})),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)(""),m=Object(d.a)(u,2),p=m[0],f=m[1];function b(e){i(c.a.createElement(an,{review:e,onPost:v})),f("Editing your review:")}function v(e){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t);case 2:if(!e.sent){e.next=5;break}i(c.a.createElement(en,{review:t,onEdit:b,onDelete:g})),f("Review has been updated.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return w.apply(this,arguments)}function w(){return(w=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(t);case 2:(a=e.sent)?(t=Object(fe.a)(Object(fe.a)({},t),{},{id:a,date:(new Date).toLocaleDateString("hu-HU"),popIndex:1}),i(c.a.createElement(en,{review:t,onEdit:b,onDelete:g})),f("Your review has been posted.")):alert("Server error: could not post your review.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(a.id);case 2:if(!e.sent){e.next=7;break}f("Your review has been deleted."),i(c.a.createElement(an,{review:{id:0,text:"",movieId:t.id,date:"",popIndex:0,score:5,userName:""},onPost:h})),e.next=8;break;case 7:alert("Server error: could not delete your review.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t.id);case 2:if(404!=(a=e.sent).status){e.next=8;break}f("You haven't posted a review for this movie yet."),i(c.a.createElement(an,{review:{id:0,text:"",movieId:t.id,date:"",popIndex:0,score:5,userName:""},onPost:h})),e.next=17;break;case 8:if(200!==a.status){e.next=15;break}return e.next=11,a.json();case 11:n=e.sent,i(c.a.createElement(en,{review:n,onEdit:b,onDelete:g})),e.next=17;break;case 15:alert("Server error"),f("Your review info could not bet downloaded from the server.");case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null==localStorage.getItem("userName")?i(c.a.createElement(pe,{message:"post a review"})):t.id>0&&function(){e.apply(this,arguments)}()}),[t.id]),Object(r.useEffect)((function(){(new Date).getTime()<new Date(t.releaseDate).getTime()&&(i(c.a.createElement("p",null,"This movie has not been released yet.")),f(""))}),[t]),c.a.createElement(r.Fragment,null,c.a.createElement("h3",{className:"center-text"},"My Review"),c.a.createElement("p",null,p),c.a.createElement("div",{className:"review-container"},s))};function rn(){var e=Object(r.useState)({id:parseInt(Lt("movieId")),title:"",releaseDate:"",summary:"",genres:[],casts:[],avgScore:0}),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)([]),i=Object(d.a)(s,2),u=i[0],m=i[1];function p(){return(p=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(a.id);case 2:(t=e.sent)&&(n(t),m(t.casts.filter((function(e){return e.castTypeId>3}))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,function(){p.apply(this,arguments)}()}),[]),c.a.createElement(r.Fragment,null,window.screen.width>800?c.a.createElement("div",{className:"main-grid"},c.a.createElement("div",{className:"left-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Ka,null)),c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Dt,{length:3}))),c.a.createElement("div",{className:"main-item"},c.a.createElement($a,{movie:a}),c.a.createElement(Za,{movie:a})),c.a.createElement("div",{className:"right-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement("h3",{className:"center-text"},"Cast"),c.a.createElement(qa,{casts:u})),c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(nn,{movie:a})))):c.a.createElement("div",{className:"main-container"},c.a.createElement($a,{movie:a}),c.a.createElement("h2",null,"Cast"),c.a.createElement(qa,{casts:u}),c.a.createElement(nn,{movie:a}),c.a.createElement(Za,{movie:a})))}var cn=function(e){var t=e.artist,a=Object(r.useState)(null),n=Object(d.a)(a,2),s=n[0],i=n[1],u=c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"Died: ",c.a.createElement("i",null,"".concat(h(t.deathDate.toString()),","))),c.a.createElement("p",null,c.a.createElement("i",null,t.deathPlace))),o=Object(r.useState)(c.a.createElement("p",null)),l=Object(d.a)(o,2),p=l[0],f=l[1],b=c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"".concat(t.bio.substring(0,1500),"...")),c.a.createElement("p",{onClick:v,className:"show-more"},"Show more"));function v(){f(c.a.createElement(r.Fragment,null,c.a.createElement("p",null,t.bio),t.bio.length>1500?c.a.createElement("p",{onClick:E,className:"show-more"},"Show less"):c.a.createElement(r.Fragment,null)))}function E(){f(b)}return Object(r.useEffect)((function(){null!=t.deathPlace&&""!==t.deathPlace?i(u):i(c.a.createElement(r.Fragment,null))}),[t]),Object(r.useEffect)((function(){t.bio.length>1500?E():v()}),[t]),c.a.createElement("div",null,window.screen.width>600?c.a.createElement("div",{className:"info-grid"},c.a.createElement("div",{className:"info-grid-item"},c.a.createElement("h2",null,t.name),c.a.createElement("p",null,parseInt(localStorage.getItem("permission"))>1?c.a.createElement(m.b,{to:"/editartist?artistId=".concat(t.id)},"Edit this star's page"):c.a.createElement(r.Fragment,null)),p),c.a.createElement("div",null,c.a.createElement("img",{className:"info-portrait",src:"/rewer/uploads/portraits/".concat(t.id,".jpg"),alt:"".concat(t.name,"_portrait")}),c.a.createElement("p",null,"Born: ",c.a.createElement("i",null,"".concat(h(t.birthDate.toString()),","))),c.a.createElement("p",null,c.a.createElement("i",null,t.birthPlace)),s)):c.a.createElement("div",{className:"info-grid-item"},c.a.createElement("h2",null,t.name),c.a.createElement("p",null,parseInt(localStorage.getItem("permission"))>1?c.a.createElement(m.b,{to:"/editartist?artistId=".concat(t.id)},"Edit this star's page"):c.a.createElement(r.Fragment,null)),c.a.createElement("img",{className:"info-portrait",src:"/rewer/uploads/portraits/".concat(t.id,".jpg"),alt:"".concat(t.name,"_portrait")}),c.a.createElement("p",null,"Born: ",c.a.createElement("i",null,"".concat(h(t.birthDate.toString()),","))),c.a.createElement("p",null,c.a.createElement("i",null,t.birthPlace)),s,p))},sn=function(e){var t=e.cast,a=Object(r.useState)(t.name),n=Object(d.a)(a,2),s=n[0],i=n[1];return Object(r.useEffect)((function(){t.castTypeId>3?i(t.name):function(){""===t.name?i(t.castTypeName):i("".concat(t.castTypeName," (").concat(t.name,")"));console.log("FAST")}()}),[t]),c.a.createElement("div",null,c.a.createElement("div",{className:"cast-row"},c.a.createElement("img",{src:"/rewer/uploads/posters/".concat(t.movieId,".jpg"),alt:t.movieName}),c.a.createElement("span",null,c.a.createElement(m.b,{to:"/movie?movieId=".concat(t.movieId)},"".concat(t.movieTitle," (").concat(E(t.movieDate),")"))),c.a.createElement("p",null,s)))},un=function(e){var t=e.casts;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(sn,{key:"artist-cast-".concat(e.id),cast:e})})))},on=function(e){var t=e.cast,a=Object(r.useState)(t.name),n=Object(d.a)(a,2),s=n[0],i=n[1];return Object(r.useEffect)((function(){t.castTypeId>3?i(t.name):""===t.name?i(t.castTypeName):i("".concat(t.castTypeName," (").concat(t.name,")"))}),[t]),c.a.createElement("div",null,c.a.createElement("div",{className:"cast-row"},c.a.createElement("img",{src:"/rewer/uploads/seriesposters/".concat(t.seriesId,".jpg"),alt:t.movieName}),c.a.createElement("span",null,c.a.createElement(m.b,{to:"/series?seriesId=".concat(t.seriesId)},"".concat(t.seriesTitle," (").concat(E(t.firstEpisodeDate),")"))),c.a.createElement("p",null,s)))},ln=function(e){var t=e.casts;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(on,{key:"artist-cast-".concat(e.id),cast:e})})))},mn=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1];function s(){return(s=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(2,0);case 2:(t=e.sent)&&n(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),c.a.createElement("div",null,c.a.createElement("h3",{className:"center-text"},"Featured Series"),c.a.createElement("div",{className:"double-grid"},a.map((function(e){return c.a.createElement(m.b,{key:"featured-".concat(e.id),to:"series?seriesId=".concat(e.id)},c.a.createElement(Ve,{series:e}))}))))};function pn(){var e=Object(r.useState)({id:parseInt(Lt("artistId")),name:"",birthPlace:"",birthDate:new Date,deathPlace:"",deathDate:new Date,bio:"",movieCasts:[],seriesCasts:[]}),t=Object(d.a)(e,2),a=t[0],n=t[1];function s(){return(s=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt(a.id);case 2:(t=e.sent)?n(t):alert("Server error.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),c.a.createElement(r.Fragment,null,window.screen.width>1100?c.a.createElement("div",{className:"main-grid"},c.a.createElement("div",{className:"left-item"},c.a.createElement("div",{className:"side-container large-side"},Math.random()>.5?c.a.createElement(Ka,null):c.a.createElement(mn,null)),c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Dt,{length:5}))),c.a.createElement("div",{className:"main-item"},c.a.createElement(cn,{artist:a}),c.a.createElement(un,{casts:a.movieCasts}),c.a.createElement(ln,{casts:a.seriesCasts})),c.a.createElement("div",{className:"right-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Ft,null)),c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Nt,null)))):c.a.createElement("div",{className:"main-container"},c.a.createElement(cn,{artist:a}),c.a.createElement(un,{casts:a.movieCasts})))}function dn(e){return fn.apply(this,arguments)}function fn(){return(fn=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/follow/insert_follow",t);case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent.newId);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bn(e){return vn.apply(this,arguments)}function vn(){return(vn=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/follow/delete_follow",{id:t});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var En=function(e){var t=e.defaultValue,a=e.onUpdate,n=Object(r.useRef)();return c.a.createElement("select",{ref:n,value:t,onChange:function(){a(n.current.value)}},c.a.createElement("option",{value:"0"},"Banned"),c.a.createElement("option",{value:"1"},"User"),c.a.createElement("option",{value:"2"},"Moderator"),c.a.createElement("option",{value:"3"},"Admin"))},hn=function(e){var t=e.user,a=Object(r.useState)(Object(fe.a)({},t)),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)(c.a.createElement(r.Fragment,null)),m=Object(d.a)(u,2),p=m[0],f=m[1],b=Object(r.useState)("/rewer/uploads/avatars/".concat(s.userName,".jpg")),v=Object(d.a)(b,2),E=v[0],h=v[1],w=Object(r.useState)({id:s.isFollowed,follower:localStorage.getItem("userName"),followed:s.userName}),g=Object(d.a)(w,2),j=g[0],O=g[1];function y(){return(y=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:0,userName:s.userName,level:parseInt(t)},e.next=3,va(a);case 3:if(!e.sent){e.next=7;break}i(Object(fe.a)(Object(fe.a)({},s),{},{permission:a.level})),e.next=8;break;case 7:alert("Server error");case 8:i(Object(fe.a)(Object(fe.a)({},s),{},{permission:parseInt(t)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(c.a.createElement("button",{className:"follow"},"Follow")),e.next=3,dn(j);case 3:(t=e.sent)?O(Object(fe.a)(Object(fe.a)({},j),{},{id:t})):alert("Server error.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(c.a.createElement("button",{className:"unfollow"},"Unfollow")),e.next=3,bn(j.id);case 3:if(!e.sent){e.next=7;break}O(Object(fe.a)(Object(fe.a)({},j),{},{id:0})),e.next=8;break;case 7:alert("Server error.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){i(t)}),[t]),Object(r.useEffect)((function(){var e;e=t,null!=localStorage.getItem("userName")&&localStorage.getItem("userName")!==e.userName&&(j.id>0?f(c.a.createElement("button",{onClick:N,className:"unfollow"},"Unfollow")):f(c.a.createElement("button",{onClick:x,className:"follow"},"Follow")))}),[j]),Object(r.useEffect)((function(){O({id:s.isFollowed,follower:localStorage.getItem("userName"),followed:s.userName})}),[s]),c.a.createElement("div",null,c.a.createElement("h1",null,s.nickName),p,c.a.createElement("span",null,t.followerCount," followers"),3===parseInt(localStorage.getItem("permission"))&&t.userName!==localStorage.getItem("userName")?c.a.createElement(En,{defaultValue:s.permission.toString(),onUpdate:function(e){!function(e){y.apply(this,arguments)}(e)}}):c.a.createElement(r.Fragment,null),c.a.createElement("div",{className:"user-grid"},c.a.createElement("div",null,c.a.createElement("img",{src:E,onError:function(){h("/rewer/uploads/avatars/default.jpg")},alt:"user-avatar"})),c.a.createElement("div",null,c.a.createElement("p",null,s.about))))};function wn(){var e=Object(r.useState)({userName:Lt("userName"),nickName:"",permission:1,about:""}),t=Object(d.a)(e,2),a=t[0],n=t[1],s=be([]),i=Object(d.a)(s,2),u=i[0],m=i[1],p=Object(r.useState)(he.date),b=Object(d.a)(p,2),v=b[0],E=b[1];function h(){return(h=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ga(Lt("userName"));case 2:t=e.sent,console.log(t),t&&n(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){window.addEventListener("scroll",j)}function g(){window.removeEventListener("scroll",j)}Object(r.useEffect)((function(){return function(){h.apply(this,arguments)}(),function(){g()}}),[]),Object(r.useEffect)((function(){return function(){O.apply(this,arguments)}(),function(){g()}}),[v]);var j=function e(){window.innerHeight+window.scrollY>=.9*document.body.offsetHeight&&(window.removeEventListener("scroll",e),function(){y.apply(this,arguments)}())};function O(){return(O=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,ke(a.userName,5,0,v);case 3:(t=e.sent)&&(m(t),t.length,w());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,ke(a.userName,5,u.current.length,v);case 3:(t=e.sent)?(m([].concat(Object(f.a)(u.current),Object(f.a)(t))),t.length):alert("Server errror: could not download reviewdata.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement(r.Fragment,null,window.screen.width>800?c.a.createElement("div",{className:"main-grid"},c.a.createElement("div",{className:"left-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Ka,null))),c.a.createElement("div",{className:"main-item"},c.a.createElement(hn,{user:a}),c.a.createElement("br",null),c.a.createElement("h2",null,a.nickName,"'s reviews"),c.a.createElement(Xa,{defaultValue:v,onUpdate:function(e){E(e)}}),window.screen.width>600?c.a.createElement(r.Fragment,null,u.current.map((function(e){return c.a.createElement(Ae,{key:"review-".concat(e.id),review:Object(fe.a)(Object(fe.a)({},e),{},{nickName:""})})}))):c.a.createElement(r.Fragment,null,u.current.map((function(e){return c.a.createElement(Ye,{key:"review-".concat(e.id),review:Object(fe.a)(Object(fe.a)({},e),{},{nickName:""})})})))),c.a.createElement("div",{className:"right-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Ft,null)),c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(mn,null)))):c.a.createElement("div",{className:"main-container"},c.a.createElement(hn,{user:a}),c.a.createElement("br",null),c.a.createElement("h2",null,a.nickName,"'s reviews"),c.a.createElement(Xa,{defaultValue:v,onUpdate:function(e){E(e)}}),window.screen.width>600?c.a.createElement(r.Fragment,null,u.current.map((function(e){return c.a.createElement(Ae,{key:"review-".concat(e.id),review:Object(fe.a)(Object(fe.a)({},e),{},{nickName:""})})}))):c.a.createElement(r.Fragment,null,u.current.map((function(e){return c.a.createElement(Ye,{key:"review-".concat(e.id),review:Object(fe.a)(Object(fe.a)({},e),{},{nickName:""})})})))))}function gn(){return c.a.createElement(r.Fragment,null,window.screen.width>1100?c.a.createElement("div",{className:"main-grid"},c.a.createElement("div",{className:"left-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Ua,null)),c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Nt,null))),c.a.createElement("div",{className:"main-item"},c.a.createElement(He,null)),c.a.createElement("div",{className:"right-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Aa,{length:10})),c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Ka,null)))):c.a.createElement("div",{className:"main-container"},c.a.createElement(He,null)))}function jn(e){return On.apply(this,arguments)}function On(){return(On=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/season/insert_season",t);case 2:if(!(a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent.newId);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yn(e){return xn.apply(this,arguments)}function xn(){return(xn=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/season/delete_season",{id:t});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(58);var kn=function(e){var t=e.season,a=e.selectedId,n=e.onSelected,s=Object(r.useState)("season-grid"),i=Object(d.a)(s,2),u=i[0],o=i[1];return Object(r.useEffect)((function(){t.id===a?o("season-grid selected-row"):o("season-grid")}),[a]),c.a.createElement("div",{onClick:function(){n()},className:u},c.a.createElement("p",null,"Season ",t.order),c.a.createElement("p",null,t.releaseYear),c.a.createElement("p",null,t.episodes.length," episodes"))},Nn=function(e){var t=e.episode,a=e.selectedId,n=e.onSelect,s=e.onDelete,i=Object(r.useState)("edit-episode-row"),u=Object(d.a)(i,2),o=u[0],l=u[1];return Object(r.useEffect)((function(){a===t.id?l("edit-episode-row selected-row"):l("edit-episode-row")}),[a]),c.a.createElement("div",{onClick:n,className:o},c.a.createElement("p",null,t.title),c.a.createElement("p",null,h(t.releaseDate.toString())),c.a.createElement("p",null,c.a.createElement("button",{onClick:s},"Delete")))},Sn=function(e){var t=e.season,a=e.setEpisodes,n=e.summary,s=ve({id:0,title:"",casts:[]}),i=Object(d.a)(s,3),u=i[0],m=i[1],p=i[2],b=Object(r.useState)(""),v=Object(d.a)(b,2),E=v[0],h=v[1];function g(){return(g=Object(l.a)(o.a.mark((function e(){var r,c,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=45,t.episodes.length>0?(c=new Date(t.episodes[t.episodes.length-1].releaseDate),s=t.episodes[t.episodes.length-1].runtime):c=isNaN(parseInt(t.releaseYear))?new Date("2015-01-01"):new Date("".concat(t.releaseYear,"-01-01")),i={id:0,title:"Season ".concat(t.order,": episode ").concat(t.episodes.length+1),runtime:s,summary:n,genres:[],releaseDate:w(c),seasonId:t.id,casts:[]},e.next=5,Q(i);case 5:(r=e.sent)>0?(a([].concat(Object(f.a)(t.episodes),[Object(fe.a)(Object(fe.a)({},i),{},{id:r})])),m(Object(fe.a)(Object(fe.a)({},i),{},{id:r}))):alert("Server error: could not add new episode");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(u);case 2:if(!e.sent){e.next=7;break}h("Episode details saved: ".concat((new Date).getHours()," : ").concat((new Date).getMinutes())),a(_t(t.episodes,t.episodes.find((function(e){return e.id===u.id})),u)),e.next=8;break;case 7:h("Internal error: series details could not be saved.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){u.id>0&&a(_t(t.episodes,t.episodes.find((function(e){return e.id===u.id})),u))}),[u.casts]),c.a.createElement("div",null,t.episodes.map((function(e){return c.a.createElement(Nn,{key:"".concat(e.id),onDelete:function(){!function(e){O.apply(this,arguments)}(e.id)},episode:e,selectedId:u.id,onSelect:function(){m(e)}})})),c.a.createElement("div",{onClick:function(){return g.apply(this,arguments)},className:"add-episode"},c.a.createElement(x.a,{icon:k.f})),u.id>0?c.a.createElement(r.Fragment,null,c.a.createElement("button",{onClick:function(){return j.apply(this,arguments)}},"Save"),E,c.a.createElement(Rt,{movie:u,setMovie:m,movieBinder:p}),c.a.createElement(ea,{movie:u,setMovie:m,season:t,setEpisodes:a})):c.a.createElement(r.Fragment,null))},In=function(e){var t=e.series,a=e.setSeasons,n=Object(r.useState)(""),s=Object(d.a)(n,2),i=s[0],u=s[1],m=Object(r.useState)({id:0,seriesId:t.id,episodes:[]}),p=Object(d.a)(m,2),b=p[0],v=p[1];function E(){return(E=Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:0,seriesId:t.id,releaseYear:i,episodes:[],order:t.seasons.length+1},e.next=3,jn(n);case 3:n.id=e.sent,n.id&&a([].concat(Object(f.a)(t.seasons),[n]));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.seasons[t.seasons.length-1].id,e.next=3,yn(n);case 3:if(!e.sent){e.next=7;break}a(t.seasons.filter((function(e){return e.id!==n}))),e.next=8;break;case 7:alert("Server error");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",null,c.a.createElement("div",{className:"adder-panel"},c.a.createElement("h3",null,"Add new season: "),c.a.createElement("label",null,"Year"),c.a.createElement("input",{value:i,onChange:function(e){u(e.target.value)},name:"releaseYear",placeholder:"release"}),c.a.createElement("button",{onClick:function(){return E.apply(this,arguments)}},"Add new season"),t.seasons.length>0?c.a.createElement("button",{onClick:function(){return h.apply(this,arguments)}},"Delete last season"):c.a.createElement(r.Fragment,null)),t.seasons.map((function(e){return c.a.createElement(kn,{key:e.id,selectedId:b.id,onSelected:function(){return a=e.id,void v(t.seasons.find((function(e){return e.id===a})));var a},season:e})})),t.seasons.length>0?c.a.createElement(r.Fragment,null,c.a.createElement("h2",{className:"series-title"},"Episodes:"),c.a.createElement("div",null,c.a.createElement(Sn,{season:b,setEpisodes:function(e){var n;n=e,a(_t(t.seasons,t.seasons.find((function(e){return e.id===b.id})),Object(fe.a)(Object(fe.a)({},b),{},{episodes:n}))),v(Object(fe.a)(Object(fe.a)({},b),{},{episodes:n}))},summary:t.summary}))):c.a.createElement(r.Fragment,null))},Cn=function(e){var t=e.series,a=(e.setSeries,e.bindSeries),n=Object(r.useRef)(),s=Object(r.useState)(""),i=Object(d.a)(s,2),u=i[0],m=i[1];function p(){return(p=Object(l.a)(o.a.mark((function e(){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new FormData,n.current.files[0]){e.next=4;break}return alert("No file selected."),e.abrupt("return");case 4:return e.next=6,Pt(n.current.files[0],400,700,.8);case 6:return r=e.sent,a.append("poster",r,"".concat(t.id,".jpg")),e.next=10,st(a);case 10:if(!e.sent){e.next=14;break}m("/rewer/uploads/seriesposters/".concat(t.id,".jpg?").concat((new Date).getTime())),e.next=15;break;case 14:alert("Upload unsuccessful");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){t.id>0?m("/rewer/uploads/seriesPosters/".concat(t.id,".jpg?").concat((new Date).getTime())):m("/rewer/uploads/seriesPosters/0.jpg?")}),[]),c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"detail-grid"},c.a.createElement("div",{className:"span-2"},c.a.createElement("input",{value:t.title,onChange:a,name:"title",type:"text",placeholder:"Title",className:"title-input"}),c.a.createElement("br",null),c.a.createElement("textarea",{value:t.summary,onChange:a,name:"summary",placeholder:"Write something about the story...",rows:20})),c.a.createElement("div",null,c.a.createElement("img",{src:u,onError:function(){m("/rewer/uploads/seriesPosters/0.jpg")},alt:"Poster",title:"Poster",className:"edit-poster"}),t.id>0?c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"It is recommended to use an image with a standard poster image ratio"),c.a.createElement("input",{ref:n,type:"file",accept:".png,.jpg,.jpeg",className:"file-input"}),c.a.createElement("button",{onClick:function(){return p.apply(this,arguments)}},"Upload")):c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"Create the series' page to edit this picture.")))))};function Dn(){var e=ve({id:parseInt(Lt("seriesId")),title:"",summary:"",seasons:[],genres:[]}),t=Object(d.a)(e,3),a=t[0],n=t[1],s=t[2],i=Object(r.useState)(""),u=Object(d.a)(i,2),m=u[0],p=u[1];function b(){return(b=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(a.id);case 2:(t=e.sent)?n(t):alert("Server error");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(a);case 2:(t=e.sent)?(n(Object(fe.a)(Object(fe.a)({},a),{},{id:t})),Ut({name:"seriesId",value:t.toString()}),p("Series successfully created.")):p("Internal error: could not create series page.");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(a);case 2:if(!e.sent){e.next=6;break}p("Series details saved: ".concat((new Date).getHours()," : ").concat((new Date).getMinutes())),e.next=7;break;case 6:p("Internal error: series details could not be saved.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:0,seriesId:a.id,genreId:t.id,genreName:t.name},e.next=3,pt(r);case 3:r.id=e.sent,r.id>0?n(Object(fe.a)(Object(fe.a)({},a),{},{genres:[].concat(Object(f.a)(a.genres),[r])})):alert("Error: could not add genre");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(t);case 2:if(!e.sent){e.next=6;break}n(Object(fe.a)(Object(fe.a)({},a),{},{genres:a.genres.filter((function(e){return e.id!==t}))})),e.next=7;break;case 6:alert("Server error: could not delete genre");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){a.id>0&&function(){b.apply(this,arguments)}()}),[]),c.a.createElement("div",{className:"main-container"},m,c.a.createElement("br",null),a.id>0?c.a.createElement("button",{onClick:function(){return E.apply(this,arguments)}},"Save series details"):c.a.createElement("button",{onClick:function(){return v.apply(this,arguments)}},"Create series"),c.a.createElement(Cn,{series:a,setSeries:n,bindSeries:s}),a.id>0?c.a.createElement(r.Fragment,null,c.a.createElement(ta,{movie:a,onAdd:function(e){!function(e){h.apply(this,arguments)}(e)},onDelete:function(e){!function(e){w.apply(this,arguments)}(e)}}),c.a.createElement(In,{series:a,setSeasons:function(e){n(Object(fe.a)(Object(fe.a)({},a),{},{seasons:e}))}})):c.a.createElement(r.Fragment,null))}var Fn=function(e){var t=e.cast;return c.a.createElement("div",{className:"cast-row"},c.a.createElement("img",{src:"/rewer/uploads/portraits/".concat(t.artistId,".jpg"),alt:t.artistName}),c.a.createElement("span",null,c.a.createElement(m.b,{to:"/star?artistId=".concat(t.artistId)},t.artistName)),c.a.createElement("p",{className:"cast-row-item"},t.name,"(",t.episodeCount,")"))},Tn=function(e){var t=e.episode,a=e.selectedId,n=Object(r.useState)("side-row"),s=Object(d.a)(n,2),i=s[0],u=s[1];return Object(r.useEffect)((function(){a===t.id?u("side-row selected-row"):u("side-row")}),[a]),c.a.createElement("div",{className:i},c.a.createElement("p",null,t.title),c.a.createElement(v,{value:t.avgScore}))},_n=function(e){var t=e.episodes,a=e.onSelectedChange,n=Object(r.useState)({id:0,title:"",releaseDate:"",casts:[],genres:[],summary:""}),s=Object(d.a)(n,2),i=s[0],u=s[1];return Object(r.useEffect)((function(){a(i)}),[i]),c.a.createElement("div",null,t.map((function(e){return c.a.createElement("div",{key:"episode-select-".concat(e.id),onClick:function(){u(e)}},c.a.createElement(Tn,{episode:e,selectedId:i.id}))})))},Pn=function(e){var t=e.selectedSeason,a=e.setSelectedSeason,n=e.seasons;return c.a.createElement("select",{value:t.id.toString(),onChange:function(e){a(n.find((function(t){return t.id===parseInt(e.target.value)})))}},n.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id.toString()},"Season ",e.order)})))},Mn=function(e){var t=e.series,a=Object(r.useState)(0),n=Object(d.a)(a,2),s=n[0],i=n[1];return Object(r.useEffect)((function(){t.seasons.length>0&&vt(t)>0&&i(function(e){var t,a=0,n=0,r=Object(b.a)(e.seasons);try{for(r.s();!(t=r.n()).done;){var c,s=t.value,i=Object(b.a)(s.episodes);try{for(i.s();!(c=i.n()).done;){var u=c.value;u.avgScore>0&&(n+=u.avgScore,a++)}}catch(o){i.e(o)}finally{i.f()}}}catch(o){r.e(o)}finally{r.f()}return n/a}(t))}),[t]),c.a.createElement("div",null,window.screen.width>1e3?c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"title-grid"},c.a.createElement("p",{className:"title"},t.title),c.a.createElement(za,{value:Math.round(10*s)/10})),parseInt(localStorage.getItem("permission"))>1?c.a.createElement("div",null,c.a.createElement(m.b,{to:"/editseries?seriesId=".concat(t.id)},"Edit series' page")):c.a.createElement(r.Fragment,null),t.genres.map((function(e){return c.a.createElement(m.b,{key:"genre-".concat(e.id),className:"genre",to:"todo"},e.genreName)})),c.a.createElement("div",{className:"movie-info-grid"},c.a.createElement("div",{className:"movie-info-grid-item"},c.a.createElement("p",null,t.summary),null!=Et(t)?c.a.createElement(r.Fragment,null,c.a.createElement("p",null,"Premier: ",h(Et(t))),c.a.createElement("p",null,"Average runtime: ",Math.round(function(e){var t,a=vt(e),n=0,r=Object(b.a)(e.seasons);try{for(r.s();!(t=r.n()).done;){var c,s=t.value,i=Object(b.a)(s.episodes);try{for(i.s();!(c=i.n()).done;){var u=c.value;u.runtime>0&&(n+=u.runtime)}}catch(o){i.e(o)}finally{i.f()}}}catch(o){r.e(o)}finally{r.f()}return n/a}(t))," minutes")):c.a.createElement(r.Fragment,null),c.a.createElement("p",null,function(e){return e.seasons.filter((function(e){return e.episodes.length>0})).length}(t)," seasons"),c.a.createElement("p",null,vt(t)," episodes")),c.a.createElement("img",{src:"/rewer/uploads/seriesposters/".concat(t.id,".jpg"),className:"poster",title:t.title,alt:"".concat(t.title,"-poster")}))):c.a.createElement(r.Fragment,null))};function Rn(){var e=Object(r.useState)({id:parseInt(Lt("seriesId")),title:"",genres:[],seasons:[],summary:"",avgScore:0}),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)([]),i=Object(d.a)(s,2),u=i[0],m=i[1],p=Object(r.useState)({id:0,seriesId:parseInt(Lt("seriesId")),episodes:[]}),f=Object(d.a)(p,2),b=f[0],v=f[1],E=Object(r.useState)({id:0,title:"",releaseDate:"",summary:"",genres:[],casts:[]}),h=Object(d.a)(E,2),w=h[0],g=h[1];function O(){return(O=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(a.id);case 2:(t=e.sent)&&(n(t),m(ht(t)),t.seasons.length>0&&v(t.seasons[0]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,a.id>0&&function(){O.apply(this,arguments)}()}),[]),c.a.createElement(r.Fragment,null,window.innerWidth>800?c.a.createElement("div",{className:"main-grid"},c.a.createElement("div",{className:"left-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Pn,{selectedSeason:b,seasons:a.seasons,setSelectedSeason:v}),c.a.createElement(_n,{episodes:b.episodes,onSelectedChange:function(e){g(e)}})),w.casts.length>0?c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement("h3",{className:"center-text"},"Cast"),c.a.createElement(qa,{casts:w.casts.filter((function(e){return 4===e.castTypeId||5===e.castTypeId}))})):c.a.createElement(r.Fragment,null)),c.a.createElement("div",{className:"main-item"},c.a.createElement("div",{className:"bottom-border"},c.a.createElement(Mn,{series:a})),w.id>0?c.a.createElement(r.Fragment,null,c.a.createElement($a,{movie:w}),c.a.createElement(nn,{movie:w}),c.a.createElement(Za,{movie:w})):c.a.createElement("p",null,c.a.createElement("i",null,"No episode is selected."))),c.a.createElement("div",{className:"right-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement("h3",{className:"center-text"},"Cast"),u.filter((function(e){return e.castTypeId>3})).map((function(e){return c.a.createElement(Fn,{key:"".concat(e.artistId,"-").concat(e.castTypeId),cast:e})}))),c.a.createElement("div",{className:"side-container large-side"},c.a.createElement(mn,null)))):c.a.createElement("div",{className:"main-container"},c.a.createElement(Mn,{series:a}),c.a.createElement("h3",null,"Cast"),u.filter((function(e){return e.castTypeId>3})).map((function(e){return c.a.createElement(Fn,{key:"".concat(e.artistId,"-").concat(e.castTypeId),cast:e})})),c.a.createElement(Pn,{selectedSeason:b,seasons:a.seasons,setSelectedSeason:v}),b.episodes.map((function(e){return c.a.createElement(j,{key:"episode-".concat(e.id),movie:e})}))))}function Ln(e,t){return Un.apply(this,arguments)}function Un(){return(Un=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/search",{keyword:t,limit:a});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var An=function(e){var t=e.artist,a=Object(r.useState)("/rewer/uploads/portraits/".concat(t.id,".jpg")),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)(""),o=Object(d.a)(u,2),l=o[0],p=o[1];return Object(r.useEffect)((function(){t.bio.length>80?p("".concat(t.bio.substring(0,150),"...")):p(t.bio)}),[t]),c.a.createElement(m.b,{className:"standard-artist-grid highlight",to:"/star?artistId=".concat(t.id)},c.a.createElement("img",{src:s,className:"portrait",alt:"poster-".concat(t.id),title:t.name,onError:function(){i("/rewer/uploads/portraits/0.jpg")}}),c.a.createElement("div",null,c.a.createElement("p",{className:"name"},t.name),c.a.createElement("p",null,h(t.birthDate.toString())),c.a.createElement("p",null,l)))},Yn=function(e){var t=e.artists;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(An,{key:"artist-row-".concat(e.id),artist:e})})))},Hn=function(e){var t=e.user,a=Object(r.useState)("/rewer/uploads/avatars/".concat(t.userName,".jpg")),n=Object(d.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)(""),o=Object(d.a)(u,2),l=o[0],p=o[1];return Object(r.useEffect)((function(){t.about.length>100?p("".concat(t.about.substring(0,100),"...")):p(t.about)}),[t]),c.a.createElement(m.b,{className:"user-row highlight",to:"/user?userName=".concat(t.userName)},c.a.createElement("img",{src:s,onError:function(){i("/rewer/uploads/avatars/default.jpg")},alt:"user-".concat(t.nickName)}),c.a.createElement("div",null,c.a.createElement("p",{className:"name"},t.nickName),c.a.createElement("p",null,l)))},Vn=function(e){var t=e.users;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(Hn,{key:"user-row-".concat(e.userName),user:e})})))},Bn=function(e){var t=e.series;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(Ge,{key:"series-row-".concat(e.id),series:e})})))};function Gn(){var e=Object(r.useState)({movies:[],series:[],artists:[],users:[]}),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(Lt("keyword")),i=Object(d.a)(s,2),u=i[0],m=i[1],p=Object(r.useRef)();function f(){return(f=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ln(u,40);case 2:(t=e.sent)&&n(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(p.current.value);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){f.apply(this,arguments)}(),Ut({name:"keyword",value:u})}),[u]),Object(r.useEffect)((function(){p.current.value=u}),[]),c.a.createElement("div",null,c.a.createElement("input",{ref:p,onKeyDown:function(e){Ee(e,b)}}),c.a.createElement("button",{onClick:function(){b()}},"Search"),c.a.createElement(O,{movies:a.movies}),c.a.createElement(Bn,{series:a.series}),c.a.createElement(Yn,{artists:a.artists}),c.a.createElement(Vn,{users:a.users}))}function Jn(){return c.a.createElement(r.Fragment,null,window.screen.width>1e3?c.a.createElement("div",{className:"main-grid"},c.a.createElement("div",{className:"left-item"},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(mn,null))),c.a.createElement("div",{className:"main-item"},c.a.createElement(Gn,null)),c.a.createElement("div",{className:"right-item "},c.a.createElement("div",{className:"side-container medium-side"},c.a.createElement(Ka,null)))):c.a.createElement("div",{className:"main-container"},c.a.createElement(Gn,null)))}var Wn=function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la();case 2:if(!e.sent){e.next=6;break}console.log("user is logged in"),e.next=7;break;case 6:console.log("user is not logged in");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){e.apply(this,arguments)}()}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,null,c.a.createElement(Ha.a,null,c.a.createElement("title",null,"Rewer"),c.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})),c.a.createElement(Ba,null),c.a.createElement("div",{className:"page"},c.a.createElement(p.d,null,c.a.createElement(p.a,{from:"/link_movie:movieId",to:"/movie"}),c.a.createElement(p.b,{exact:!0,path:"/rewer",component:Tt}),c.a.createElement(p.b,{exact:!0,path:"/movie",render:function(e){return c.a.createElement(rn,Object.assign({},e,{key:(new Date).getTime()}))}}),c.a.createElement(p.b,{exact:!0,path:"/series",render:function(e){return c.a.createElement(Rn,Object.assign({},e,{key:(new Date).getTime()}))}}),c.a.createElement(p.b,{exact:!0,path:"/profile",component:Ya}),c.a.createElement(p.b,{exact:!0,path:"/user",component:wn}),c.a.createElement(p.b,{exact:!0,path:"/editartist",component:Ja}),c.a.createElement(p.b,{exact:!0,path:"/star",component:pn}),c.a.createElement(p.b,{exact:!0,path:"/editmovie",component:aa}),c.a.createElement(p.b,{exact:!0,path:"/editseries",component:Dn}),c.a.createElement(p.b,{exact:!0,path:"/follows",component:gn}),c.a.createElement(p.b,{exact:!0,path:"/search",component:Jn}),c.a.createElement(p.b,{exact:!0,path:"/home",component:Tt})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(m.a,null,c.a.createElement(c.a.StrictMode,null,c.a.createElement(Wn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.59cd69fb.chunk.js.map