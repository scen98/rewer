{"version":3,"sources":["components/artist/EditDetails.tsx","pages/EditArtist.tsx","hooks.tsx","dateParser.ts","utils.ts","../../../../../webpack/universalModuleDefinition","../../../../../index.js","../webpack:/webpack/bootstrap 5c04cbde4fb824613eb6","../../../../../src/Compress.js","../../../../../src/core/base64.js","../../../../../src/core/converter.js","../../../../../src/core/file.js","../../../../../src/core/image.js","../../../../../src/core/photo.js","../../../../../src/core/rotate.js","callers/artistCaller.ts"],"names":["EditDetails","artist","bindArtist","setArtist","imageInput","useRef","useImage","id","portraitSource","onError","setPortraitSource","uploadCaller","artistPath","uploadPortrait","undefined","uploader","signal","messenger","useContext","MessageContext","a","formData","FormData","current","files","addWarning","resizeImageFn","resizedFile","append","Date","getTime","addSuccess","useEffect","abort","clear","value","name","onChange","type","placeholder","className","birthPlace","parseForInput","birthDate","deathPlace","title","deathDate","toString","bio","rows","src","alt","ref","accept","onClick","EditArtist","useBinder","parseInt","getParameter","postCaller","selectDetailedArtist","artistCaller","artistSignal","selectedArtist","insertArtist","ECallType","INSERT","newId","changeParam","addFail","updateArtist","ISOK","getArtist","document","ESize","useAsyncReference","useState","forceRender","newState","Object","is","s","get","set","event","target","useAsyncBinder","updateState","useCutter","defaultText","defaultCutPos","getCutText","firstText","firstCut","isCut","setIsCut","outputText","setOutputText","cut","text","cutPos","newText","didCut","toCut","length","substring","onEnter","callback","key","useScroll","pos","newPos","position","listener","window","innerHeight","scrollY","body","offsetHeight","addEventListener","removeEventListener","path","fileName","size","Normal","tryAgain","imgSrc","setImgSrc","tryAgainRef","imgSrcSetter","newPath","newFileName","parseDateYYYYMMDD","date","getFullYear","monthNames","getMonth","getDate","getYear","getDay","normalFormat","d","month","day","replacedList","array","oldItem","newItem","map","item","file","maxWidth","maxHeight","quality","Compress","require","compress","resize","resizedImage","img","base64str","data","imgExt","ext","resizedFiile","convertBase64ToFile","module","modules","exports","loaded","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","_base","_converter","_file","_image","_photo","_rotate","_interopRequireDefault","obj","__esModule","default","_base2","_converter2","_file2","_image2","_photo2","_rotate2","_createClass","defineProperties","props","i","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","prototype","instance","TypeError","_classCallCheck","this","el","options","Promise","resolve","reject","input","querySelector","setAttribute","evt","output","_this","arr","Array","isArray","arr2","from","compressFile","photo","start","performance","now","startSize","orientation","then","load","startWidth","naturalWidth","startHeight","naturalHeight","width","height","endWidth","endHeight","imageToCanvas","canvas","iterations","base64prefix","prefix","loopCompression","targetSize","targetQuality","canvasToBase64","newSize","minQuality","base64","finalSize","end","difference","elapsedTimeInSeconds","initialSizeInMb","MB","endSizeInMb","endWidthInPx","endHeightInPx","initialWidthInPx","initialHeightInPx","sizeReducedInPercent","compressImage","all","mime","base64ToFile","apply","len","replace","split","match","arguments","byteString","atob","content","charCodeAt","Blob","Uint8Array","createElement","context","getContext","image","drawImage","translate","scale","rotate","Math","PI","toDataURL","KB","fileReader","FileReader","result","err","readAsDataURL","Image","targetWidth","targetHeight","originalAspectRatio","outputWidth","outputHeight","min","endSize","reader","onload","view","DataView","getUint16","byteLength","offset","marker","getUint32","little","tags","readAsArrayBuffer","slice","selectArtistsByKeyword"],"mappings":"2PA6EeA,G,MA5DoC,SAAC,GAAmD,IAAlDC,EAAiD,EAAjDA,OAAmBC,GAA8B,EAAzCC,UAAyC,EAA9BD,YAC9DE,EAAaC,mBAD+E,EAE7CC,YAAS,2BAAD,UAAgCL,EAAOM,GAAvC,SAFqC,mBAE3FC,EAF2F,KAE3EC,EAF2E,KAElEC,EAFkE,OAGvEC,uBAAaC,IAAWC,oBAAgBC,GAH+B,mBAG3FC,EAH2F,KAGjFC,EAHiF,KAI1FC,EAAcC,qBAAWC,KAAzBF,UAJ0F,4CAalG,8BAAAG,EAAA,yDACUC,EAAW,IAAIC,SACjBlB,EAAWmB,QAAQC,MAAM,GAFjC,uBAGQP,EAAUQ,WAAW,uBAH7B,0CAM8BC,YAActB,EAAWmB,QAAQC,MAAM,GAAI,IAAK,IAAK,IANnF,cAMUG,EANV,OAOIN,EAASO,OAAO,WAAYD,EAA5B,UAA4C1B,EAAOM,GAAnD,SAPJ,UAQaQ,EAASH,IAAWC,eAAgBQ,GARjD,oCASQX,EAAkB,2BAAD,UAAgCT,EAAOM,GAAvC,iBAAiD,IAAIsB,MAAOC,YAC7Eb,EAAUc,WAAW,oBAAqB,KAVlD,wBAYQd,EAAUQ,WAAW,wBAZ7B,6CAbkG,sBA4BlG,OAtBAO,qBAAU,WACN,OAAO,WACHhB,EAAOiB,QACPhB,EAAUiB,WAEf,IAkBC,6BACI,2BAAOC,MAAOlC,EAAOmC,KAAMC,SAAUnC,EAAYoC,KAAK,OAAOF,KAAK,OAAOG,YAAY,OAAOC,UAAU,eACtG,yBAAKA,UAAU,eACX,yBAAKA,UAAU,2BACX,sCACA,2BAAOL,MAAOlC,EAAOwC,WAAYH,KAAK,OAAOD,SAAUnC,EAAYkC,KAAK,aAAaI,UAAU,cAAcD,YAAY,eACzH,2BAAOJ,MAAOO,YAAc,IAAIb,KAAK5B,EAAO0C,YAAaL,KAAK,OAAOD,SAAUnC,EAAYkC,KAAK,cAAc,6BAC9G,sCACA,2BAAOD,MAAOlC,EAAO2C,WAAYN,KAAK,OAAOD,SAAUnC,EAAYkC,KAAK,aAAaI,UAAU,cAAcD,YAAY,4BAA4BM,MAAM,8BAC3J,2BAAOV,MAAOO,YAAc,IAAIb,KAAK5B,EAAO6C,YAAYC,WAAYT,KAAK,OAAOD,SAAUnC,EAAYkC,KAAK,cAC3G,8BAAUD,MAAOlC,EAAO+C,IAAKX,SAAUnC,EAAYkC,KAAK,MAAMG,YAAY,YAAYU,KAAM,MAEhG,yBAAKT,UAAU,0BACX,yBAAKA,UAAU,WAAWU,IAAK1C,EAAgBC,QAASA,EAAS0C,IAAI,aAAa,6BAChFlD,EAAOM,GAAK,EACb,kBAAC,WAAD,KACG,2BAAO6C,IAAKhD,EAAYkC,KAAK,OAAOe,OAAO,YAAYb,UAAU,eACjE,8GACA,4BAAQc,QA/CsE,4CA+C9E,WAEH,kBAAC,WAAD,KACG,uF,QCzDT,SAASC,IAAc,IAAD,EACOC,YAAmB,CAACjD,GAAIkD,SAASC,YAAa,aAActB,KAAM,GAAIK,WAAY,GAAIE,UAAW,GAAIC,WAAY,GAAIE,UAAW,GAAIE,IAAK,KADhJ,mBAC1B/C,EAD0B,KAClBE,EADkB,KACPD,EADO,OAEIyD,qBAAW,CAAEpD,GAAIN,EAAOM,IAAMK,IAAWgD,sBAF7C,mBAE1BC,EAF0B,KAEZC,EAFY,KAGzB7C,EAAcC,qBAAWC,KAAzBF,UAHyB,4CAmBjC,4BAAAG,EAAA,sEACiCyC,IADjC,QACUE,EADV,SAGQ5D,EAAU4D,GAHlB,4CAnBiC,kEA0BjC,4BAAA3C,EAAA,sEACwByC,EAAa5D,EAAQW,IAAWoD,aAAcC,YAAUC,QADhF,QACUC,EADV,SAGQlD,EAAUc,WAAW,sCAAuC,KAC5DqC,YAAY,CAAChC,KAAM,WAAYD,MAAOgC,EAAMpB,aAC5C5C,EAAU,2BAAIF,GAAL,IAAaM,GAAI4D,MAE1BlD,EAAUoD,QAAQ,kEAP1B,4CA1BiC,kEAqCjC,sBAAAjD,EAAA,sEACayC,EAAa5D,EAAQW,IAAW0D,aAAcL,YAAUM,MADrE,kCAEQtD,EAAUc,WAAV,iBAAuC,KAF/C,sBAIQd,EAAUoD,QAAQ,0DAJ1B,4CArCiC,sBA6CjC,OAzCArC,qBAAU,WAKN,OAJG/B,EAAOM,GAAK,GALc,mCAMzBiE,GAGG,WACHV,EAAa7B,QACbhB,EAAUiB,WAEf,IAEHF,qBAAU,WACH/B,IAAQwE,SAAS5B,MAAT,iBAA2B5C,EAAOmC,KAAlC,eACZ,CAACnC,IA6BA,yBAAKuC,UAAU,kBACX,6BACEvC,EAAOM,GAAK,EACb,4BAAQ+C,QAjDgB,4CAiDxB,gBACA,4BAAQA,QAlDgB,4CAkDxB,wBACD,kBAAC,EAAD,CAAarD,OAAQA,EAAQE,UAAWA,EAAWD,WAAYA,O,oTCwB/DwE,E,+BApFL,SAASC,EAAqBxC,GACjC,IAAMiB,EAAM/C,iBAAO8B,GADwB,EAEnByC,oBAAS,GAAxBC,EAFkC,oBAS3C,MAAO,CAACzB,EANY,SAAC0B,GACZC,OAAOC,GAAG5B,EAAI7B,QAASuD,KACxB1B,EAAI7B,QAAUuD,EACdD,GAAY,SAAAI,GAAC,OAAKA,QAMvB,SAASzB,EAAarB,GAAU,IAAD,EACfyC,mBAAYzC,GADG,mBAC3B+C,EAD2B,KACtBC,EADsB,KAKlC,MAAO,CAACD,EAAKC,EAHA,SAACC,GACVD,EAAI,2BAAID,GAAL,kBAAWE,EAAMC,OAAOjD,KAAOgD,EAAMC,OAAOlD,WAKhD,SAASmD,EAAkBnD,GAC9B,IAAMiB,EAAM/C,iBAAO8B,GADoB,EAEfyC,oBAAS,GAAxBC,EAF8B,oBAGjCU,EAAc,SAACT,GACZC,OAAOC,GAAG5B,EAAI7B,QAASuD,KACxB1B,EAAI7B,QAAUuD,EACdD,GAAY,SAAAI,GAAC,OAAKA,OAM1B,MAAO,CAAC7B,EAAKmC,EAHA,SAACH,GACVG,EAAY,2BAAInC,EAAI7B,SAAT,kBAAmB6D,EAAMC,OAAOjD,KAAOgD,EAAMC,OAAOlD,WAKhE,SAASqD,EAAUC,GAA4G,IAAvFC,EAAsF,uDAAtE,EAAsE,EACnGC,EAAWF,EAAaC,EAAgB,EAAGA,GADwD,mBAC1HE,EAD0H,KAC/GC,EAD+G,OAEvGjB,mBAASiB,GAF8F,mBAE1HC,EAF0H,KAEnHC,EAFmH,OAG7FnB,mBAASgB,GAHoF,mBAG1HI,EAH0H,KAG9GC,EAH8G,KAK3HC,EAAM,SAACC,GAA8B,IAAhBC,EAAe,uDAAN,EAAM,EACZT,EAAWQ,EAAMC,EAAS,EAAGA,GADjB,mBAC/BC,EAD+B,KACtBC,EADsB,KAEtCL,EAAcI,GACdN,EAASO,IAGb,MAAO,CAACN,EAAYF,EAAOI,GAG/B,SAASP,EAAWQ,EAAcI,EAAgBH,GAC9C,OAAGG,GAASJ,EAAKK,OAASJ,EACf,CAACD,EAAKM,UAAU,EAAGL,GAAU,OAAO,GAExC,CAACD,GAAM,GAOX,SAASO,EAAQtB,EAAOuB,GACT,UAAdvB,EAAMwB,KACND,IAID,SAASE,EAAUC,EAAaH,GACnC,IAAII,EAASD,GACVA,EAAM,GAAKA,EAAM,KAAGC,EAAS,IAChC,IAAMC,EAAW3G,iBAAO0G,GAClBE,EAAW,WACTC,OAAOC,YAAcD,OAAOE,SAAa3C,SAAS4C,KAAKC,aAAaN,EAASzF,SAC7EoF,KASR,MAAO,CANa,WAChBO,OAAOK,iBAAiB,SAAUN,IAEf,WACnBC,OAAOM,oBAAoB,SAAUP,KAWtC,SAAS3G,EAASmH,EAAcC,GAAyD,IAAvCC,EAAsC,uDAA/BjD,EAAMkD,OAAQC,EAAiB,0DAC/DjD,mBAAQ,UAAY6C,EAAZ,YAAoBE,GAApB,OAA2BD,IAD4B,mBACpFI,EADoF,KAC5EC,EAD4E,KAErFC,EAAc3H,iBAAOwH,GACrBpH,EAAS,WACRuH,EAAYzG,SACXwG,EAAU,GAAD,OAAIN,EAAJ,YAAY/C,EAAMkD,QAAlB,OAA2BF,IACpCM,EAAYzG,SAAU,GAEtBwG,EAAU,GAAD,OAAIN,EAAJ,YAAYE,EAAZ,WAGXM,EAAe,SAACC,EAAiBC,GACnCJ,EAAU,GAAD,OAAIG,EAAJ,YAAeP,GAAf,OAAsBQ,KAEnC,MAAO,CAACL,EAAQrH,EAASwH,I,SApBjBvD,K,UAAAA,E,iBAAAA,E,gBAAAA,M,sCCjFL,SAAS0D,EAAkBC,GAC9B,MAAM,GAAN,OAAUA,EAAKC,cAAf,aAAiCC,EAAWF,EAAKG,YAAjD,YAAgEH,EAAKI,WAWlE,SAASC,EAAQL,GACpB,OAAO,IAAIxG,KAAKwG,GAAMC,cAGnB,SAASE,EAASH,GACrB,OAAOE,EAAW,IAAI1G,KAAKwG,GAAMG,YAG9B,SAASG,EAAON,GACnB,OAAO,IAAIxG,KAAKwG,GAAMI,UAGnB,SAASG,EAAaP,GACzB,IAAIQ,EAAI,IAAIhH,KAAKwG,GACjB,MAAM,GAAN,OAAUQ,EAAEJ,UAAZ,YAAyBF,EAAWM,EAAEL,YAAtC,YAAqDK,EAAEP,eAGpD,SAAS5F,EAAc2F,GAC1B,IAAIS,EACAC,EAYJ,OAVID,EADDT,EAAKG,WAAa,EACZ,WAAOH,EAAKG,WAAW,IAEnBH,EAAKG,WAAW,GAAGzF,WAG5BgG,EADDV,EAAKI,UAAY,GACb,WAAOJ,EAAKI,WAETJ,EAAKI,UAAU1F,WAGnB,GAAN,OAAUsF,EAAKC,cAAf,YAAgCQ,EAAhC,YAAyCC,GA/C7C,4MAkDO,IAAIR,EAAa,CAAC,SAAU,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,a,+HC9CzHS,EAAe,SAACC,EAAOC,EAASC,GAC3C,OAAOF,EAAMG,KAAI,SAAAC,GAAI,OAAGA,IAASH,EAASC,EAAUE,MAG/C,SAAe3H,EAAtB,sC,4CAAO,WAA6B4H,EAAMC,EAAkBC,GAArD,yCAAApI,EAAA,6DAAwEqI,EAAxE,+BAAkF,EACjFC,EAAWC,EAAQ,IACnBC,EAAW,IAAIF,EAFhB,SAGsBE,EAASA,SAAS,CAACN,GAAO,CACnD3B,KAAM,EACN8B,QAASA,EACTF,SAAUA,EACVC,UAAWA,EACXK,QAAQ,IARL,cAGCC,EAHD,OAUCC,EAAMD,EAAa,GACnBE,EAAYD,EAAIE,KAChBC,EAASH,EAAII,IACbC,EAAeV,EAASW,oBAAoBL,EAAWE,GAbxD,kBAcEE,GAdF,6C,2CCNPE,UCQgB,SAAUC,GCN1B,cAGA,QACA,oBAGA,YACAC,WACAjK,KACAkK,WAIAF,0CAGAD,YAGA,UAvBA,SA4BAI,aAGAA,MAGAA,OAGA,KD5BgB,CC4BhB,CDgBM,SAAUJ,EAAQE,EAASE,GAEhC,IAAIC,EAAgCC,EAA8BC,EAE5DD,GAAgCN,EAAQI,EAAoB,GAAIA,EAAoB,GAAIA,EAAoB,GAAIA,EAAoB,GAAIA,EAAoB,GAAIA,EAAoB,IAAKC,EAUtL,SAAUL,EAAQQ,EAAOC,EAAYC,EAAOC,EAAQC,EAAQC,GACnE,aAcA,SAASC,EAAuBC,GAC9B,OAAOA,GAAOA,EAAIC,WAAaD,GAC7BE,QAASF,GAdb,IAAIG,EAASJ,EAAuBN,GAEhCW,EAAcL,EAAuBL,GAErCW,EAASN,EAAuBJ,GAEhCW,EAAUP,EAAuBH,GAEjCW,EAAUR,EAAuBF,GAEjCW,EAAWT,EAAuBD,GA0BlCW,EAAe,WACjB,SAASC,EAAiB1G,EAAQ2G,GAChC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAMxF,OAAQyF,IAAK,CACrC,IAAIC,EAAaF,EAAMC,GACvBC,EAAWC,WAAaD,EAAWC,eACnCD,EAAWE,gBACP,UAAWF,IAAYA,EAAWG,aACtCtH,OAAOuH,eAAejH,EAAQ6G,EAAWtF,IAAKsF,IAIlD,OAAO,SAAUK,EAAaC,EAAYC,GACpCD,UAAYT,EAAiBQ,EAAYG,UAAWF,GACpDC,GAAaV,EAAiBQ,EAAaE,GACxCF,GAdQ,GEpGhB7C,EFsHY,WACb,SAASA,KAzBX,SAAyBiD,EAAUJ,GACjC,KAAMI,aAAoBJ,GACxB,MAAM,IAAIK,UAAU,qCAwBpBC,CAAgBC,KAAMpD,GAGxBoC,SAAapC,IACX9C,IAAK,SACLzE,MAAO,SE5HJ4K,EAAIC,GAAS,WACnB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAQ3I,SAAS4I,cAAcN,GACrCK,EAAME,aAAa,SAAU,WAC7BF,EAAM7F,iBAAiB,UAAU,SAACgG,GAChC,IAAMC,EAASC,EAAK7D,YAAL6D,OF4EpB,SAA4BC,GAC1B,GAAIC,MAAMC,QAAQF,GAAM,CACtB,IAAK,IAAIzB,EAAI,EAAG4B,EAAOF,MAAMD,EAAIlH,QAASyF,EAAIyB,EAAIlH,OAAQyF,IACxD4B,EAAK5B,GAAKyB,EAAIzB,GAGhB,OAAO4B,EAEP,OAAOF,MAAMG,KAAKJ,GEpFFD,CAAkBF,EAAIlI,OAAO7D,QAAQwL,GACpDE,EAAQM,cACP,CFkIF5G,IAAK,WACLzE,MAAO,SE/HFX,EAAOwL,GACf,SAASe,EAAczE,EAAM0D,GAE3B,IAAMgB,EAAQ,IAAI,EAAJ,QAAUhB,GACxBgB,SAAMC,MAAQ/G,OAAOgH,YAAYC,MACjCH,EAAM7K,IAAMmG,EAAKlH,KACjB4L,EAAM7D,IAAMb,EAAKhH,KACjB0L,EAAMI,UAAY9E,EAAK3B,KAEhBkE,UAAOwC,YAAY/E,GACzBgF,MAAK,SAACD,GACLL,SAAMK,YAAcA,EACb3C,UAAK6C,KAAKjF,MAElBgF,KAEH,SAAwBN,GACtB,OAAO,SAAC9K,GACN,OAAOyI,UAAM4C,KAAKrL,GAAKoL,MAAK,SAACvE,GAK3B,GAHAiE,EAAMQ,WAAazE,EAAI0E,aACvBT,EAAMU,YAAc3E,EAAI4E,cAEpBX,EAAMnE,OAAQ,OACU8B,UAAM9B,OAAOmE,EAAMzE,SAAUyE,EAAMxE,UAAnCmC,CAA8C5B,EAAI0E,aAAc1E,EAAI4E,eAAtFC,EADQ,EACRA,MAAOC,EADC,EACDA,OACfb,EAAMc,SAAWF,EACjBZ,EAAMe,UAAYF,OAElBb,EAAMc,SAAW/E,EAAI0E,aACrBT,EAAMe,UAAYhF,EAAI4E,cAExB,OAAOlD,UAAUuD,cAAchB,EAAMc,SAAUd,EAAMe,UAAWf,EAAMK,YAA/D5C,CAA4E1B,MAEpFuE,MAAK,SAACW,GACLjB,SAAMkB,WAAa,EAEnBlB,EAAMmB,aAAe3D,UAAO4D,OAAOpB,EAAM7D,KA8B/C,SAASkF,EAAiBJ,EAAQtH,GAAM8B,MAAwD,uDAA9C,EAAG6F,EAA2C,aAA/BC,EAA+B,uDAAf,EAAGL,EAAY,aACxFlF,EAAYyB,UAAU+D,eAAeP,EAAQxF,GAC7CgG,EAAUjE,UAAO7D,KAAKqC,GAG5BkF,UAAc,EAEVO,EAAUH,GAIV7F,EAAU8F,EAHLF,EAAgBJ,EAAQQ,EAAShG,EAAU,GAAK6F,EAAYC,EAAeL,GAQ3ElF,EA7CEqF,CAAgBJ,EAAQjB,EAAMI,UAAWJ,EAAMvE,QAASuE,EAAMrG,KAAMqG,EAAM0B,WAAY1B,EAAMkB,eAEpGZ,MAAK,SAACqB,GACL3B,SAAM4B,UAAYpE,UAAO7D,KAAKgI,GACvBnE,UAAOvB,KAAK0F,MAEpBrB,MAAK,SAACrE,GACL+D,EAAM6B,IAAM3I,OAAOgH,YAAYC,MAC/B,IAAM2B,EAAa9B,EAAM6B,IAAM7B,EAAMC,MAErC,OACEhE,KAAMA,EACNmF,OAAQpB,EAAMmB,aACdY,qBAAsBD,EAAa,IACnC3M,IAAK6K,EAAM7K,IACX6M,gBAAiBvE,UAAU9D,KAAKqG,EAAMI,WAAW6B,GACjDC,YAAazE,UAAU9D,KAAKqG,EAAM4B,WAAWK,GAC7C9F,IAAK6D,EAAM7D,IACXV,QAASuE,EAAMvE,QACf0G,aAAcnC,EAAMc,SACpBsB,cAAepC,EAAMe,UACrBsB,iBAAkBrC,EAAMQ,WACxB8B,kBAAmBtC,EAAMU,YACzB6B,sBAAuBvC,EAAMI,UAAYJ,EAAM4B,WAAa5B,EAAMI,UAAY,IAC9Ec,WAAYlB,EAAMkB,gBA/ClBsB,CAAcxC,IAwEtB,OAAOf,QAAQwD,IAAIjP,EAAM4H,KAAI,SAACE,GAC5B,OAAOyE,EAAazE,EAAM0D,YFmIzBpG,IAAK,sBACLzE,MAAO,SEjIgBwN,EAAQe,GAClC,OAAOjF,UAAUkF,aAAahB,EAAQe,OFqI9BhH,EAtHM,GERlBY,EAAOE,QAAUd,QF3Dsc5I,KAA3O+J,EAA2E,mBAAnCF,EAAiDA,EAA+BiG,MAAMpG,EAASI,GAAiCD,KAAiFL,EAAOE,QAAUK,IAiMhf,SAAUP,EAAQE,EAASE,GAEhC,IAAIC,EAAgCC,EAA8BC,EAE5DD,GAAgCJ,QAAiS1J,KAA3O+J,EAA2E,mBAAvHF,EAUvC,SAAUH,GACjB,aAEAzF,OAAOuH,eAAe9B,EAAS,cAC7BrI,WAmBFqI,EAAQe,SG5QM5D,KApBJ,SAACgI,GACZ,IAAMkB,EAAMlB,EAAOmB,QAAQ,2BAA4B,IAAItK,OAC3D,OAAQqK,EAAM,KAAO,MAkBAH,KAZV,SAACf,GACZ,OAAOA,EAAOoB,MAAM,KAAK,GAAGC,MAAM,gBAAgB,IAWvB/G,KARhB,SAAC0F,GACZ,OAAOA,EAAOmB,QAAQ,2BAA4B,KAOjB1B,OAJpB,SAACjF,GACd,cAAeA,EAAf,eH8OoLQ,EAA+BiG,MAAMpG,EAASI,GAAiCD,KAAiFL,EAAOE,QAAUK,IAsCjW,SAAUP,EAAQE,EAASE,GAEhC,IAAIC,EAAgCC,EAA8BC,EAE5DD,GAAgCJ,QAAiS1J,KAA3O+J,EAA2E,mBAAvHF,EAUvC,SAAUH,GACjB,aAEAzF,OAAOuH,eAAe9B,EAAS,cAC7BrI,WAqFFqI,EAAQe,SI3SMoF,aAhGI,SAAChB,GAGpB,IAH4Be,MAAwBO,uDAAjB,aAC7BC,EAAahK,OAAOiK,KAAKxB,GACzByB,KACGnF,EAAI,EAAGA,EAAIiF,EAAW1K,OAAQyF,IACrCmF,EAAQnF,GAAKiF,EAAWG,WAAWpF,GAErC,OAAO,IAAI/E,OAAOoK,MAAM,IAAIC,WAAWH,KAAY9O,KAAMoO,KA0F5B1B,cAvFT,SAACJ,EAAOC,EAAQR,GACpC,IAAMY,EAASxK,SAAS+M,cAAc,UAChCC,EAAUxC,EAAOyC,WAAW,MAElCzC,SAAOL,MAAQA,EACfK,EAAOJ,OAASA,EAIT,SAAC8C,GACN,IAAKtD,GAAeA,EAAc,EAChCoD,SAAQG,UAAUD,EAAO,EAAG,EAAG1C,EAAOL,MAAOK,EAAOJ,QAC7CI,EAQT,OANIZ,EAAc,IAChBY,EAAOL,MAAQC,EACfI,EAAOJ,OAASD,GAIVP,GACN,KAAK,EAEHoD,EAAQI,UAAUjD,EAAO,GACzB6C,EAAQK,OAAM,EAAI,GAClB,MACF,KAAK,EAEHL,EAAQI,UAAUjD,EAAOC,GACzB4C,EAAQM,OAAOC,KAAKC,IACpB,MACF,KAAK,EAEHR,EAAQI,UAAU,EAAGhD,GACrB4C,EAAQK,MAAM,GAAG,GACjB,MACF,KAAK,EAEHL,EAAQM,OAAO,GAAMC,KAAKC,IAC1BR,EAAQK,MAAM,GAAG,GACjB,MACF,KAAK,EAEHL,EAAQM,OAAO,GAAMC,KAAKC,IAC1BR,EAAQI,UAAU,GAAIhD,GACtB,MACF,KAAK,EAEH4C,EAAQM,OAAO,GAAMC,KAAKC,IAC1BR,EAAQI,UAAUjD,GAAQC,GAC1B4C,EAAQK,OAAM,EAAI,GAClB,MACF,KAAK,EAEHL,EAAQM,QAAO,GAAOC,KAAKC,IAC3BR,EAAQI,WAAWjD,EAAO,GAG1BP,SAAc,EAChBoD,EAAQG,UAAUD,EAAO,EAAG,EAAG1C,EAAOJ,OAAQI,EAAOL,OAErD6C,EAAQG,UAAUD,EAAO,EAAG,EAAG1C,EAAOL,MAAOK,EAAOJ,QAE/CI,IAwBmCO,eApBvB,SAACP,GAAQxF,MAAmB,uDAAT,IAElCkG,EAASV,EAAOiD,UAAU,aAAczI,GAC9C,OAAOkG,GAiBqDhI,KAPjD,SAACA,GACZ,OACEwK,GAAIxK,EAAO,IACXsI,GAAItI,WJ4M8KgD,EAA+BiG,MAAMpG,EAASI,GAAiCD,KAAiFL,EAAOE,QAAUK,IAwGjW,SAAUP,EAAQE,EAASE,GAEhC,IAAIC,EAAgCC,EAA8BC,EAE5DD,GAAgCJ,QAAiS1J,KAA3O+J,EAA2E,mBAAvHF,EAUvC,SAAUH,GACjB,aAEAzF,OAAOuH,eAAe9B,EAAS,cAC7BrI,WAkBFqI,EAAQe,SKraMgD,KAfJ,SAACjF,GACZ,OAAO,IAAI2D,SAAQ,SAACC,EAASC,GAC3B,IAAMiF,EAAa,IAAIlL,OAAOmL,WAC9BD,EAAW7K,iBAAiB,QAAQ,SAACgG,GACnCL,EAAQK,EAAIlI,OAAOiN,cAGrBF,EAAW7K,iBAAiB,SAAS,SAACgL,GACpCpF,EAAOoF,SAGTH,EAAWI,cAAclJ,ULyYyJqB,EAA+BiG,MAAMpG,EAASI,GAAiCD,KAAiFL,EAAOE,QAAUK,IAqCjW,SAAUP,EAAQE,EAASE,GAEhC,IAAIC,EAAgCC,EAA8BC,EAE5DD,GAAgCJ,QAAiS1J,KAA3O+J,EAA2E,mBAAvHF,EAUvC,SAAUH,GACjB,aAEAzF,OAAOuH,eAAe9B,EAAS,cAC7BrI,WAwCFqI,EAAQe,SM5cMgD,KAvCJ,SAACrL,GACZ,OAAO,IAAI+J,SAAQ,SAACC,EAASC,GAC3B,IAAMpD,EAAM,IAAI7C,OAAOuL,MACvB1I,EAAIxC,iBAAiB,QAAQ,WAC3B2F,EAAQnD,SAGVA,EAAIxC,iBAAiB,SAAS,SAACgL,GAC7BpF,EAAOoF,SAGTxI,EAAI7G,IAAMA,MA4BS2G,OArBR,SAAC6I,EAAaC,GAC3B,OAAO,SAAC/D,EAAOC,GACb,IAAK6D,IAAgBC,EAAc,MAAO,CAAE/D,QAAOC,UAEnD,IAAM+D,EAAsBhE,EAAQC,EAGhCgE,SAAaC,SAEbF,SAJsBF,EAAcC,EAMtCG,GADAD,EAAcb,KAAKe,IAAInE,EAAO8D,IACDE,EAG7BC,GADAC,EAAed,KAAKe,IAAIlE,EAAQ8D,IACHC,GAGtBhE,MAAOiE,EAAahE,OAAQiE,QN0Z6InI,EAA+BiG,MAAMpG,EAASI,GAAiCD,KAAiFL,EAAOE,QAAUK,IA2DjW,SAAUP,EAAQE,EAASE,GAEhC,IAAIC,EAAgCC,EAA8BC,EAE5DD,GAAgCJ,QAAiS1J,KAA3O+J,EAA2E,mBAAvHF,EAUvC,SAAUH,GACjB,aAEAzF,OAAOuH,eAAe9B,EAAS,cAC7BrI,WA8CFqI,EAAQe,QOvjBT,cAA6F,QAA9E9B,eAA8E,MAApE,IAAoE,MAA9D9B,YAA8D,MAAvD,EAAuD,MAApD4B,gBAAoD,MAAzC,KAAyC,MAAnCC,iBAAmC,MAAvB,KAAuB,MAAjBK,cAAiB,UP4gB5F,SAAyB8C,EAAUJ,GACjC,KAAMI,aAAoBJ,GACxB,MAAM,IAAIK,UAAU,sCO9gBoE,SAC3FE,KAAKmB,MAAQ/G,OAAOgH,YAAYC,MAChCrB,KAAK+C,IAAM,KAEX/C,KAAK3J,IAAM,KACX2J,KAAK3C,IAAM,KACX2C,KAAKsB,UAAY,KACjBtB,KAAK0B,WAAa,KAClB1B,KAAK4B,YAAc,KAKnB5B,KAAKnF,KAAc,IAAPA,EAAc,IAC1BmF,KAAKkG,QAAU,KACflG,KAAKgC,SAAW,KAChBhC,KAAKiC,UAAY,KACjBjC,KAAKoC,WAAa,EAClBpC,KAAKqC,aAAe,KAEpBrC,KAAKrD,QAAUA,EACfqD,KAAKjD,OAASA,EACdiD,KAAKvD,SAAWA,EAChBuD,KAAKtD,UAAYA,EACjBsD,KAAKuB,YAAc,KPme+J1D,EAA+BiG,MAAMpG,EAASI,GAAiCD,KAAiFL,EAAOE,QAAUK,IAiEjW,SAAUP,EAAQE,EAASE,GAEhC,IAAIC,EAAgCC,EAA8BC,EAE5DD,GAAgCJ,QAAiS1J,KAA3O+J,EAA2E,mBAAvHF,EAUvC,SAAUH,GACjB,aAEAzF,OAAOuH,eAAe9B,EAAS,cAC7BrI,WA2CFqI,EAAQe,SQjlBM8C,YAxCG,SAAC/E,GACnB,OAAO,IAAI2D,SAAQ,SAACC,EAASC,GAC3B,IAAM8F,EAAS,IAAI/L,OAAOmL,WAE1BY,EAAOC,OAAS,SAAU9N,GACxB,IAAI+N,EAAO,IAAIC,SAAShO,EAAMC,OAAOiN,QAEJ,QAA7Ba,EAAKE,UAAU,OACjBnG,GAAQ,GAKV,IAHA,IAAM1G,EAAS2M,EAAKG,WAChBC,EAAS,EAENA,EAAS/M,GAAQ,CACtB,IAAMgN,EAASL,EAAKE,UAAUE,MAG9B,GAFAA,GAAU,EAEK,QAAXC,EAAmB,CACsB,aAAvCL,EAAKM,UAAUF,GAAU,OAC3BrG,GAAQ,GAEV,IAAMwG,EAAgD,QAAvCP,EAAKE,UAAUE,GAAU,MACxCA,GAAUJ,EAAKM,UAAUF,EAAS,EAAGG,GACrC,IAAMC,EAAOR,EAAKE,UAAUE,EAAQG,GACpCH,GAAU,EAEV,IAAK,IAAItH,EAAI,EAAGA,EAAI0H,EAAM1H,IAC0B,MAA9CkH,EAAKE,UAAUE,EAAc,GAAJtH,EAASyH,IACpCxG,EAAQiG,EAAKE,UAAUE,EAAc,GAAJtH,EAAU,EAAGyH,QAG7C,IAA0B,SAAZ,MAATF,GAA6B,MACpCD,GAAUJ,EAAKE,UAAUE,OAEhCrG,GAAQ,IAEV+F,EAAOW,kBAAkBtK,EAAKuK,MAAM,EAAG,eR4hB2IlJ,EAA+BiG,MAAMpG,EAASI,GAAiCD,KAAiFL,EAAOE,QAAUK,O,qDSlkBvW,kCAAO,IAAMjK,EAAa,CACtBkT,uBAAwB,oCACxBlQ,qBAAsB,iCACtBI,aAAc,wBACdM,aAAc,wBACdzD,eAAgB","file":"static/js/15.cef242cf.chunk.js","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { Fragment, useEffect, useRef, useContext } from 'react'\r\nimport { IArtist } from '../../../common/artist';\r\nimport { artistPath } from '../../callers/artistCaller';\r\nimport { uploadCaller } from '../../callers/caller';\r\nimport { parseForInput } from '../../dateParser';\r\nimport { useImage } from '../../hooks';\r\nimport { resizeImageFn } from '../../utils';\r\nimport { MessageContext } from '../Messenger';\r\nimport \"./artistStyle.css\";\r\n\r\ninterface IEditDetails{\r\n    artist: IArtist;\r\n    setArtist: (artist: IArtist) => void;\r\n    bindArtist: (e) => void;\r\n}\r\n\r\nexport const EditDetails: React.FC<IEditDetails> = ({artist, setArtist, bindArtist}: IEditDetails) => {\r\n    const imageInput = useRef<HTMLInputElement>();\r\n    const [portraitSource, onError, setPortraitSource] = useImage(\"/rewer/uploads/portraits\", `${artist.id}.jpg`);\r\n    const [uploader, signal] = uploadCaller(artistPath.uploadPortrait, undefined);\r\n    const { messenger } = useContext(MessageContext);\r\n\r\n    useEffect(()=>{\r\n        return ()=>{\r\n            signal.abort();\r\n            messenger.clear();\r\n        }\r\n    }, []);\r\n\r\n    async function uploadImage(){\r\n        const formData = new FormData();\r\n        if(!imageInput.current.files[0]){\r\n            messenger.addWarning(\"No file was chosen.\");\r\n            return;\r\n        }\r\n        const resizedFile = await resizeImageFn(imageInput.current.files[0], 400, 600, 0.8);\r\n        formData.append(\"portrait\", resizedFile, `${artist.id}.jpg`);\r\n        if(await uploader(artistPath.uploadPortrait, formData)){\r\n            setPortraitSource(`/rewer/uploads/portraits`, `${artist.id}.jpg?${new Date().getTime()}`);\r\n            messenger.addSuccess(\"Portrait updated.\", 3000);\r\n        } else {\r\n            messenger.addWarning(\"Upload unsuccessful.\");\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <input value={artist.name} onChange={bindArtist} type=\"text\" name=\"name\" placeholder=\"Name\" className=\"name-input\" />\r\n            <div className=\"detail-grid\">\r\n                <div className=\"detail-grid-item span-2\">\r\n                    <h3>Born: </h3>\r\n                    <input value={artist.birthPlace} type=\"text\" onChange={bindArtist} name=\"birthPlace\" className=\"place-input\" placeholder=\"Birthplace\"/>\r\n                    <input value={parseForInput(new Date(artist.birthDate))} type=\"date\" onChange={bindArtist} name=\"birthDate\" /><br/>\r\n                    <h3>Died: </h3>\r\n                    <input value={artist.deathPlace} type=\"text\" onChange={bindArtist} name=\"deathPlace\" className=\"place-input\" placeholder=\"leave empty if irrelevant\" title=\"leave empty if irrelevant\"/>\r\n                    <input value={parseForInput(new Date(artist.deathDate)).toString()} type=\"date\" onChange={bindArtist} name=\"deathDate\" />\r\n                    <textarea value={artist.bio} onChange={bindArtist} name=\"bio\" placeholder=\"Biography\" rows={30} />\r\n                </div>\r\n                <div className=\"detail-grid-item first\" >\r\n                    <img className=\"portrait\" src={portraitSource} onError={onError} alt=\"Portrait\" /><br />\r\n                    {(artist.id > 0)?\r\n                    (<Fragment>\r\n                        <input ref={imageInput} type=\"file\" accept=\".png,.jpg\" className=\"file-input\" />\r\n                        <p>It is recommended to use pictures with the standard portrait image ratio (9:16)</p>\r\n                        <button onClick={uploadImage}>Upload</button>\r\n                    </Fragment>):\r\n                    (<Fragment>\r\n                        <p>Create the artist's page to modify their portrait.</p>\r\n                    </Fragment>)}\r\n                </div>\r\n            </div>\r\n            \r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditDetails;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useContext } from 'react'\r\nimport { IArtist } from '../../common/artist'\r\nimport { artistPath } from '../callers/artistCaller'\r\nimport { ECallType, postCaller } from '../callers/caller'\r\nimport EditDetails from '../components/artist/EditDetails'\r\nimport { MessageContext } from '../components/Messenger'\r\nimport { useBinder } from '../hooks'\r\nimport { changeParam, getParameter } from '../urlManager'\r\n\r\nexport default function EditArtist() {\r\n    const [artist, setArtist, bindArtist] = useBinder<IArtist>({id: parseInt(getParameter(\"artistId\")), name: \"\", birthPlace: \"\", birthDate: \"\", deathPlace: \"\", deathDate: \"\", bio: \"\"})\r\n    const [artistCaller, artistSignal] = postCaller({ id: artist.id }, artistPath.selectDetailedArtist);\r\n    const { messenger } = useContext(MessageContext);\r\n    useEffect(()=>{\r\n        if(artist.id > 0){\r\n            getArtist();\r\n        }\r\n\r\n        return ()=>{\r\n            artistSignal.abort();\r\n            messenger.clear();\r\n        }\r\n    }, []);\r\n\r\n    useEffect(()=>{\r\n        if(artist) document.title = `(Edit) ${artist.name} - Rewer`;\r\n    }, [artist]);\r\n\r\n    async function getArtist(){\r\n        const selectedArtist = await artistCaller();\r\n        if(selectedArtist){\r\n            setArtist(selectedArtist);\r\n        }\r\n    }\r\n\r\n    async function createArtist(){\r\n        const newId = await artistCaller(artist, artistPath.insertArtist, ECallType.INSERT);\r\n        if(newId){\r\n            messenger.addSuccess(\"Artist's page successfully created.\", 5000);\r\n            changeParam({name: \"artistId\", value: newId.toString()});\r\n            setArtist({...artist, id: newId});\r\n        } else{\r\n            messenger.addFail(\"Internal error: the server was unable to fulfill your request.\");\r\n        } \r\n    }\r\n\r\n    async function saveArtist(){\r\n        if(await artistCaller(artist, artistPath.updateArtist, ECallType.ISOK)){\r\n            messenger.addSuccess(`Changes saved.`, 5000);\r\n        } else {\r\n            messenger.addFail(\"Internal error: the server was unable to save changes.\")\r\n        }        \r\n    }\r\n\r\n    return (\r\n        <div className=\"main-container\">\r\n            <br/>\r\n            {(artist.id > 0)? \r\n            (<button onClick={saveArtist}>Save changes</button>): \r\n            (<button onClick={createArtist}>Create artist's page</button>)}\r\n            <EditDetails artist={artist} setArtist={setArtist} bindArtist={bindArtist} />\r\n        </div>\r\n    )\r\n}","import { useState, useRef } from \"react\";\r\nexport function useAsyncReference<T>(value: T) {\r\n    const ref = useRef(value);\r\n    const [, forceRender] = useState(false);\r\n    const updateState = (newState) => {\r\n        if (!Object.is(ref.current, newState)) {\r\n            ref.current = newState;\r\n            forceRender(s => !s);\r\n        }\r\n    }\r\n    return [ref, updateState] as const;\r\n}\r\n\r\nexport function useBinder<T>(value: T){\r\n    const [get, set] = useState<T>(value);\r\n    const bind = (event)=>{\r\n        set({...get, [event.target.name]: event.target.value});\r\n    }\r\n    return [get, set, bind] as const;\r\n}\r\n\r\nexport function useAsyncBinder<T>(value: T){\r\n    const ref = useRef(value);\r\n    const [, forceRender] = useState(false);\r\n    const updateState = (newState) => {\r\n        if (!Object.is(ref.current, newState)) {\r\n            ref.current = newState;\r\n            forceRender(s => !s);\r\n        }\r\n    }\r\n    const bind = (event) => {\r\n        updateState({...ref.current, [event.target.name]: event.target.value});\r\n    }\r\n    return [ref, updateState, bind] as const;\r\n}\r\n\r\nexport function useCutter(defaultText: string, defaultCutPos = 0): readonly [string, boolean, (text: string, custPos?: number)=>void]{\r\n    const [firstText, firstCut] = getCutText(defaultText, defaultCutPos > 0, defaultCutPos);\r\n    const [isCut, setIsCut] = useState(firstCut);\r\n    const [outputText, setOutputText] = useState(firstText);\r\n\r\n    const cut = (text: string, cutPos = 0) => {\r\n        const [newText, didCut] = getCutText(text, cutPos > 0, cutPos);\r\n        setOutputText(newText);\r\n        setIsCut(didCut);\r\n    }\r\n\r\n    return [outputText, isCut, cut] as const;\r\n}\r\n\r\nfunction getCutText(text: string, toCut: boolean, cutPos: number): [string, boolean]{\r\n    if(toCut && text.length > cutPos){\r\n        return [text.substring(0, cutPos) + \"...\", true];\r\n    }\r\n    return [text, false];\r\n}\r\n\r\nexport function setBinder(event, object, setter: (any)=> void){\r\n    setter({...object.current, [event.target.name]: event.target.value});\r\n}\r\n\r\nexport function onEnter(event, callback){\r\n    if (event.key === 'Enter') {\r\n        callback();\r\n    }\r\n}\r\n\r\nexport function useScroll(pos: number, callback: ()=> any): readonly [()=>void, ()=>void]{ \r\n    let newPos = pos;\r\n    if(pos > 1 || pos < 0) newPos = 0.8;\r\n    const position = useRef(newPos);\r\n    const listener = ()=>{\r\n        if((window.innerHeight + window.scrollY) >= (document.body.offsetHeight*position.current)){\r\n            callback();\r\n        }\r\n    }\r\n    const addListener = () =>{\r\n        window.addEventListener(\"scroll\", listener);\r\n    }\r\n    const removeListener = ()=>{\r\n        window.removeEventListener(\"scroll\", listener);\r\n    }\r\n    return [addListener, removeListener] as const;\r\n}\r\n\r\nexport enum ESize{\r\n    Normal = \"\",\r\n    Medium = \"medium-\",\r\n    Small = \"small-\",\r\n}\r\n\r\nexport function useImage(path: string, fileName: string, size = ESize.Normal, tryAgain = false){\r\n    const [imgSrc, setImgSrc] = useState<string>(`${path}/${size}${fileName}`);\r\n    const tryAgainRef = useRef(tryAgain);\r\n    const onError= () =>{\r\n        if(tryAgainRef.current){\r\n            setImgSrc(`${path}/${ESize.Normal}${fileName}`);\r\n            tryAgainRef.current = false;\r\n        } else {\r\n            setImgSrc(`${path}/${size}0.jpg`);\r\n        }\r\n    }\r\n    const imgSrcSetter = (newPath: string, newFileName: string) => {\r\n        setImgSrc(`${newPath}/${size}${newFileName}`);\r\n    }\r\n    return [imgSrc, onError, imgSrcSetter] as const;\r\n}\r\n\r\nexport interface IWindowState{\r\n    name: string;\r\n    maxValue: number;\r\n}\r\n\r\nexport function useWidth(defWindowStates: IWindowState[]){\r\n    const windowsStates = useRef(defWindowStates.sort(compareWindowStates));\r\n    const [currentWindowState, setCurrentWindowState] = useState(windowsStates.current.find(w=> w.maxValue > window.innerWidth));\r\n    const listen = ()=>{\r\n        window.addEventListener(\"resize\", ()=>{\r\n            windowStateSetter();\r\n        });\r\n    }\r\n    const cleanUpListener = ()=>{\r\n        window.removeEventListener(\"resize\", ()=>{\r\n            windowStateSetter();\r\n        });\r\n    }\r\n    const windowStateSetter = ()=>{\r\n        setCurrentWindowState(windowsStates.current.find(w=> w.maxValue > window.innerWidth));\r\n    }\r\n    return [currentWindowState, listen, cleanUpListener] as const;\r\n}\r\n\r\nfunction compareWindowStates(wstate1: IWindowState, wstate2: IWindowState){\r\n    if(wstate1.maxValue < wstate2.maxValue) return -1;\r\n    if(wstate1.maxValue > wstate2.maxValue) return 1;\r\n    return 0;\r\n}","export function parseDateHun(date: Date): string{\r\n    return `${date.getFullYear()}. ${monthNames[date.getMonth()]} ${date.getDate()}. ${parseDatehhdd(date)}`;\r\n}\r\n\r\nexport function parseDateYYYYMMDD(date: Date):string{\r\n    return `${date.getFullYear()}. ${monthNames[date.getMonth()]} ${date.getDate()}`;\r\n}\r\n\r\nexport function parseDatehhdd(date: Date):string{\r\n    if(date.getMinutes() < 10){\r\n        return `${date.getHours()}:0${date.getMinutes()}`;\r\n    } else {\r\n        return `${date.getHours()}:${date.getMinutes()}`;\r\n    }\r\n}\r\n\r\nexport function getYear(date: string){\r\n    return new Date(date).getFullYear();\r\n}\r\n\r\nexport function getMonth(date: string){\r\n    return monthNames[new Date(date).getMonth()]; \r\n}\r\n\r\nexport function getDay(date: string){\r\n    return new Date(date).getDate();\r\n}\r\n\r\nexport function normalFormat(date: string): string{\r\n    let d = new Date(date);\r\n    return `${d.getDate()} ${monthNames[d.getMonth()]} ${d.getFullYear()}`;\r\n}\r\n\r\nexport function parseForInput(date: Date): string{\r\n    let month: string;\r\n    let day: string;\r\n    if(date.getMonth() < 9){\r\n        month = `0${date.getMonth()+1}`;\r\n    } else {\r\n        month = (date.getMonth()+1).toString();\r\n    }\r\n    if(date.getDate() < 10){\r\n        day = `0${date.getDate()}`;\r\n    } else {\r\n        day = date.getDate().toString();\r\n    }\r\n\r\n    return `${date.getFullYear()}-${month}-${day}`;\r\n}\r\n\r\nexport let monthNames = [\"Janury\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n","export const itemReplacer = (array, oldItem, newItem) => {\r\n  array.map(item=> item === oldItem? newItem : item);\r\n}\r\n\r\nexport const replacedList = (array, oldItem, newItem) => {\r\n  return array.map(item=> item === oldItem? newItem : item);\r\n}\r\n\r\nexport async function resizeImageFn(file, maxWidth: number, maxHeight: number, quality = 1) {\r\n  const Compress = require('compress.js');\r\n  const compress = new Compress();\r\n  const resizedImage = await compress.compress([file], {\r\n    size: 1,\r\n    quality: quality, \r\n    maxWidth: maxWidth, \r\n    maxHeight: maxHeight, \r\n    resize: true\r\n  })\r\n  const img = resizedImage[0];\r\n  const base64str = img.data;\r\n  const imgExt = img.ext;\r\n  const resizedFiile = Compress.convertBase64ToFile(base64str, imgExt);\r\n  return resizedFiile;\r\n}","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Compress\"] = factory();\n\telse\n\t\troot[\"Compress\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Compress\"] = factory();\n\telse\n\t\troot[\"Compress\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(1), __webpack_require__(2), __webpack_require__(3), __webpack_require__(4), __webpack_require__(5), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(module, require('./core/base64.js'), require('./core/converter.js'), require('./core/file.js'), require('./core/image.js'), require('./core/photo.js'), require('./core/rotate.js'));\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod, global.base64, global.converter, global.file, global.image, global.photo, global.rotate);\n\t    global.Compress = mod.exports;\n\t  }\n\t})(this, function (module, _base, _converter, _file, _image, _photo, _rotate) {\n\t  'use strict';\n\t\n\t  var _base2 = _interopRequireDefault(_base);\n\t\n\t  var _converter2 = _interopRequireDefault(_converter);\n\t\n\t  var _file2 = _interopRequireDefault(_file);\n\t\n\t  var _image2 = _interopRequireDefault(_image);\n\t\n\t  var _photo2 = _interopRequireDefault(_photo);\n\t\n\t  var _rotate2 = _interopRequireDefault(_rotate);\n\t\n\t  function _interopRequireDefault(obj) {\n\t    return obj && obj.__esModule ? obj : {\n\t      default: obj\n\t    };\n\t  }\n\t\n\t  function _toConsumableArray(arr) {\n\t    if (Array.isArray(arr)) {\n\t      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n\t        arr2[i] = arr[i];\n\t      }\n\t\n\t      return arr2;\n\t    } else {\n\t      return Array.from(arr);\n\t    }\n\t  }\n\t\n\t  function _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t      throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t  }\n\t\n\t  var _createClass = function () {\n\t    function defineProperties(target, props) {\n\t      for (var i = 0; i < props.length; i++) {\n\t        var descriptor = props[i];\n\t        descriptor.enumerable = descriptor.enumerable || false;\n\t        descriptor.configurable = true;\n\t        if (\"value\" in descriptor) descriptor.writable = true;\n\t        Object.defineProperty(target, descriptor.key, descriptor);\n\t      }\n\t    }\n\t\n\t    return function (Constructor, protoProps, staticProps) {\n\t      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t      if (staticProps) defineProperties(Constructor, staticProps);\n\t      return Constructor;\n\t    };\n\t  }();\n\t\n\t  var Compress = function () {\n\t    function Compress() {\n\t      _classCallCheck(this, Compress);\n\t    }\n\t\n\t    _createClass(Compress, [{\n\t      key: 'attach',\n\t      value: function attach(el, options) {\n\t        var _this = this;\n\t\n\t        return new Promise(function (resolve, reject) {\n\t          var input = document.querySelector(el);\n\t          input.setAttribute('accept', 'image/*');\n\t          input.addEventListener('change', function (evt) {\n\t            var output = _this.compress([].concat(_toConsumableArray(evt.target.files)), options);\n\t            resolve(output);\n\t          }, false);\n\t        });\n\t      }\n\t    }, {\n\t      key: 'compress',\n\t      value: function compress(files, options) {\n\t        function compressFile(file, options) {\n\t          var photo = new _photo2.default(options);\n\t          photo.start = window.performance.now();\n\t          photo.alt = file.name;\n\t          photo.ext = file.type;\n\t          photo.startSize = file.size;\n\t\n\t          return _rotate2.default.orientation(file).then(function (orientation) {\n\t            photo.orientation = orientation;\n\t            return _file2.default.load(file);\n\t          }).then(compressImage(photo));\n\t        }\n\t        function compressImage(photo) {\n\t          return function (src) {\n\t            return _image2.default.load(src).then(function (img) {\n\t              photo.startWidth = img.naturalWidth;\n\t              photo.startHeight = img.naturalHeight;\n\t\n\t              if (photo.resize) {\n\t                var _Image$resize = _image2.default.resize(photo.maxWidth, photo.maxHeight)(img.naturalWidth, img.naturalHeight),\n\t                    width = _Image$resize.width,\n\t                    height = _Image$resize.height;\n\t\n\t                photo.endWidth = width;\n\t                photo.endHeight = height;\n\t              } else {\n\t                photo.endWidth = img.naturalWidth;\n\t                photo.endHeight = img.naturalHeight;\n\t              }\n\t              return _converter2.default.imageToCanvas(photo.endWidth, photo.endHeight, photo.orientation)(img);\n\t            }).then(function (canvas) {\n\t              photo.iterations = 1;\n\t\n\t              photo.base64prefix = _base2.default.prefix(photo.ext);\n\t              return loopCompression(canvas, photo.startSize, photo.quality, photo.size, photo.minQuality, photo.iterations);\n\t            }).then(function (base64) {\n\t              photo.finalSize = _base2.default.size(base64);\n\t              return _base2.default.data(base64);\n\t            }).then(function (data) {\n\t              photo.end = window.performance.now();\n\t              var difference = photo.end - photo.start;\n\t\n\t              return {\n\t                data: data,\n\t                prefix: photo.base64prefix,\n\t                elapsedTimeInSeconds: difference / 1000,\n\t                alt: photo.alt,\n\t                initialSizeInMb: _converter2.default.size(photo.startSize).MB,\n\t                endSizeInMb: _converter2.default.size(photo.finalSize).MB,\n\t                ext: photo.ext,\n\t                quality: photo.quality,\n\t                endWidthInPx: photo.endWidth,\n\t                endHeightInPx: photo.endHeight,\n\t                initialWidthInPx: photo.startWidth,\n\t                initialHeightInPx: photo.startHeight,\n\t                sizeReducedInPercent: (photo.startSize - photo.finalSize) / photo.startSize * 100,\n\t                iterations: photo.iterations\n\t              };\n\t            });\n\t          };\n\t        }\n\t        function loopCompression(canvas, size) {\n\t          var quality = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t          var targetSize = arguments[3];\n\t          var targetQuality = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\t          var iterations = arguments[5];\n\t\n\t          var base64str = _converter2.default.canvasToBase64(canvas, quality);\n\t          var newSize = _base2.default.size(base64str);\n\t\n\t          iterations += 1;\n\t\n\t          if (newSize > targetSize) {\n\t            return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations);\n\t          }\n\t\n\t          if (quality > targetQuality) {\n\t            return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations);\n\t          }\n\t\n\t          if (quality < 0.5) {\n\t            return base64str;\n\t          }\n\t          return base64str;\n\t        }\n\t        return Promise.all(files.map(function (file) {\n\t          return compressFile(file, options);\n\t        }));\n\t      }\n\t    }], [{\n\t      key: 'convertBase64ToFile',\n\t      value: function convertBase64ToFile(base64, mime) {\n\t        return _converter2.default.base64ToFile(base64, mime);\n\t      }\n\t    }]);\n\t\n\t    return Compress;\n\t  }();\n\t\n\t  module.exports = Compress;\n\t});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.base64 = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t  var size = function size(base64) {\n\t    var len = base64.replace(/^data:image\\/\\w+;base64,/, '').length;\n\t    return (len - 814) / 1.37;\n\t  };\n\t\n\t  var mime = function mime(base64) {\n\t    return base64.split(';')[0].match(/jpeg|png|gif/)[0];\n\t  };\n\t\n\t  var data = function data(base64) {\n\t    return base64.replace(/^data:image\\/\\w+;base64,/, '');\n\t  };\n\t\n\t  var prefix = function prefix(ext) {\n\t    return 'data:' + ext + ';base64,';\n\t  };\n\t\n\t  exports.default = { size: size, mime: mime, data: data, prefix: prefix };\n\t});\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.converter = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var base64ToFile = function base64ToFile(base64) {\n\t    var mime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'image/jpeg';\n\t\n\t    var byteString = window.atob(base64);\n\t    var content = [];\n\t    for (var i = 0; i < byteString.length; i++) {\n\t      content[i] = byteString.charCodeAt(i);\n\t    }\n\t    return new window.Blob([new Uint8Array(content)], { type: mime });\n\t  };\n\t\n\t  var imageToCanvas = function imageToCanvas(width, height, orientation) {\n\t    var canvas = document.createElement('canvas');\n\t    var context = canvas.getContext('2d');\n\t\n\t    canvas.width = width;\n\t    canvas.height = height;\n\t\n\t\n\t    return function (image) {\n\t      if (!orientation || orientation > 8) {\n\t        context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\t        return canvas;\n\t      }\n\t      if (orientation > 4) {\n\t        canvas.width = height;\n\t        canvas.height = width;\n\t      }\n\t      switch (orientation) {\n\t        case 2:\n\t          context.translate(width, 0);\n\t          context.scale(-1, 1);\n\t          break;\n\t        case 3:\n\t          context.translate(width, height);\n\t          context.rotate(Math.PI);\n\t          break;\n\t        case 4:\n\t          context.translate(0, height);\n\t          context.scale(1, -1);\n\t          break;\n\t        case 5:\n\t          context.rotate(0.5 * Math.PI);\n\t          context.scale(1, -1);\n\t          break;\n\t        case 6:\n\t          context.rotate(0.5 * Math.PI);\n\t          context.translate(0, -height);\n\t          break;\n\t        case 7:\n\t          context.rotate(0.5 * Math.PI);\n\t          context.translate(width, -height);\n\t          context.scale(-1, 1);\n\t          break;\n\t        case 8:\n\t          context.rotate(-0.5 * Math.PI);\n\t          context.translate(-width, 0);\n\t          break;\n\t      }\n\t      if (orientation > 4) {\n\t        context.drawImage(image, 0, 0, canvas.height, canvas.width);\n\t      } else {\n\t        context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\t      }\n\t      return canvas;\n\t    };\n\t  };\n\t\n\t  var canvasToBase64 = function canvasToBase64(canvas) {\n\t    var quality = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.75;\n\t\n\t    var base64 = canvas.toDataURL('image/jpeg', quality);\n\t    return base64;\n\t  };\n\t\n\t  var size = function size(_size) {\n\t    return {\n\t      KB: _size / 1000,\n\t      MB: _size / (1000 * 1000)\n\t    };\n\t  };\n\t\n\t  exports.default = { base64ToFile: base64ToFile, imageToCanvas: imageToCanvas, canvasToBase64: canvasToBase64, size: size };\n\t});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.file = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var load = function load(file) {\n\t    return new Promise(function (resolve, reject) {\n\t      var fileReader = new window.FileReader();\n\t      fileReader.addEventListener('load', function (evt) {\n\t        resolve(evt.target.result);\n\t      }, false);\n\t\n\t      fileReader.addEventListener('error', function (err) {\n\t        reject(err);\n\t      }, false);\n\t\n\t      fileReader.readAsDataURL(file);\n\t    });\n\t  };\n\t\n\t  exports.default = { load: load };\n\t});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.image = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var load = function load(src) {\n\t    return new Promise(function (resolve, reject) {\n\t      var img = new window.Image();\n\t      img.addEventListener('load', function () {\n\t        resolve(img);\n\t      }, false);\n\t\n\t      img.addEventListener('error', function (err) {\n\t        reject(err);\n\t      }, false);\n\t\n\t      img.src = src;\n\t    });\n\t  };\n\t\n\t  var resize = function resize(targetWidth, targetHeight) {\n\t    return function (width, height) {\n\t      if (!targetWidth && !targetHeight) return { width: width, height: height };\n\t\n\t      var originalAspectRatio = width / height;\n\t      var targetAspectRatio = targetWidth / targetHeight;\n\t\n\t      var outputWidth = void 0,\n\t          outputHeight = void 0;\n\t\n\t      if (originalAspectRatio > targetAspectRatio) {\n\t        outputWidth = Math.min(width, targetWidth);\n\t        outputHeight = outputWidth / originalAspectRatio;\n\t      } else {\n\t        outputHeight = Math.min(height, targetHeight);\n\t        outputWidth = outputHeight * originalAspectRatio;\n\t      }\n\t\n\t      return { width: outputWidth, height: outputHeight };\n\t    };\n\t  };\n\t\n\t  exports.default = { load: load, resize: resize };\n\t});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.photo = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  \"use strict\";\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  function _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t      throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t  }\n\t\n\t  var Photo = function Photo(_ref) {\n\t    var _ref$quality = _ref.quality,\n\t        quality = _ref$quality === undefined ? 0.75 : _ref$quality,\n\t        _ref$size = _ref.size,\n\t        size = _ref$size === undefined ? 2 : _ref$size,\n\t        _ref$maxWidth = _ref.maxWidth,\n\t        maxWidth = _ref$maxWidth === undefined ? 1920 : _ref$maxWidth,\n\t        _ref$maxHeight = _ref.maxHeight,\n\t        maxHeight = _ref$maxHeight === undefined ? 1920 : _ref$maxHeight,\n\t        _ref$resize = _ref.resize,\n\t        resize = _ref$resize === undefined ? true : _ref$resize;\n\t\n\t    _classCallCheck(this, Photo);\n\t\n\t    this.start = window.performance.now();\n\t    this.end = null;\n\t\n\t    this.alt = null;\n\t    this.ext = null;\n\t    this.startSize = null;\n\t    this.startWidth = null;\n\t    this.startHeight = null;\n\t\n\t    this.size = size * 1000 * 1000;\n\t    this.endSize = null;\n\t    this.endWidth = null;\n\t    this.endHeight = null;\n\t    this.iterations = 0;\n\t    this.base64prefix = null;\n\t\n\t    this.quality = quality;\n\t    this.resize = resize;\n\t    this.maxWidth = maxWidth;\n\t    this.maxHeight = maxHeight;\n\t    this.orientation = 1;\n\t  };\n\t\n\t  exports.default = Photo;\n\t});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.rotate = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  \"use strict\";\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t\n\t  var orientation = function orientation(file) {\n\t    return new Promise(function (resolve, reject) {\n\t      var reader = new window.FileReader();\n\t\n\t      reader.onload = function (event) {\n\t        var view = new DataView(event.target.result);\n\t\n\t        if (view.getUint16(0, false) !== 0xFFD8) {\n\t          resolve(-2);\n\t        }\n\t        var length = view.byteLength;\n\t        var offset = 2;\n\t\n\t        while (offset < length) {\n\t          var marker = view.getUint16(offset, false);\n\t          offset += 2;\n\t\n\t          if (marker === 0xFFE1) {\n\t            if (view.getUint32(offset += 2, false) !== 0x45786966) {\n\t              resolve(-1);\n\t            }\n\t            var little = view.getUint16(offset += 6, false) === 0x4949;\n\t            offset += view.getUint32(offset + 4, little);\n\t            var tags = view.getUint16(offset, little);\n\t            offset += 2;\n\t\n\t            for (var i = 0; i < tags; i++) {\n\t              if (view.getUint16(offset + i * 12, little) === 0x0112) {\n\t                resolve(view.getUint16(offset + i * 12 + 8, little));\n\t              }\n\t            }\n\t          } else if ((marker & 0xFF00) !== 0xFF00) break;else offset += view.getUint16(offset, false);\n\t        }\n\t        resolve(-1);\n\t      };\n\t      reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n\t    });\n\t  };\n\t\n\t  exports.default = { orientation: orientation };\n\t});\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5c04cbde4fb824613eb6","import Base64 from './core/base64.js'\nimport Converter from './core/converter.js'\nimport File from './core/file.js'\nimport Image from './core/image.js'\nimport Photo from './core/photo.js'\nimport Rotate from './core/rotate.js'\n\nclass Compress {\n  attach (el, options) {\n    return new Promise((resolve, reject) => {\n      const input = document.querySelector(el)\n      input.setAttribute('accept', 'image/*')\n      input.addEventListener('change', (evt) => {\n        const output = this.compress([...evt.target.files], options)\n        resolve(output)\n      }, false)\n    })\n  }\n\n  compress (files, options) {\n    function compressFile (file, options) {\n      // Create a new photo object\n      const photo = new Photo(options)\n      photo.start = window.performance.now()\n      photo.alt = file.name\n      photo.ext = file.type\n      photo.startSize = file.size\n\n      return Rotate.orientation(file)\n      .then((orientation) => {\n        photo.orientation = orientation\n        return File.load(file)\n      })\n      .then(compressImage(photo))\n    }\n    function compressImage (photo) {\n      return (src) => {\n        return Image.load(src).then((img) => {\n          // Store the initial dimensions\n          photo.startWidth = img.naturalWidth\n          photo.startHeight = img.naturalHeight\n          // Resize the image\n          if (photo.resize) {\n            const { width, height } = Image.resize(photo.maxWidth, photo.maxHeight)(img.naturalWidth, img.naturalHeight)\n            photo.endWidth = width\n            photo.endHeight = height\n          } else {\n            photo.endWidth = img.naturalWidth\n            photo.endHeight = img.naturalHeight\n          }\n          return Converter.imageToCanvas(photo.endWidth, photo.endHeight, photo.orientation)(img)\n        })\n        .then((canvas) => {\n          photo.iterations = 1\n          // Base64.mime(Converter.canvasToBase64(canvas))\n          photo.base64prefix = Base64.prefix(photo.ext)\n          return loopCompression(canvas, photo.startSize, photo.quality, photo.size, photo.minQuality, photo.iterations)\n        })\n        .then((base64) => {\n          photo.finalSize = Base64.size(base64)\n          return Base64.data(base64)\n        })\n        .then((data) => {\n          photo.end = window.performance.now()\n          const difference = photo.end - photo.start // in ms\n\n          return {\n            data: data,\n            prefix: photo.base64prefix,\n            elapsedTimeInSeconds: difference / 1000, // in seconds\n            alt: photo.alt,\n            initialSizeInMb: Converter.size(photo.startSize).MB,\n            endSizeInMb: Converter.size(photo.finalSize).MB,\n            ext: photo.ext,\n            quality: photo.quality,\n            endWidthInPx: photo.endWidth,\n            endHeightInPx: photo.endHeight,\n            initialWidthInPx: photo.startWidth,\n            initialHeightInPx: photo.startHeight,\n            sizeReducedInPercent: (photo.startSize - photo.finalSize) / photo.startSize * 100,\n            iterations: photo.iterations\n          }\n        })\n      }\n    }\n    function loopCompression (canvas, size, quality = 1, targetSize, targetQuality = 1, iterations) {\n      const base64str = Converter.canvasToBase64(canvas, quality)\n      const newSize = Base64.size(base64str)\n      // const base64str = convertCanvasToBase64(src)\n      // const size = getFileSize(base64str);\n      iterations += 1\n      // add in iteration count\n      if (newSize > targetSize) {\n        return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations)\n      }\n\n      if (quality > targetQuality) {\n        return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations)\n      }\n\n      if (quality < 0.5) {\n        return base64str\n      }\n      return base64str\n    }\n    return Promise.all(files.map((file) => {\n      return compressFile(file, options)\n    }))\n  }\n  static convertBase64ToFile (base64, mime) {\n    return Converter.base64ToFile(base64, mime)\n  }\n}\n\n// Supported input formats\n// image/png, image/jpeg, image/jpg, image/gif, image/bmp, image/tiff, image/x-icon,  image/svg+xml, image/webp, image/xxx\n// image/png, image/jpeg, image/webp\nmodule.exports = Compress\n\n\n\n// WEBPACK FOOTER //\n// ./src/Compress.js","const size = (base64) => {\n  const len = base64.replace(/^data:image\\/\\w+;base64,/, '').length\n  return (len - 814) / 1.37\n  // return len * 3 / 4\n}\n\n// strip off the data: url prefix to get just the base64-encoded bytes\n// var data = img.replace(/^data:image\\/\\w+;base64,/, \"\");\nconst mime = (base64) => {\n  return base64.split(';')[0].match(/jpeg|png|gif/)[0]\n}\n\nconst data = (base64) => {\n  return base64.replace(/^data:image\\/\\w+;base64,/, '')\n}\n\nconst prefix = (ext) => {\n  return `data:${ext};base64,`\n}\n\nexport default { size, mime, data, prefix }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/base64.js","\nconst base64ToFile = (base64, mime = 'image/jpeg') => {\n  const byteString = window.atob(base64)\n  const content = []\n  for (let i = 0; i < byteString.length; i++) {\n    content[i] = byteString.charCodeAt(i)\n  }\n  return new window.Blob([new Uint8Array(content)], {type: mime})\n}\n\nconst imageToCanvas = (width, height, orientation) => {\n  const canvas = document.createElement('canvas')\n  const context = canvas.getContext('2d')\n\n  canvas.width = width\n  canvas.height = height\n  // canvas.style.width = width\n  // canvas.style.height = height\n\n  return (image) => {\n    if (!orientation || orientation > 8) {\n      context.drawImage(image, 0, 0, canvas.width, canvas.height)\n      return canvas\n    }\n    if (orientation > 4) {\n      canvas.width = height\n      canvas.height = width\n      // canvas.style.width = height\n      // canvas.style.height = width\n    }\n    switch (orientation) {\n      case 2:\n        // horizontal flip\n        context.translate(width, 0)\n        context.scale(-1, 1)\n        break\n      case 3:\n        // 180° rotate left\n        context.translate(width, height)\n        context.rotate(Math.PI)\n        break\n      case 4:\n        // vertical flip\n        context.translate(0, height)\n        context.scale(1, -1)\n        break\n      case 5:\n        // vertical flip + 90 rotate right\n        context.rotate(0.5 * Math.PI)\n        context.scale(1, -1)\n        break\n      case 6:\n        // 90° rotate right\n        context.rotate(0.5 * Math.PI)\n        context.translate(0, -height)\n        break\n      case 7:\n        // horizontal flip + 90 rotate right\n        context.rotate(0.5 * Math.PI)\n        context.translate(width, -height)\n        context.scale(-1, 1)\n        break\n      case 8:\n        // 90° rotate left\n        context.rotate(-0.5 * Math.PI)\n        context.translate(-width, 0)\n        break\n    }\n    if (orientation > 4) {\n      context.drawImage(image, 0, 0, canvas.height, canvas.width)\n    } else {\n      context.drawImage(image, 0, 0, canvas.width, canvas.height)\n    }\n    return canvas\n  }\n}\n\nconst canvasToBase64 = (canvas, quality = 0.75) => {\n  // in order to compress the final image format has to be jpeg\n  const base64 = canvas.toDataURL('image/jpeg', quality)\n  return base64\n}\n\n// const canvasToImage = (canvas, quality=.75, mimeType='image/jpeg') => {\n//   const image = new Image()\n//   const base64str = canvas.toDataURL(mimeType, quality)\n//   image.src = base64str\n//   return image\n// }\n\nconst size = (size) => {\n  return {\n    KB: size / 1000,\n    MB: size / (1000 * 1000)\n  }\n}\n\nexport default { base64ToFile, imageToCanvas, canvasToBase64, size }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/converter.js","\nconst load = (file) => {\n  return new Promise((resolve, reject) => {\n    const fileReader = new window.FileReader()\n    fileReader.addEventListener('load', (evt) => {\n      resolve(evt.target.result)\n    }, false)\n\n    fileReader.addEventListener('error', (err) => {\n      reject(err)\n    }, false)\n\n    fileReader.readAsDataURL(file)\n  })\n}\n\nexport default { load }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/file.js","\nconst load = (src) => {\n  return new Promise((resolve, reject) => {\n    const img = new window.Image()\n    img.addEventListener('load', () => {\n      resolve(img)\n    }, false)\n\n    img.addEventListener('error', (err) => {\n      reject(err)\n    }, false)\n\n    img.src = src\n  })\n}\n  /*\n   * Resize the image based on the given height or width boundary.\n   * Auto resize based on aspect ratio.\n  **/\nconst resize = (targetWidth, targetHeight) => {\n  return (width, height) => {\n    if (!targetWidth && !targetHeight) return { width, height }\n\n    const originalAspectRatio = width / height\n    const targetAspectRatio = targetWidth / targetHeight\n\n    let outputWidth, outputHeight\n\n    if (originalAspectRatio > targetAspectRatio) {\n      outputWidth = Math.min(width, targetWidth)\n      outputHeight = outputWidth / originalAspectRatio\n    } else {\n      outputHeight = Math.min(height, targetHeight)\n      outputWidth = outputHeight * originalAspectRatio\n    }\n\n    return { width: outputWidth, height: outputHeight }\n  }\n}\n\nexport default { load, resize }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/image.js","// The photo model\nclass Photo {\n  constructor ({ quality = 0.75, size = 2, maxWidth = 1920, maxHeight = 1920, resize = true }) {\n    this.start = window.performance.now()\n    this.end = null\n\n    this.alt = null\n    this.ext = null\n    this.startSize = null\n    this.startWidth = null\n    this.startHeight = null\n    // How much will the quality decrease by each compression\n    // this.stepQuality = stepQuality\n\n    // size in MB\n    this.size = size * 1000 * 1000\n    this.endSize = null\n    this.endWidth = null\n    this.endHeight = null\n    this.iterations = 0\n    this.base64prefix = null\n    // Carry out image resizing\n    this.quality = quality\n    this.resize = resize\n    this.maxWidth = maxWidth\n    this.maxHeight = maxHeight\n    this.orientation = 1\n  }\n}\nexport default Photo\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/photo.js","// https://stackoverflow.com/questions/20600800/js-client-side-exif-orientation-rotate-and-mirror-jpeg-images/31273162#31273162\n\nconst orientation = (file) => {\n  return new Promise((resolve, reject) => {\n    const reader = new window.FileReader()\n\n    reader.onload = function (event) {\n      var view = new DataView(event.target.result)\n\n      if (view.getUint16(0, false) !== 0xFFD8) {\n        resolve(-2)\n      }\n      const length = view.byteLength\n      let offset = 2\n\n      while (offset < length) {\n        const marker = view.getUint16(offset, false)\n        offset += 2\n\n        if (marker === 0xFFE1) {\n          if (view.getUint32(offset += 2, false) !== 0x45786966) {\n            resolve(-1)\n          }\n          const little = view.getUint16(offset += 6, false) === 0x4949\n          offset += view.getUint32(offset + 4, little)\n          const tags = view.getUint16(offset, little)\n          offset += 2\n\n          for (let i = 0; i < tags; i++) {\n            if (view.getUint16(offset + (i * 12), little) === 0x0112) {\n              resolve(view.getUint16(offset + (i * 12) + 8, little))\n            }\n          }\n        } else if ((marker & 0xFF00) !== 0xFF00) break\n        else offset += view.getUint16(offset, false)\n      }\n      resolve(-1)\n    }\n    reader.readAsArrayBuffer(file.slice(0, 64 * 1024))\n  })\n}\n\nexport default { orientation }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/rotate.js","export const artistPath = {\r\n    selectArtistsByKeyword: \"/artist/select_artists_by_keyword\",\r\n    selectDetailedArtist: \"/artist/select_detailed_artist\",\r\n    insertArtist: \"/artist/insert_artist\",\r\n    updateArtist: \"/artist/update_artist\",\r\n    uploadPortrait: \"/artist/upload_portrait\"\r\n}"],"sourceRoot":""}