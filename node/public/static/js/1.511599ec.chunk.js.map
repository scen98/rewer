{"version":3,"sources":["components/movie/EditMovieDetails.tsx","components/movie/GenreAdder.tsx","components/artist/ArtistRow.tsx","components/artist/ArtistSelector.tsx","components/cast/CastTypeSelect.tsx","components/cast/EditCastRow.tsx","components/cast/EditCastList.tsx","components/movie/EditCast.tsx","hooks.tsx","dateParser.ts","callers/movieCaller.ts","callers/castCaller.ts","utils.ts","../../../../../webpack/universalModuleDefinition","../../../../../index.js","../webpack:/webpack/bootstrap 5c04cbde4fb824613eb6","../../../../../src/Compress.js","../../../../../src/core/base64.js","../../../../../src/core/converter.js","../../../../../src/core/file.js","../../../../../src/core/image.js","../../../../../src/core/photo.js","../../../../../src/core/rotate.js","components/movie/GenreSelect.tsx","callers/artistCaller.ts"],"names":["EditMovieDetails","movie","movieBinder","posterInput","setMovie","useRef","useImage","id","posterSrc","onPosterError","setPosterSource","messenger","useContext","MessageContext","a","formData","FormData","resizeImageFn","current","files","resizedFile","append","uploadPoster","Date","getTime","addFail","useEffect","clear","className","value","title","onChange","name","type","placeholder","runtime","parseForInput","releaseDate","summary","rows","src","onError","alt","ref","accept","onClick","GenreAdder","onAdd","onDelete","useState","genreList","setGenreList","selectedGenre","setSelectedGenre","getCaller","moviePath","getGenres","genreCaller","signal","genres","requestGenres","abort","map","g","key","genreName","icon","faTimes","ArtistRow","artist","selectedArtist","divRef","ESize","Small","imgsrc","birthPlace","parseDateYYYYMMDD","birthDate","ArtistSelector","artistList","onSelectionChanged","useAsyncReference","undefined","setSelectedArtist","CastTypeSelect","typeList","updateValue","initialValue","select","t","EditCastRow","cast","castTypes","onUpdate","mainClass","setMainClass","useAsyncBinder","getCast","setCast","castBinder","postCaller","caller","artistId","onImgError","deleteRow","castPath","deleteCast","ECallType","ISOK","saveChanges","updateCast","saved","setCastTypeId","newTypeId","castTypeId","parseInt","setUnsaved","includes","replace","window","screen","width","artistName","e","toString","EditCastList","castList","setCastList","toUpdate","replacedList","find","c","selectedId","filter","EditCast","season","setEpisodes","setCastTypes","artists","setArtists","useBinder","search","keyword","bindKeyword","movieId","newCast","setNewCast","bindNewCast","limit","offset","artistPath","selectArtistsByKeyword","castCaller","castSignal","getCastTypes","typeCaller","typeSignal","Promise","all","requestCastTypes","requestArtists","SELECT","addWarning","insertCastRequest","insertCast","INSERT","newId","setCasts","casts","sort","compareCastType","newCasts","episodes","episode","push","insertCasts","newEpisodes","fetchRequests","newValue","seasonId","to","onKeyDown","onEnter","forceRender","newState","Object","is","s","get","set","event","target","updateState","useCutter","defaultText","defaultCutPos","getCutText","firstText","firstCut","isCut","setIsCut","outputText","setOutputText","cut","text","cutPos","newText","didCut","toCut","length","substring","callback","useScroll","pos","newPos","position","listener","innerHeight","scrollY","document","body","offsetHeight","addEventListener","removeEventListener","path","fileName","size","Normal","tryAgain","imgSrc","setImgSrc","tryAgainRef","imgSrcSetter","newPath","newFileName","date","getFullYear","monthNames","getMonth","getDate","getYear","getDay","normalFormat","d","month","day","selectDetailedMovie","selectLatestMovies","selectLatestMoviesJson","selectLatestMoviesByGenre","selectMoviesByScore","insertMovie","updateMovie","deleteMovie","insertMovieGenre","deleteMovieGenre","selectUpcomingMovies","selectUpcomingMoviesJson","file","UploadFile","ok","compareMovieGenresByName","genre1","genre2","localeCompare","cast1","cast2","array","oldItem","newItem","item","maxWidth","maxHeight","quality","Compress","require","compress","resize","resizedImage","img","base64str","data","imgExt","ext","resizedFiile","convertBase64ToFile","module","modules","exports","loaded","__webpack_require__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","_base","_converter","_file","_image","_photo","_rotate","_interopRequireDefault","obj","__esModule","default","_base2","_converter2","_file2","_image2","_photo2","_rotate2","_createClass","defineProperties","props","i","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","prototype","instance","TypeError","_classCallCheck","this","el","options","resolve","reject","input","querySelector","setAttribute","evt","output","_this","arr","Array","isArray","arr2","from","compressFile","photo","start","performance","now","startSize","orientation","then","load","startWidth","naturalWidth","startHeight","naturalHeight","height","endWidth","endHeight","imageToCanvas","canvas","iterations","base64prefix","prefix","loopCompression","targetSize","targetQuality","canvasToBase64","newSize","minQuality","base64","finalSize","end","difference","elapsedTimeInSeconds","initialSizeInMb","MB","endSizeInMb","endWidthInPx","endHeightInPx","initialWidthInPx","initialHeightInPx","sizeReducedInPercent","compressImage","mime","base64ToFile","apply","len","split","match","arguments","byteString","atob","content","charCodeAt","Blob","Uint8Array","createElement","context","getContext","image","drawImage","translate","scale","rotate","Math","PI","toDataURL","KB","fileReader","FileReader","result","err","readAsDataURL","Image","targetWidth","targetHeight","originalAspectRatio","outputWidth","outputHeight","min","endSize","reader","onload","view","DataView","getUint16","byteLength","marker","getUint32","little","tags","readAsArrayBuffer","slice","GenreSelect","any","setGenres","selectDetailedArtist","insertArtist","updateArtist","uploadPortrait"],"mappings":"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","file":"static/js/1.511599ec.chunk.js","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { Fragment, useState, useRef, useEffect, useContext } from \"react\";\r\nimport \"./movieStyle.css\";\r\nimport { resizeImageFn } from \"../../utils\";\r\nimport { uploadPoster } from \"../../callers/movieCaller\";\r\nimport { IMovie } from \"../../../common/movie\";\r\nimport { parseForInput } from \"../../dateParser\";\r\nimport { useImage } from \"../../hooks\";\r\nimport { MessageContext } from \"../Messenger\";\r\n\r\ninterface IEditMovieDetails{\r\n    movie: IMovie;\r\n    setMovie: (movie: IMovie)=>any;\r\n    movieBinder: (e)=>void;\r\n}\r\n\r\nexport const EditMovieDetails: React.FC<IEditMovieDetails> = ({movie, movieBinder, setMovie}: IEditMovieDetails) =>{\r\n    const posterInput = useRef<HTMLInputElement>();\r\n    const [posterSrc, onPosterError, setPosterSource] = useImage(\"/rewer/uploads/posters\", `${movie.id}.jpg`);\r\n    const { messenger } = useContext(MessageContext);\r\n\r\n    useEffect(()=>{\r\n        if(movie.id > 0){\r\n            setPosterSource( \"/rewer/uploads/posters\", `${movie.id}.jpg?${new Date().getTime()}`);\r\n        }\r\n        return ()=>{\r\n            messenger.clear();\r\n        }\r\n    }, [movie.id]);\r\n\r\n    async function savePoster(){\r\n        const formData = new FormData();\r\n        const resizedFile = await resizeImageFn(posterInput.current.files[0], 400, 600, 0.9);\r\n        formData.append(\"poster\", resizedFile, `${movie.id}.jpg`);\r\n        if(await uploadPoster(formData)){\r\n            setPosterSource( \"/rewer/uploads/posters\", `${movie.id}.jpg?${new Date().getTime()}`);\r\n        } else {\r\n            messenger.addFail(\"Server error: upload unsuccessful.\");\r\n        }\r\n    }\r\n\r\n    return (\r\n    <Fragment>\r\n      <div className=\"detail-grid\">\r\n        <div className=\"span-2\">\r\n            <input value={movie.title} onChange={movieBinder} name=\"title\" type=\"text\" placeholder=\"Title\" className=\"title-input\" /><br/>\r\n            <label>Runtime:</label>\r\n            <input value={movie.runtime} onChange={movieBinder} name=\"runtime\" type=\"text\" /><br/>\r\n            <label>Release date:</label>\r\n            <input value={parseForInput(new Date(movie.releaseDate))} onChange={movieBinder} name=\"releaseDate\" type=\"date\" />\r\n            <textarea value={movie.summary} onChange={movieBinder} name=\"summary\" placeholder=\"Write something about the story...\" rows={20} /> \r\n        </div>\r\n        <div>\r\n            <img src={posterSrc} onError={onPosterError} alt=\"Poster\" title=\"Poster\" className=\"edit-poster\"/>\r\n            {(movie.id > 0) ? \r\n            (<Fragment>\r\n                <p>It is recommended to use an image with a standard poster image ratio</p>\r\n                <input ref={posterInput} type=\"file\" accept=\".png,.jpg,.jpeg\" className=\"file-input\" />\r\n                <button onClick={savePoster}>Upload</button>\r\n            </Fragment>):\r\n            (<Fragment>\r\n                <p>Create the movie's page to edit this picture.</p>\r\n            </Fragment>)}\r\n        </div>\r\n      </div>\r\n    </Fragment>)\r\n}\r\n\r\nexport default EditMovieDetails;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from 'react'\r\nimport { GenreSelect } from './GenreSelect';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\r\nimport { moviePath } from '../../callers/movieCaller';\r\nimport { IGenre } from '../../../common/genre';\r\nimport { getCaller } from '../../callers/caller';\r\n\r\ninterface IGenreAdder{\r\n    movie: any;\r\n    onAdd: (genre: IGenre) => void;\r\n    onDelete: (id: number) => void;\r\n}\r\nexport const GenreAdder: React.FC<IGenreAdder> = ({movie, onAdd, onDelete}: IGenreAdder)=> {\r\n    const [genreList, setGenreList] = useState([]);\r\n    const [selectedGenre, setSelectedGenre] = useState<IGenre>({id: 0, name: \"\"});\r\n    const [genreCaller, signal] = getCaller(moviePath.getGenres);\r\n    useEffect(()=>{\r\n        requestGenres();\r\n        return ()=>{\r\n            signal.abort();\r\n        }\r\n    },[]);\r\n\r\n    async function requestGenres(){\r\n        const genres = await genreCaller();\r\n        if(genres != null){\r\n            setGenreList(genres);\r\n        }\r\n    }\r\n\r\n    function addGenre(){\r\n        if(selectedGenre.id > 0){\r\n            onAdd(selectedGenre);\r\n        } else {\r\n            onAdd(genreList[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h3>Genres:</h3>\r\n            <div className= \"edit-genre-container\">\r\n            {movie.genres.map(g=> {\r\n                return <div key={`genre-${g.id}`} className=\"edit-genre\"><span>{g.genreName}</span><button onClick={()=> { onDelete(g.id); }} ><FontAwesomeIcon icon={faTimes} /></button></div>\r\n            })}\r\n            </div>          \r\n            <GenreSelect genres={genreList} selectedGenre={selectedGenre} setSelectedGenre={(g: IGenre)=> { setSelectedGenre(g) }} />\r\n            <button onClick={()=>{ addGenre() }}>Add</button><br/>\r\n        </div>\r\n    )\r\n}\r\nexport default GenreAdder;","import React, { useRef } from 'react'\r\nimport { IArtist } from '../../../common/artist';\r\nimport { parseDateYYYYMMDD } from '../../dateParser'\r\nimport { ESize, useImage } from '../../hooks';\r\ninterface IArtistRow{\r\n    artist: IArtist;\r\n    onClick: ()=> void;\r\n    selectedArtist: IArtist;\r\n}\r\n\r\nexport const ArtistRow: React.FC<IArtistRow> = ({artist, onClick, selectedArtist}: IArtistRow) => {\r\n    const divRef = useRef<HTMLDivElement>();\r\n    const [imgsrc, onError] = useImage(`/rewer/uploads/portraits`, `${artist.id}.jpg`, ESize.Small, true);\r\n    const select = () =>{\r\n        onClick();\r\n    } \r\n    function setSelection(): string{\r\n        if(selectedArtist == null){\r\n            return \"artist-row\";\r\n        }\r\n        if(selectedArtist.id === artist.id){\r\n            return \"artist-row selected-row\";\r\n        }\r\n        return \"artist-row\";\r\n    }\r\n    return (\r\n        <div ref={divRef} onClick={select} className={setSelection()}>\r\n                <img src={imgsrc} onError={onError}  alt={\"NOT SET\"} />\r\n                <p>{artist.name}</p>\r\n                <p title={artist.birthPlace}>{parseDateYYYYMMDD(new Date(artist.birthDate))}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ArtistRow;\r\n","import React from 'react'\r\nimport { IArtist } from '../../../common/artist'\r\nimport { useAsyncReference } from '../../hooks'\r\nimport ArtistRow from './ArtistRow'\r\nimport \"./artistStyle.css\"\r\n\r\ninterface IArtistSelector{\r\n    artistList: IArtist[];\r\n    onSelectionChanged: (selectedArtist: IArtist)=> void;\r\n}\r\n\r\nexport const ArtistSelector: React.FC<IArtistSelector> = ({artistList, onSelectionChanged}: IArtistSelector)=>{\r\n    const [selectedArtist, setSelectedArtist] = useAsyncReference(undefined);\r\n    function selectArtist(artist: IArtist){\r\n        setSelectedArtist(artist);\r\n        onSelectionChanged(selectedArtist.current);\r\n    }\r\n    return (\r\n        <div>\r\n            {artistList.map(a=> {\r\n                return <ArtistRow key={`artist-row-${a.id}`} selectedArtist={selectedArtist.current} artist={a} onClick={()=>{ selectArtist(a); }} />\r\n            })}\r\n        </div>\r\n    )\r\n}\r\nexport default ArtistSelector;","import React, { useEffect, useRef } from 'react'\r\nimport { ICastType } from '../../../common/cast';\r\n\r\ninterface ICastTypeSelect{\r\n    typeList: ICastType[];\r\n    updateValue: (selectedValue: string)=>void;\r\n    initialValue?: string;\r\n}\r\n\r\nexport const CastTypeSelect: React.FC<ICastTypeSelect> = ({typeList, updateValue, initialValue = null}: ICastTypeSelect)=>{\r\n    const select = useRef<HTMLSelectElement>();\r\n    function updateSelected(){\r\n        updateValue(select.current.value);\r\n    }\r\n    useEffect(()=>{\r\n        if(initialValue != null){\r\n            select.current.value = initialValue;\r\n        }\r\n    },[]);\r\n    return (\r\n        <select ref={select} onChange={updateSelected}>\r\n            {typeList.map(t=> {\r\n            return <option key={`castType_${t.value}`} value={t.value}>{t.name}</option>\r\n        })}\r\n        </select>\r\n       \r\n    )\r\n}\r\nexport default CastTypeSelect;\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport CastTypeSelect from './CastTypeSelect'\r\nimport \"./castStyle.css\";\r\nimport { ESize, useAsyncBinder, useImage } from '../../hooks'\r\nimport { ICast, ICastType } from '../../../common/cast';\r\nimport { castPath } from '../../callers/castCaller';\r\nimport { ECallType, postCaller } from '../../callers/caller';\r\nimport { MessageContext } from '../Messenger';\r\n\r\ninterface IEditCastRow{\r\n    cast: ICast;\r\n    castTypes: ICastType[];\r\n    onDelete: ()=>void;\r\n    onUpdate: (updated: ICast)=>void;\r\n}\r\n\r\nexport const EditCastRow: React.FC<IEditCastRow> = ({cast, castTypes, onDelete, onUpdate}: IEditCastRow) => {\r\n    const [mainClass, setMainClass] = useState(\"edit-cast-row-container\");\r\n    const [getCast, setCast, castBinder] = useAsyncBinder(cast);\r\n    const [caller, signal] = postCaller();\r\n    const [imgsrc, onImgError] = useImage(\"/rewer/uploads/portraits\", `${getCast.current.artistId}.jpg`, ESize.Small);\r\n    const { messenger } = useContext(MessageContext);\r\n    useEffect(() => {\r\n        return ()=>{\r\n            signal.abort();\r\n        }\r\n    }, [])\r\n    async function deleteRow(){\r\n        if(await caller({ id: cast.id}, castPath.deleteCast, ECallType.ISOK)){\r\n            onDelete();\r\n        }else {\r\n            messenger.addFail(\"Server error: could not delete chosen cast row.\");\r\n        }\r\n    }\r\n\r\n    async function saveChanges(){\r\n        if(await caller(getCast.current, castPath.updateCast, ECallType.ISOK)){\r\n            onUpdate(getCast.current); \r\n            saved();\r\n        } else {\r\n            messenger.addFail(\"Server error: could not save changes.\");\r\n        }\r\n    }\r\n\r\n    const setCastTypeId = (newTypeId: string) =>{\r\n        setCast({...getCast.current, castTypeId: parseInt(newTypeId)});\r\n    }\r\n\r\n    const setUnsaved = ()=>{ \r\n        if(!mainClass.includes(\"unsaved\")){\r\n            setMainClass(mainClass + \" unsaved\");\r\n        }\r\n    }\r\n\r\n    const saved = ()=>{\r\n        if(mainClass.includes(\"unsaved\")){\r\n            setMainClass(mainClass.replace(\" unsaved\", \"\"));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={mainClass}>\r\n        {window.screen.width > 600 ?\r\n        (<div className=\"edit-cast-row\">\r\n            <img src={imgsrc} onError={onImgError} alt={cast.artistName} />\r\n            <p>{getCast.current.artistName}</p>\r\n            <input name=\"name\" value={getCast.current.name} onChange={(e)=>{ castBinder(e); setUnsaved(); } } />\r\n            <CastTypeSelect typeList={castTypes} initialValue={getCast.current.castTypeId.toString()} updateValue={(newTypeId: string)=>{ setCastTypeId(newTypeId); setUnsaved();} } />\r\n            <button onClick={saveChanges} >Update</button>\r\n            <button onClick={deleteRow}>Delete</button>\r\n        </div>) :\r\n        ( <div>\r\n            <div className=\"edit-cast-row-mobile-row-1\">\r\n                <img src={imgsrc} onError={onImgError} alt={cast.artistName} />\r\n                <p>{getCast.current.artistName}</p>            \r\n            </div>\r\n            <input className=\"mobile-cast-input\" placeholder=\"Empty\" name=\"name\" value={getCast.current.name} onChange={(e)=>{ castBinder(e); setUnsaved(); } } />\r\n            <div  className=\"edit-cast-row-mobile-row-2\">\r\n                <CastTypeSelect typeList={castTypes} initialValue={getCast.current.castTypeId.toString()} updateValue={(newTypeId: string)=>{ setCastTypeId(newTypeId); setUnsaved();} } />\r\n                <button onClick={saveChanges} >Update</button>\r\n                <button onClick={deleteRow}>Delete</button>\r\n            </div>\r\n        </div>)}\r\n        </div>         \r\n    )\r\n}\r\n\r\nexport default EditCastRow;\r\n","import React from 'react'\r\nimport { ICast, ICastType } from '../../../common/cast';\r\nimport { replacedList } from '../../utils'\r\nimport EditCastRow from './EditCastRow'\r\ninterface IEditCastList{\r\n    castList: ICast[];\r\n    setCastList: (state: ICast[])=>void;\r\n    castTypes: ICastType[];\r\n}\r\nexport const EditCastList: React.FC<IEditCastList> = ({castList, setCastList, castTypes}: IEditCastList) => {\r\n    function onDelete(selectedId: number){\r\n        setCastList(castList.filter(c=> c.id !== selectedId));\r\n    }\r\n    function onUpdate(toUpdate: ICast){\r\n        setCastList(replacedList(castList, castList.find(c=> c.id === toUpdate.id), toUpdate));\r\n    }\r\n    return (\r\n        <div>\r\n            {castList.map(c=> {\r\n                return <EditCastRow key={`edit-cast-${c.id}`} onDelete={()=> { onDelete(c.id)}} cast={c} onUpdate={onUpdate} castTypes={castTypes} />\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect, Fragment, useContext } from 'react'\r\nimport { onEnter, useBinder } from '../../hooks'\r\nimport { castPath, compareCastType } from '../../callers/castCaller';\r\nimport ArtistSelector from '../artist/ArtistSelector';\r\nimport CastTypeSelect from '../cast/CastTypeSelect'\r\nimport { EditCastList } from '../cast/EditCastList';\r\nimport { Link } from  \"react-router-dom\";\r\nimport { IMovie } from \"../../../common/movie\";\r\nimport { artistPath } from '../../callers/artistCaller';\r\nimport { IArtist } from '../../../common/artist';\r\nimport { ICast } from \"../../../common/cast\";\r\nimport { ISeason } from '../../../common/season';\r\nimport { ECallType, getCaller, postCaller } from '../../callers/caller';\r\nimport { MessageContext } from '../Messenger';\r\nimport \"../cast/castStyle.css\";\r\nimport \"../movie/movieStyle.css\";\r\n\r\ninterface IEditCastList{\r\n    movie: IMovie;\r\n    setMovie: (movie: IMovie) => void;\r\n    season?: ISeason;\r\n    setEpisodes?: (episodes: IMovie[]) => void; \r\n}\r\nexport const EditCast: React.FC<IEditCastList> = ({movie, setMovie, season, setEpisodes}: IEditCastList) => {\r\n    const [castTypes, setCastTypes] = useState([]);\r\n    const [artists, setArtists] = useState([]);\r\n    const [keyword, setKeyword, bindKeyword] = useBinder({search: \"\"});\r\n    const [newCast, setNewCast, bindNewCast] = useBinder({id: 0, movieId: movie.id, artistId: 0, castTypeId: 1, name: \"\", artistName: \"Not selected\"});\r\n    const [castCaller, castSignal] = postCaller({ keyword: keyword.search, limit: 25, offset: 0 }, artistPath.selectArtistsByKeyword);\r\n    const [typeCaller, typeSignal] = getCaller(castPath.getCastTypes);\r\n    const { messenger } = useContext(MessageContext);\r\n\r\n    useEffect(()=>{     \r\n        fetchRequests();\r\n        return ()=>{\r\n            castSignal.abort();\r\n            typeSignal.abort();\r\n            messenger.clear();\r\n        }\r\n    }, []);\r\n    async function fetchRequests(){\r\n        await Promise.all([requestCastTypes(), requestArtists()]);\r\n    }\r\n    async function requestCastTypes(){\r\n        setCastTypes(await typeCaller());\r\n    }\r\n    async function requestArtists(){\r\n        setArtists(await castCaller({ keyword: keyword.search, limit: 25, offset: 0 }, artistPath.selectArtistsByKeyword, ECallType.SELECT));\r\n    }\r\n\r\n    async function addCast(){\r\n        if(newCast.artistId === 0 || newCast.artistId == null){\r\n            messenger.addWarning(\"You have choose and artist first!\", 5000);\r\n            return false;\r\n        } else{\r\n            return await insertCastRequest();\r\n        } \r\n    }\r\n\r\n    async function insertCastRequest(){\r\n        const newId = await castCaller(newCast, castPath.insertCast, ECallType.INSERT);\r\n        if(newId){\r\n            setCasts([...movie.casts, { ...newCast, id: newId }].sort(compareCastType));\r\n            setNewCast({...newCast, id: 0, name: \"\"});\r\n            return true;\r\n        } else {\r\n            messenger.addFail(\"Server error: could not add cast member.\");\r\n            return false;\r\n        }\r\n    }\r\n\r\n    async function addToEachSeason(){\r\n        if(newCast.artistId === 0 || newCast.artistId == null){\r\n            messenger.addWarning(\"You have choose and artist first!\", 5000);\r\n            return false;\r\n        }\r\n        let newCasts = [];\r\n        for(let episode of season.episodes) {\r\n            newCasts.push({...newCast, movieId: episode.id });\r\n        }\r\n        newCasts = await castCaller({ casts: newCasts }, castPath.insertCasts, ECallType.SELECT);\r\n        let newEpisodes = season.episodes;\r\n        for(let episode of newEpisodes) {\r\n            episode.casts.push(newCasts.find(c=> c.movieId === episode.id));\r\n        }\r\n        setEpisodes(newEpisodes); \r\n    }\r\n\r\n    function setCasts(newCasts: ICast[]){\r\n        setMovie({...movie, casts: newCasts});\r\n    }\r\n\r\n    function updateNewCastArtist(artist: IArtist){\r\n        setNewCast({...newCast, artistId: artist.id, artistName: artist.name});\r\n    }\r\n\r\n    function updateNewCastType(newValue: string){\r\n        setNewCast({...newCast, castTypeId: parseInt(newValue)});\r\n    }\r\n\r\n    useEffect(()=>{\r\n        setNewCast({...newCast, movieId: movie.id});\r\n    }, [movie.id]);\r\n    \r\n    return (\r\n        <div>\r\n            <div>\r\n                <h2>Cast: </h2>\r\n                <EditCastList castList={movie.casts} setCastList={setCasts} castTypes={castTypes} />\r\n            </div>\r\n            <div className=\"adder-panel\">\r\n                <h3>Add cast member:</h3>\r\n                <span className=\"artist-name\" >{newCast.artistName}</span>\r\n                <CastTypeSelect typeList={castTypes} updateValue={updateNewCastType} />\r\n                <input value={newCast.name} onChange={bindNewCast} name=\"name\" placeholder=\"As\" />\r\n                <button onClick={addCast}>Add</button>\r\n                {(movie.seasonId > 0)?\r\n                (<button onClick={addToEachSeason}>Add to each episode</button>):\r\n                (<Fragment></Fragment>)}\r\n                <br/>\r\n                <Link to=\"/rewer/editartist?artistId=0\">Create new star</Link>\r\n            </div>\r\n            <div>\r\n                <input value={keyword.search} name=\"search\" onChange={bindKeyword} onKeyDown={(e)=> { onEnter(e, requestArtists); }} placeholder=\"Search\" />\r\n                <button onClick={requestArtists}>Search</button>\r\n                <ArtistSelector artistList={artists} onSelectionChanged={updateNewCastArtist} />\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { useState, useRef } from \"react\";\r\nexport function useAsyncReference<T>(value: T) {\r\n    const ref = useRef(value);\r\n    const [, forceRender] = useState(false);\r\n    const updateState = (newState) => {\r\n        if (!Object.is(ref.current, newState)) {\r\n            ref.current = newState;\r\n            forceRender(s => !s);\r\n        }\r\n    }\r\n    return [ref, updateState] as const;\r\n}\r\n\r\nexport function useBinder<T>(value: T){\r\n    const [get, set] = useState<T>(value);\r\n    const bind = (event)=>{\r\n        set({...get, [event.target.name]: event.target.value});\r\n    }\r\n    return [get, set, bind] as const;\r\n}\r\n\r\nexport function useAsyncBinder<T>(value: T){\r\n    const ref = useRef(value);\r\n    const [, forceRender] = useState(false);\r\n    const updateState = (newState) => {\r\n        if (!Object.is(ref.current, newState)) {\r\n            ref.current = newState;\r\n            forceRender(s => !s);\r\n        }\r\n    }\r\n    const bind = (event) => {\r\n        updateState({...ref.current, [event.target.name]: event.target.value});\r\n    }\r\n    return [ref, updateState, bind] as const;\r\n}\r\n\r\nexport function useCutter(defaultText: string, defaultCutPos = 0): readonly [string, boolean, (text: string, custPos?: number)=>void]{\r\n    const [firstText, firstCut] = getCutText(defaultText, defaultCutPos > 0, defaultCutPos);\r\n    const [isCut, setIsCut] = useState(firstCut);\r\n    const [outputText, setOutputText] = useState(firstText);\r\n\r\n    const cut = (text: string, cutPos = 0) => {\r\n        const [newText, didCut] = getCutText(text, cutPos > 0, cutPos);\r\n        setOutputText(newText);\r\n        setIsCut(didCut);\r\n    }\r\n\r\n    return [outputText, isCut, cut] as const;\r\n}\r\n\r\nfunction getCutText(text: string, toCut: boolean, cutPos: number): [string, boolean]{\r\n    if(toCut && text.length > cutPos){\r\n        return [text.substring(0, cutPos) + \"...\", true];\r\n    }\r\n    return [text, false];\r\n}\r\n\r\nexport function setBinder(event, object, setter: (any)=> void){\r\n    setter({...object.current, [event.target.name]: event.target.value});\r\n}\r\n\r\nexport function onEnter(event, callback){\r\n    if (event.key === 'Enter') {\r\n        callback();\r\n    }\r\n}\r\n\r\nexport function useScroll(pos: number, callback: ()=> any): readonly [()=>void, ()=>void]{ \r\n    let newPos = pos;\r\n    if(pos > 1 || pos < 0) newPos = 0.8;\r\n    const position = useRef(newPos);\r\n    const listener = ()=>{\r\n        if((window.innerHeight + window.scrollY) >= (document.body.offsetHeight*position.current)){\r\n            callback();\r\n        }\r\n    }\r\n    const addListener = () =>{\r\n        window.addEventListener(\"scroll\", listener);\r\n    }\r\n    const removeListener = ()=>{\r\n        window.removeEventListener(\"scroll\", listener);\r\n    }\r\n    return [addListener, removeListener] as const;\r\n}\r\n\r\nexport enum ESize{\r\n    Normal = \"\",\r\n    Medium = \"medium-\",\r\n    Small = \"small-\",\r\n}\r\n\r\nexport function useImage(path: string, fileName: string, size = ESize.Normal, tryAgain = false){\r\n    const [imgSrc, setImgSrc] = useState<string>(`${path}/${size}${fileName}`);\r\n    const tryAgainRef = useRef(tryAgain);\r\n    const onError= () =>{\r\n        if(tryAgainRef.current){\r\n            setImgSrc(`${path}/${ESize.Normal}${fileName}`);\r\n            tryAgainRef.current = false;\r\n        } else {\r\n            setImgSrc(`${path}/${size}0.jpg`);\r\n        }\r\n    }\r\n    const imgSrcSetter = (newPath: string, newFileName: string) => {\r\n        setImgSrc(`${newPath}/${size}${newFileName}`);\r\n    }\r\n    return [imgSrc, onError, imgSrcSetter] as const;\r\n}\r\n\r\nexport interface IWindowState{\r\n    name: string;\r\n    maxValue: number;\r\n}\r\n\r\nexport function useWidth(defWindowStates: IWindowState[]){\r\n    const windowsStates = useRef(defWindowStates.sort(compareWindowStates));\r\n    const [currentWindowState, setCurrentWindowState] = useState(windowsStates.current.find(w=> w.maxValue > window.innerWidth));\r\n    const listen = ()=>{\r\n        window.addEventListener(\"resize\", ()=>{\r\n            windowStateSetter();\r\n        });\r\n    }\r\n    const cleanUpListener = ()=>{\r\n        window.removeEventListener(\"resize\", ()=>{\r\n            windowStateSetter();\r\n        });\r\n    }\r\n    const windowStateSetter = ()=>{\r\n        setCurrentWindowState(windowsStates.current.find(w=> w.maxValue > window.innerWidth));\r\n    }\r\n    return [currentWindowState, listen, cleanUpListener] as const;\r\n}\r\n\r\nfunction compareWindowStates(wstate1: IWindowState, wstate2: IWindowState){\r\n    if(wstate1.maxValue < wstate2.maxValue) return -1;\r\n    if(wstate1.maxValue > wstate2.maxValue) return 1;\r\n    return 0;\r\n}","export function parseDateHun(date: Date): string{\r\n    return `${date.getFullYear()}. ${monthNames[date.getMonth()]} ${date.getDate()}. ${parseDatehhdd(date)}`;\r\n}\r\n\r\nexport function parseDateYYYYMMDD(date: Date):string{\r\n    return `${date.getFullYear()}. ${monthNames[date.getMonth()]} ${date.getDate()}`;\r\n}\r\n\r\nexport function parseDatehhdd(date: Date):string{\r\n    if(date.getMinutes() < 10){\r\n        return `${date.getHours()}:0${date.getMinutes()}`;\r\n    } else {\r\n        return `${date.getHours()}:${date.getMinutes()}`;\r\n    }\r\n}\r\n\r\nexport function getYear(date: string){\r\n    return new Date(date).getFullYear();\r\n}\r\n\r\nexport function getMonth(date: string){\r\n    return monthNames[new Date(date).getMonth()]; \r\n}\r\n\r\nexport function getDay(date: string){\r\n    return new Date(date).getDate();\r\n}\r\n\r\nexport function normalFormat(date: string): string{\r\n    let d = new Date(date);\r\n    return `${d.getDate()} ${monthNames[d.getMonth()]} ${d.getFullYear()}`;\r\n}\r\n\r\nexport function parseForInput(date: Date): string{\r\n    let month: string;\r\n    let day: string;\r\n    if(date.getMonth() < 9){\r\n        month = `0${date.getMonth()+1}`;\r\n    } else {\r\n        month = (date.getMonth()+1).toString();\r\n    }\r\n    if(date.getDate() < 10){\r\n        day = `0${date.getDate()}`;\r\n    } else {\r\n        day = date.getDate().toString();\r\n    }\r\n\r\n    return `${date.getFullYear()}-${month}-${day}`;\r\n}\r\n\r\nexport let monthNames = [\"Janury\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n","import { IGenre, IMovieGenre, ISeriesGenre } from \"../../common/genre\";\r\nimport { UploadFile } from \"../callers/caller\";\r\n\r\nexport const moviePath = {\r\n    selectDetailedMovie: \"/movie/select_detailed_movie\",\r\n    selectLatestMovies: \"/movie/select_latest_movies\",\r\n    selectLatestMoviesJson: \"/jsondb/latest_movies.json\",\r\n    selectLatestMoviesByGenre: \"/movie/select_latest_movies_by_genre\",\r\n    selectMoviesByScore: \"/movie/select_movies_by_score\",\r\n    getGenres: \"/jsondb/genres.json\",\r\n    insertMovie: \"/movie/insert_movie\",\r\n    updateMovie: \"/movie/update_movie\",\r\n    deleteMovie: \"/movie/delete_movie\",\r\n    uploadPoster: \"/movie/upload_poster\",\r\n    insertMovieGenre: \"/genre/insert_movie_genre\",\r\n    deleteMovieGenre: \"/genre/delete_movie_genre\",\r\n    selectUpcomingMovies: \"/movie/select_upcoming_movies\",\r\n    selectUpcomingMoviesJson: \"/jsondb/upcoming_movies.json\"\r\n}\r\n\r\nexport async function uploadPoster(file: FormData): Promise<boolean>{\r\n    const response = await UploadFile(\"/movie/upload_poster\", file);\r\n    if(response.ok){\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function compareGenresByName(genre1: IGenre, genre2: IGenre){\r\n    return genre1.name.localeCompare(genre2.name);\r\n}\r\n\r\nexport function compareMovieGenresByName(genre1: IMovieGenre | ISeriesGenre, genre2: IMovieGenre | ISeriesGenre){\r\n    return genre1.genreName.localeCompare(genre2.genreName);\r\n}","import { ICast, IMovieCast } from \"../../common/cast\";\r\n\r\nexport const castPath = {\r\n    getCastTypes: \"/jsondb/cast_types.json\",\r\n    insertCast: \"/cast/insert_cast\",\r\n    insertCasts: \"/cast/insert_casts\",\r\n    updateCast: \"/cast/update_cast\",\r\n    deleteCast: \"/cast/delete_cast\"\r\n}\r\n\r\nexport function compareCastType(cast1: ICast, cast2: ICast){\r\n    if(cast1.castTypeId < cast2.castTypeId){\r\n        return -1;\r\n    }\r\n    if(cast1.castTypeId > cast2.castTypeId){\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n\r\nexport function compareDate(cast1: IMovieCast, cast2: IMovieCast){\r\n    if(new Date(cast1.movieDate) < new Date(cast2.movieDate)){\r\n        return -1;\r\n    }\r\n    if(new Date(cast1.movieDate) > new Date(cast2.movieDate)){\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n","export const itemReplacer = (array, oldItem, newItem) => {\r\n  array.map(item=> item === oldItem? newItem : item);\r\n}\r\n\r\nexport const replacedList = (array, oldItem, newItem) => {\r\n  return array.map(item=> item === oldItem? newItem : item);\r\n}\r\n\r\nexport async function resizeImageFn(file, maxWidth: number, maxHeight: number, quality = 1) {\r\n  const Compress = require('compress.js');\r\n  const compress = new Compress();\r\n  const resizedImage = await compress.compress([file], {\r\n    size: 1,\r\n    quality: quality, \r\n    maxWidth: maxWidth, \r\n    maxHeight: maxHeight, \r\n    resize: true\r\n  })\r\n  const img = resizedImage[0];\r\n  const base64str = img.data;\r\n  const imgExt = img.ext;\r\n  const resizedFiile = Compress.convertBase64ToFile(base64str, imgExt);\r\n  return resizedFiile;\r\n}","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Compress\"] = factory();\n\telse\n\t\troot[\"Compress\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Compress\"] = factory();\n\telse\n\t\troot[\"Compress\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(1), __webpack_require__(2), __webpack_require__(3), __webpack_require__(4), __webpack_require__(5), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(module, require('./core/base64.js'), require('./core/converter.js'), require('./core/file.js'), require('./core/image.js'), require('./core/photo.js'), require('./core/rotate.js'));\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod, global.base64, global.converter, global.file, global.image, global.photo, global.rotate);\n\t    global.Compress = mod.exports;\n\t  }\n\t})(this, function (module, _base, _converter, _file, _image, _photo, _rotate) {\n\t  'use strict';\n\t\n\t  var _base2 = _interopRequireDefault(_base);\n\t\n\t  var _converter2 = _interopRequireDefault(_converter);\n\t\n\t  var _file2 = _interopRequireDefault(_file);\n\t\n\t  var _image2 = _interopRequireDefault(_image);\n\t\n\t  var _photo2 = _interopRequireDefault(_photo);\n\t\n\t  var _rotate2 = _interopRequireDefault(_rotate);\n\t\n\t  function _interopRequireDefault(obj) {\n\t    return obj && obj.__esModule ? obj : {\n\t      default: obj\n\t    };\n\t  }\n\t\n\t  function _toConsumableArray(arr) {\n\t    if (Array.isArray(arr)) {\n\t      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n\t        arr2[i] = arr[i];\n\t      }\n\t\n\t      return arr2;\n\t    } else {\n\t      return Array.from(arr);\n\t    }\n\t  }\n\t\n\t  function _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t      throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t  }\n\t\n\t  var _createClass = function () {\n\t    function defineProperties(target, props) {\n\t      for (var i = 0; i < props.length; i++) {\n\t        var descriptor = props[i];\n\t        descriptor.enumerable = descriptor.enumerable || false;\n\t        descriptor.configurable = true;\n\t        if (\"value\" in descriptor) descriptor.writable = true;\n\t        Object.defineProperty(target, descriptor.key, descriptor);\n\t      }\n\t    }\n\t\n\t    return function (Constructor, protoProps, staticProps) {\n\t      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t      if (staticProps) defineProperties(Constructor, staticProps);\n\t      return Constructor;\n\t    };\n\t  }();\n\t\n\t  var Compress = function () {\n\t    function Compress() {\n\t      _classCallCheck(this, Compress);\n\t    }\n\t\n\t    _createClass(Compress, [{\n\t      key: 'attach',\n\t      value: function attach(el, options) {\n\t        var _this = this;\n\t\n\t        return new Promise(function (resolve, reject) {\n\t          var input = document.querySelector(el);\n\t          input.setAttribute('accept', 'image/*');\n\t          input.addEventListener('change', function (evt) {\n\t            var output = _this.compress([].concat(_toConsumableArray(evt.target.files)), options);\n\t            resolve(output);\n\t          }, false);\n\t        });\n\t      }\n\t    }, {\n\t      key: 'compress',\n\t      value: function compress(files, options) {\n\t        function compressFile(file, options) {\n\t          var photo = new _photo2.default(options);\n\t          photo.start = window.performance.now();\n\t          photo.alt = file.name;\n\t          photo.ext = file.type;\n\t          photo.startSize = file.size;\n\t\n\t          return _rotate2.default.orientation(file).then(function (orientation) {\n\t            photo.orientation = orientation;\n\t            return _file2.default.load(file);\n\t          }).then(compressImage(photo));\n\t        }\n\t        function compressImage(photo) {\n\t          return function (src) {\n\t            return _image2.default.load(src).then(function (img) {\n\t              photo.startWidth = img.naturalWidth;\n\t              photo.startHeight = img.naturalHeight;\n\t\n\t              if (photo.resize) {\n\t                var _Image$resize = _image2.default.resize(photo.maxWidth, photo.maxHeight)(img.naturalWidth, img.naturalHeight),\n\t                    width = _Image$resize.width,\n\t                    height = _Image$resize.height;\n\t\n\t                photo.endWidth = width;\n\t                photo.endHeight = height;\n\t              } else {\n\t                photo.endWidth = img.naturalWidth;\n\t                photo.endHeight = img.naturalHeight;\n\t              }\n\t              return _converter2.default.imageToCanvas(photo.endWidth, photo.endHeight, photo.orientation)(img);\n\t            }).then(function (canvas) {\n\t              photo.iterations = 1;\n\t\n\t              photo.base64prefix = _base2.default.prefix(photo.ext);\n\t              return loopCompression(canvas, photo.startSize, photo.quality, photo.size, photo.minQuality, photo.iterations);\n\t            }).then(function (base64) {\n\t              photo.finalSize = _base2.default.size(base64);\n\t              return _base2.default.data(base64);\n\t            }).then(function (data) {\n\t              photo.end = window.performance.now();\n\t              var difference = photo.end - photo.start;\n\t\n\t              return {\n\t                data: data,\n\t                prefix: photo.base64prefix,\n\t                elapsedTimeInSeconds: difference / 1000,\n\t                alt: photo.alt,\n\t                initialSizeInMb: _converter2.default.size(photo.startSize).MB,\n\t                endSizeInMb: _converter2.default.size(photo.finalSize).MB,\n\t                ext: photo.ext,\n\t                quality: photo.quality,\n\t                endWidthInPx: photo.endWidth,\n\t                endHeightInPx: photo.endHeight,\n\t                initialWidthInPx: photo.startWidth,\n\t                initialHeightInPx: photo.startHeight,\n\t                sizeReducedInPercent: (photo.startSize - photo.finalSize) / photo.startSize * 100,\n\t                iterations: photo.iterations\n\t              };\n\t            });\n\t          };\n\t        }\n\t        function loopCompression(canvas, size) {\n\t          var quality = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t          var targetSize = arguments[3];\n\t          var targetQuality = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\t          var iterations = arguments[5];\n\t\n\t          var base64str = _converter2.default.canvasToBase64(canvas, quality);\n\t          var newSize = _base2.default.size(base64str);\n\t\n\t          iterations += 1;\n\t\n\t          if (newSize > targetSize) {\n\t            return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations);\n\t          }\n\t\n\t          if (quality > targetQuality) {\n\t            return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations);\n\t          }\n\t\n\t          if (quality < 0.5) {\n\t            return base64str;\n\t          }\n\t          return base64str;\n\t        }\n\t        return Promise.all(files.map(function (file) {\n\t          return compressFile(file, options);\n\t        }));\n\t      }\n\t    }], [{\n\t      key: 'convertBase64ToFile',\n\t      value: function convertBase64ToFile(base64, mime) {\n\t        return _converter2.default.base64ToFile(base64, mime);\n\t      }\n\t    }]);\n\t\n\t    return Compress;\n\t  }();\n\t\n\t  module.exports = Compress;\n\t});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.base64 = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t  var size = function size(base64) {\n\t    var len = base64.replace(/^data:image\\/\\w+;base64,/, '').length;\n\t    return (len - 814) / 1.37;\n\t  };\n\t\n\t  var mime = function mime(base64) {\n\t    return base64.split(';')[0].match(/jpeg|png|gif/)[0];\n\t  };\n\t\n\t  var data = function data(base64) {\n\t    return base64.replace(/^data:image\\/\\w+;base64,/, '');\n\t  };\n\t\n\t  var prefix = function prefix(ext) {\n\t    return 'data:' + ext + ';base64,';\n\t  };\n\t\n\t  exports.default = { size: size, mime: mime, data: data, prefix: prefix };\n\t});\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.converter = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var base64ToFile = function base64ToFile(base64) {\n\t    var mime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'image/jpeg';\n\t\n\t    var byteString = window.atob(base64);\n\t    var content = [];\n\t    for (var i = 0; i < byteString.length; i++) {\n\t      content[i] = byteString.charCodeAt(i);\n\t    }\n\t    return new window.Blob([new Uint8Array(content)], { type: mime });\n\t  };\n\t\n\t  var imageToCanvas = function imageToCanvas(width, height, orientation) {\n\t    var canvas = document.createElement('canvas');\n\t    var context = canvas.getContext('2d');\n\t\n\t    canvas.width = width;\n\t    canvas.height = height;\n\t\n\t\n\t    return function (image) {\n\t      if (!orientation || orientation > 8) {\n\t        context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\t        return canvas;\n\t      }\n\t      if (orientation > 4) {\n\t        canvas.width = height;\n\t        canvas.height = width;\n\t      }\n\t      switch (orientation) {\n\t        case 2:\n\t          context.translate(width, 0);\n\t          context.scale(-1, 1);\n\t          break;\n\t        case 3:\n\t          context.translate(width, height);\n\t          context.rotate(Math.PI);\n\t          break;\n\t        case 4:\n\t          context.translate(0, height);\n\t          context.scale(1, -1);\n\t          break;\n\t        case 5:\n\t          context.rotate(0.5 * Math.PI);\n\t          context.scale(1, -1);\n\t          break;\n\t        case 6:\n\t          context.rotate(0.5 * Math.PI);\n\t          context.translate(0, -height);\n\t          break;\n\t        case 7:\n\t          context.rotate(0.5 * Math.PI);\n\t          context.translate(width, -height);\n\t          context.scale(-1, 1);\n\t          break;\n\t        case 8:\n\t          context.rotate(-0.5 * Math.PI);\n\t          context.translate(-width, 0);\n\t          break;\n\t      }\n\t      if (orientation > 4) {\n\t        context.drawImage(image, 0, 0, canvas.height, canvas.width);\n\t      } else {\n\t        context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\t      }\n\t      return canvas;\n\t    };\n\t  };\n\t\n\t  var canvasToBase64 = function canvasToBase64(canvas) {\n\t    var quality = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.75;\n\t\n\t    var base64 = canvas.toDataURL('image/jpeg', quality);\n\t    return base64;\n\t  };\n\t\n\t  var size = function size(_size) {\n\t    return {\n\t      KB: _size / 1000,\n\t      MB: _size / (1000 * 1000)\n\t    };\n\t  };\n\t\n\t  exports.default = { base64ToFile: base64ToFile, imageToCanvas: imageToCanvas, canvasToBase64: canvasToBase64, size: size };\n\t});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.file = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var load = function load(file) {\n\t    return new Promise(function (resolve, reject) {\n\t      var fileReader = new window.FileReader();\n\t      fileReader.addEventListener('load', function (evt) {\n\t        resolve(evt.target.result);\n\t      }, false);\n\t\n\t      fileReader.addEventListener('error', function (err) {\n\t        reject(err);\n\t      }, false);\n\t\n\t      fileReader.readAsDataURL(file);\n\t    });\n\t  };\n\t\n\t  exports.default = { load: load };\n\t});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.image = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var load = function load(src) {\n\t    return new Promise(function (resolve, reject) {\n\t      var img = new window.Image();\n\t      img.addEventListener('load', function () {\n\t        resolve(img);\n\t      }, false);\n\t\n\t      img.addEventListener('error', function (err) {\n\t        reject(err);\n\t      }, false);\n\t\n\t      img.src = src;\n\t    });\n\t  };\n\t\n\t  var resize = function resize(targetWidth, targetHeight) {\n\t    return function (width, height) {\n\t      if (!targetWidth && !targetHeight) return { width: width, height: height };\n\t\n\t      var originalAspectRatio = width / height;\n\t      var targetAspectRatio = targetWidth / targetHeight;\n\t\n\t      var outputWidth = void 0,\n\t          outputHeight = void 0;\n\t\n\t      if (originalAspectRatio > targetAspectRatio) {\n\t        outputWidth = Math.min(width, targetWidth);\n\t        outputHeight = outputWidth / originalAspectRatio;\n\t      } else {\n\t        outputHeight = Math.min(height, targetHeight);\n\t        outputWidth = outputHeight * originalAspectRatio;\n\t      }\n\t\n\t      return { width: outputWidth, height: outputHeight };\n\t    };\n\t  };\n\t\n\t  exports.default = { load: load, resize: resize };\n\t});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.photo = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  \"use strict\";\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  function _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t      throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t  }\n\t\n\t  var Photo = function Photo(_ref) {\n\t    var _ref$quality = _ref.quality,\n\t        quality = _ref$quality === undefined ? 0.75 : _ref$quality,\n\t        _ref$size = _ref.size,\n\t        size = _ref$size === undefined ? 2 : _ref$size,\n\t        _ref$maxWidth = _ref.maxWidth,\n\t        maxWidth = _ref$maxWidth === undefined ? 1920 : _ref$maxWidth,\n\t        _ref$maxHeight = _ref.maxHeight,\n\t        maxHeight = _ref$maxHeight === undefined ? 1920 : _ref$maxHeight,\n\t        _ref$resize = _ref.resize,\n\t        resize = _ref$resize === undefined ? true : _ref$resize;\n\t\n\t    _classCallCheck(this, Photo);\n\t\n\t    this.start = window.performance.now();\n\t    this.end = null;\n\t\n\t    this.alt = null;\n\t    this.ext = null;\n\t    this.startSize = null;\n\t    this.startWidth = null;\n\t    this.startHeight = null;\n\t\n\t    this.size = size * 1000 * 1000;\n\t    this.endSize = null;\n\t    this.endWidth = null;\n\t    this.endHeight = null;\n\t    this.iterations = 0;\n\t    this.base64prefix = null;\n\t\n\t    this.quality = quality;\n\t    this.resize = resize;\n\t    this.maxWidth = maxWidth;\n\t    this.maxHeight = maxHeight;\n\t    this.orientation = 1;\n\t  };\n\t\n\t  exports.default = Photo;\n\t});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.rotate = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  \"use strict\";\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t\n\t  var orientation = function orientation(file) {\n\t    return new Promise(function (resolve, reject) {\n\t      var reader = new window.FileReader();\n\t\n\t      reader.onload = function (event) {\n\t        var view = new DataView(event.target.result);\n\t\n\t        if (view.getUint16(0, false) !== 0xFFD8) {\n\t          resolve(-2);\n\t        }\n\t        var length = view.byteLength;\n\t        var offset = 2;\n\t\n\t        while (offset < length) {\n\t          var marker = view.getUint16(offset, false);\n\t          offset += 2;\n\t\n\t          if (marker === 0xFFE1) {\n\t            if (view.getUint32(offset += 2, false) !== 0x45786966) {\n\t              resolve(-1);\n\t            }\n\t            var little = view.getUint16(offset += 6, false) === 0x4949;\n\t            offset += view.getUint32(offset + 4, little);\n\t            var tags = view.getUint16(offset, little);\n\t            offset += 2;\n\t\n\t            for (var i = 0; i < tags; i++) {\n\t              if (view.getUint16(offset + i * 12, little) === 0x0112) {\n\t                resolve(view.getUint16(offset + i * 12 + 8, little));\n\t              }\n\t            }\n\t          } else if ((marker & 0xFF00) !== 0xFF00) break;else offset += view.getUint16(offset, false);\n\t        }\n\t        resolve(-1);\n\t      };\n\t      reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n\t    });\n\t  };\n\t\n\t  exports.default = { orientation: orientation };\n\t});\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5c04cbde4fb824613eb6","import Base64 from './core/base64.js'\nimport Converter from './core/converter.js'\nimport File from './core/file.js'\nimport Image from './core/image.js'\nimport Photo from './core/photo.js'\nimport Rotate from './core/rotate.js'\n\nclass Compress {\n  attach (el, options) {\n    return new Promise((resolve, reject) => {\n      const input = document.querySelector(el)\n      input.setAttribute('accept', 'image/*')\n      input.addEventListener('change', (evt) => {\n        const output = this.compress([...evt.target.files], options)\n        resolve(output)\n      }, false)\n    })\n  }\n\n  compress (files, options) {\n    function compressFile (file, options) {\n      // Create a new photo object\n      const photo = new Photo(options)\n      photo.start = window.performance.now()\n      photo.alt = file.name\n      photo.ext = file.type\n      photo.startSize = file.size\n\n      return Rotate.orientation(file)\n      .then((orientation) => {\n        photo.orientation = orientation\n        return File.load(file)\n      })\n      .then(compressImage(photo))\n    }\n    function compressImage (photo) {\n      return (src) => {\n        return Image.load(src).then((img) => {\n          // Store the initial dimensions\n          photo.startWidth = img.naturalWidth\n          photo.startHeight = img.naturalHeight\n          // Resize the image\n          if (photo.resize) {\n            const { width, height } = Image.resize(photo.maxWidth, photo.maxHeight)(img.naturalWidth, img.naturalHeight)\n            photo.endWidth = width\n            photo.endHeight = height\n          } else {\n            photo.endWidth = img.naturalWidth\n            photo.endHeight = img.naturalHeight\n          }\n          return Converter.imageToCanvas(photo.endWidth, photo.endHeight, photo.orientation)(img)\n        })\n        .then((canvas) => {\n          photo.iterations = 1\n          // Base64.mime(Converter.canvasToBase64(canvas))\n          photo.base64prefix = Base64.prefix(photo.ext)\n          return loopCompression(canvas, photo.startSize, photo.quality, photo.size, photo.minQuality, photo.iterations)\n        })\n        .then((base64) => {\n          photo.finalSize = Base64.size(base64)\n          return Base64.data(base64)\n        })\n        .then((data) => {\n          photo.end = window.performance.now()\n          const difference = photo.end - photo.start // in ms\n\n          return {\n            data: data,\n            prefix: photo.base64prefix,\n            elapsedTimeInSeconds: difference / 1000, // in seconds\n            alt: photo.alt,\n            initialSizeInMb: Converter.size(photo.startSize).MB,\n            endSizeInMb: Converter.size(photo.finalSize).MB,\n            ext: photo.ext,\n            quality: photo.quality,\n            endWidthInPx: photo.endWidth,\n            endHeightInPx: photo.endHeight,\n            initialWidthInPx: photo.startWidth,\n            initialHeightInPx: photo.startHeight,\n            sizeReducedInPercent: (photo.startSize - photo.finalSize) / photo.startSize * 100,\n            iterations: photo.iterations\n          }\n        })\n      }\n    }\n    function loopCompression (canvas, size, quality = 1, targetSize, targetQuality = 1, iterations) {\n      const base64str = Converter.canvasToBase64(canvas, quality)\n      const newSize = Base64.size(base64str)\n      // const base64str = convertCanvasToBase64(src)\n      // const size = getFileSize(base64str);\n      iterations += 1\n      // add in iteration count\n      if (newSize > targetSize) {\n        return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations)\n      }\n\n      if (quality > targetQuality) {\n        return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations)\n      }\n\n      if (quality < 0.5) {\n        return base64str\n      }\n      return base64str\n    }\n    return Promise.all(files.map((file) => {\n      return compressFile(file, options)\n    }))\n  }\n  static convertBase64ToFile (base64, mime) {\n    return Converter.base64ToFile(base64, mime)\n  }\n}\n\n// Supported input formats\n// image/png, image/jpeg, image/jpg, image/gif, image/bmp, image/tiff, image/x-icon,  image/svg+xml, image/webp, image/xxx\n// image/png, image/jpeg, image/webp\nmodule.exports = Compress\n\n\n\n// WEBPACK FOOTER //\n// ./src/Compress.js","const size = (base64) => {\n  const len = base64.replace(/^data:image\\/\\w+;base64,/, '').length\n  return (len - 814) / 1.37\n  // return len * 3 / 4\n}\n\n// strip off the data: url prefix to get just the base64-encoded bytes\n// var data = img.replace(/^data:image\\/\\w+;base64,/, \"\");\nconst mime = (base64) => {\n  return base64.split(';')[0].match(/jpeg|png|gif/)[0]\n}\n\nconst data = (base64) => {\n  return base64.replace(/^data:image\\/\\w+;base64,/, '')\n}\n\nconst prefix = (ext) => {\n  return `data:${ext};base64,`\n}\n\nexport default { size, mime, data, prefix }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/base64.js","\nconst base64ToFile = (base64, mime = 'image/jpeg') => {\n  const byteString = window.atob(base64)\n  const content = []\n  for (let i = 0; i < byteString.length; i++) {\n    content[i] = byteString.charCodeAt(i)\n  }\n  return new window.Blob([new Uint8Array(content)], {type: mime})\n}\n\nconst imageToCanvas = (width, height, orientation) => {\n  const canvas = document.createElement('canvas')\n  const context = canvas.getContext('2d')\n\n  canvas.width = width\n  canvas.height = height\n  // canvas.style.width = width\n  // canvas.style.height = height\n\n  return (image) => {\n    if (!orientation || orientation > 8) {\n      context.drawImage(image, 0, 0, canvas.width, canvas.height)\n      return canvas\n    }\n    if (orientation > 4) {\n      canvas.width = height\n      canvas.height = width\n      // canvas.style.width = height\n      // canvas.style.height = width\n    }\n    switch (orientation) {\n      case 2:\n        // horizontal flip\n        context.translate(width, 0)\n        context.scale(-1, 1)\n        break\n      case 3:\n        // 180° rotate left\n        context.translate(width, height)\n        context.rotate(Math.PI)\n        break\n      case 4:\n        // vertical flip\n        context.translate(0, height)\n        context.scale(1, -1)\n        break\n      case 5:\n        // vertical flip + 90 rotate right\n        context.rotate(0.5 * Math.PI)\n        context.scale(1, -1)\n        break\n      case 6:\n        // 90° rotate right\n        context.rotate(0.5 * Math.PI)\n        context.translate(0, -height)\n        break\n      case 7:\n        // horizontal flip + 90 rotate right\n        context.rotate(0.5 * Math.PI)\n        context.translate(width, -height)\n        context.scale(-1, 1)\n        break\n      case 8:\n        // 90° rotate left\n        context.rotate(-0.5 * Math.PI)\n        context.translate(-width, 0)\n        break\n    }\n    if (orientation > 4) {\n      context.drawImage(image, 0, 0, canvas.height, canvas.width)\n    } else {\n      context.drawImage(image, 0, 0, canvas.width, canvas.height)\n    }\n    return canvas\n  }\n}\n\nconst canvasToBase64 = (canvas, quality = 0.75) => {\n  // in order to compress the final image format has to be jpeg\n  const base64 = canvas.toDataURL('image/jpeg', quality)\n  return base64\n}\n\n// const canvasToImage = (canvas, quality=.75, mimeType='image/jpeg') => {\n//   const image = new Image()\n//   const base64str = canvas.toDataURL(mimeType, quality)\n//   image.src = base64str\n//   return image\n// }\n\nconst size = (size) => {\n  return {\n    KB: size / 1000,\n    MB: size / (1000 * 1000)\n  }\n}\n\nexport default { base64ToFile, imageToCanvas, canvasToBase64, size }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/converter.js","\nconst load = (file) => {\n  return new Promise((resolve, reject) => {\n    const fileReader = new window.FileReader()\n    fileReader.addEventListener('load', (evt) => {\n      resolve(evt.target.result)\n    }, false)\n\n    fileReader.addEventListener('error', (err) => {\n      reject(err)\n    }, false)\n\n    fileReader.readAsDataURL(file)\n  })\n}\n\nexport default { load }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/file.js","\nconst load = (src) => {\n  return new Promise((resolve, reject) => {\n    const img = new window.Image()\n    img.addEventListener('load', () => {\n      resolve(img)\n    }, false)\n\n    img.addEventListener('error', (err) => {\n      reject(err)\n    }, false)\n\n    img.src = src\n  })\n}\n  /*\n   * Resize the image based on the given height or width boundary.\n   * Auto resize based on aspect ratio.\n  **/\nconst resize = (targetWidth, targetHeight) => {\n  return (width, height) => {\n    if (!targetWidth && !targetHeight) return { width, height }\n\n    const originalAspectRatio = width / height\n    const targetAspectRatio = targetWidth / targetHeight\n\n    let outputWidth, outputHeight\n\n    if (originalAspectRatio > targetAspectRatio) {\n      outputWidth = Math.min(width, targetWidth)\n      outputHeight = outputWidth / originalAspectRatio\n    } else {\n      outputHeight = Math.min(height, targetHeight)\n      outputWidth = outputHeight * originalAspectRatio\n    }\n\n    return { width: outputWidth, height: outputHeight }\n  }\n}\n\nexport default { load, resize }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/image.js","// The photo model\nclass Photo {\n  constructor ({ quality = 0.75, size = 2, maxWidth = 1920, maxHeight = 1920, resize = true }) {\n    this.start = window.performance.now()\n    this.end = null\n\n    this.alt = null\n    this.ext = null\n    this.startSize = null\n    this.startWidth = null\n    this.startHeight = null\n    // How much will the quality decrease by each compression\n    // this.stepQuality = stepQuality\n\n    // size in MB\n    this.size = size * 1000 * 1000\n    this.endSize = null\n    this.endWidth = null\n    this.endHeight = null\n    this.iterations = 0\n    this.base64prefix = null\n    // Carry out image resizing\n    this.quality = quality\n    this.resize = resize\n    this.maxWidth = maxWidth\n    this.maxHeight = maxHeight\n    this.orientation = 1\n  }\n}\nexport default Photo\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/photo.js","// https://stackoverflow.com/questions/20600800/js-client-side-exif-orientation-rotate-and-mirror-jpeg-images/31273162#31273162\n\nconst orientation = (file) => {\n  return new Promise((resolve, reject) => {\n    const reader = new window.FileReader()\n\n    reader.onload = function (event) {\n      var view = new DataView(event.target.result)\n\n      if (view.getUint16(0, false) !== 0xFFD8) {\n        resolve(-2)\n      }\n      const length = view.byteLength\n      let offset = 2\n\n      while (offset < length) {\n        const marker = view.getUint16(offset, false)\n        offset += 2\n\n        if (marker === 0xFFE1) {\n          if (view.getUint32(offset += 2, false) !== 0x45786966) {\n            resolve(-1)\n          }\n          const little = view.getUint16(offset += 6, false) === 0x4949\n          offset += view.getUint32(offset + 4, little)\n          const tags = view.getUint16(offset, little)\n          offset += 2\n\n          for (let i = 0; i < tags; i++) {\n            if (view.getUint16(offset + (i * 12), little) === 0x0112) {\n              resolve(view.getUint16(offset + (i * 12) + 8, little))\n            }\n          }\n        } else if ((marker & 0xFF00) !== 0xFF00) break\n        else offset += view.getUint16(offset, false)\n      }\n      resolve(-1)\n    }\n    reader.readAsArrayBuffer(file.slice(0, 64 * 1024))\n  })\n}\n\nexport default { orientation }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/rotate.js","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from 'react'\r\nimport { IGenre } from '../../../common/genre';\r\n\r\ninterface IGenreSelect{\r\n    selectedGenre: IGenre;\r\n    setSelectedGenre: (g: IGenre) => void;\r\n    genres: IGenre[];\r\n    any?: boolean;\r\n}\r\n\r\nexport const GenreSelect: React.FC<IGenreSelect> = ({genres, setSelectedGenre, selectedGenre, any}: IGenreSelect)=> {\r\n    const [getGenres, setGenres] = useState([]);\r\n    useEffect(()=>{\r\n        if(any){\r\n            setGenres([{id: 0, name: \"Any\"}, ...genres]);\r\n        } else {\r\n            setGenres(genres);\r\n        }\r\n    }, [genres]);\r\n    return (\r\n        <select value={selectedGenre.id.toString()} onChange={(e)=> { setSelectedGenre(getGenres.find(g=> g.id === parseInt(e.target.value))) }} >\r\n            {getGenres.map(g=> {\r\n                return <option key={`opt${g.id}`} value={g.id}>{g.name}</option>\r\n            })}\r\n        </select>\r\n    )\r\n}\r\n","export const artistPath = {\r\n    selectArtistsByKeyword: \"/artist/select_artists_by_keyword\",\r\n    selectDetailedArtist: \"/artist/select_detailed_artist\",\r\n    insertArtist: \"/artist/insert_artist\",\r\n    updateArtist: \"/artist/update_artist\",\r\n    uploadPortrait: \"/artist/upload_portrait\"\r\n}"],"sourceRoot":""}