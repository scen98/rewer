(this.webpackJsonprewer=this.webpackJsonprewer||[]).push([[12],{110:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return u}));var r=a(0),n=a.n(r),c=a(95),s=a(97),l=a(91),o=a(69),i=a(98);function u(){return Object(r.useEffect)((function(){document.title="Follows - Rewer"}),[]),n.a.createElement(r.Fragment,null,window.screen.width>1100?n.a.createElement("div",{className:"main-grid"},n.a.createElement("div",{className:"left-item"},n.a.createElement("div",{className:"side-container medium-side"},n.a.createElement(s.a,null)),n.a.createElement("div",{className:"side-container medium-side"},n.a.createElement(l.a,null))),n.a.createElement("div",{className:"main-item"},n.a.createElement(c.a,null)),n.a.createElement("div",{className:"right-item"},n.a.createElement("div",{className:"side-container medium-side"},n.a.createElement(i.a,{length:10})),n.a.createElement("div",{className:"side-container medium-side"},n.a.createElement(o.a,null)))):n.a.createElement("div",{className:"main-container"},n.a.createElement(c.a,null)))}},63:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a(12),n=a(0),c=a.n(n),s=a(11),l=a(60),o=a(57),i=a(56),u=(a(58),function(e){var t=e.movie,a=e.cutPos,u=void 0===a?70:a,m=Object(i.g)("/rewer/uploads/posters","".concat(t.id,".jpg"),i.a.Small),f=Object(r.a)(m,2),p=f[0],d=f[1],v=Object(n.useState)(""),E=Object(r.a)(v,2),b=E[0],w=E[1],g=Object(i.f)(t.summary,u),j=Object(r.a)(g,1)[0];return Object(n.useEffect)((function(){t.avgScore>6?w("high-poster"):t.avgScore>3?w("medium-poster"):t.avgScore>0?w("low-poster"):w(""),window.screen.width}),[t]),c.a.createElement(s.b,{className:"movie-row-grid",to:"/rewer/movie?movieId=".concat(t.id)},c.a.createElement("img",{className:b,src:p,alt:"poster-".concat(t.id),title:t.title,onError:d}),c.a.createElement("div",null,c.a.createElement("p",{className:"row-title"},t.title),c.a.createElement("p",{className:"summary"},j)),new Date(t.releaseDate)<=new Date?c.a.createElement(l.a,{value:t.avgScore})?null==t.releaseDate:c.a.createElement("p",null):c.a.createElement("p",{className:"movie-row-date"},Object(o.d)(t.releaseDate.toString())))})},64:function(e,t,a){"use strict";var r=a(12),n=a(0),c=a.n(n),s=a(56);t.a=function(e){var t=e.movie,a=Object(s.g)("/rewer/uploads/posters","".concat(t.id,".jpg"),s.a.Medium,!0),l=Object(r.a)(a,2),o=l[0],i=l[1],u=Object(n.useState)(""),m=Object(r.a)(u,2),f=m[0],p=m[1],d=Object(n.useState)(""),v=Object(r.a)(d,2),E=v[0],b=v[1],w=Object(n.useRef)();return Object(n.useEffect)((function(){t.avgScore>6?(p("high-poster"),b("high"),w.current.style.display="block"):t.avgScore>3?(p("medium-poster"),b("medium"),w.current.style.display="block"):t.avgScore>0?(p("low-poster"),b("low"),w.current.style.display="block"):w.current.style.display="none"}),[t]),Object(n.useEffect)((function(){}),[t]),c.a.createElement("div",{className:"movie-container fade"},c.a.createElement("img",{className:f,src:o,alt:"".concat(t.title,"-poster"),onError:i}),c.a.createElement("p",{className:"movie-title"},t.title),c.a.createElement("div",{ref:w,className:E},c.a.createElement("p",{className:"score-line"},Math.round(10*t.avgScore)/10)))}},69:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var r=a(2),n=a.n(r),c=a(3),s=a(12),l=a(0),o=a.n(l),i=a(11),u=a(13),m=a(59),f=a(64);function p(){var e=Object(l.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],p=Object(u.getCaller)(m.b.selectLatestMoviesJson),d=Object(s.a)(p,2),v=d[0],E=d[1];function b(){return(b=Object(c.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,a=Math.floor(5*Math.random()),t&&r(t.slice(a,a+2));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){return function(){b.apply(this,arguments)}(),function(){E.abort()}}),[]),o.a.createElement(l.Fragment,null,o.a.createElement("h3",{className:"center-text"},"Featured Films"),o.a.createElement("div",{className:"double-grid"},a.map((function(e){return o.a.createElement(i.b,{key:"featured-".concat(e.id),to:"/rewer/movie?movieId=".concat(e.id)},o.a.createElement(f.a,{movie:e}))}))))}},72:function(e,t,a){"use strict";a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return f})),a.d(t,"c",(function(){return d}));var r=a(2),n=a.n(r),c=a(3),s=a(13),l={doesExist:"/user/does_exist",selectDetailedUser:"/user/select_detailed_user",uploadAvatar:"/user/upload_avatar",updateUserInfo:"/user/update_user_info",selectFollowers:"/user/select_followers",selectFollowedUsers:"/user/select_followed_users"};function o(e){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={userName:t},e.next=3,s.POSTAsynch("/user/does_exist",a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={userName:t},e.next=3,s.POSTAsynch("/user/select_detailed_user",a);case 3:if(200!==(r=e.sent).status){e.next=8;break}return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.UploadFile("/user/upload_avatar",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.POSTAsynch("/user/update_user_info",t);case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},74:function(e,t,a){"use strict";var r=a(0),n=a.n(r),c=a(11);t.a=function(e){var t=e.message;return n.a.createElement("p",null,"You must be ",n.a.createElement(c.b,{to:"/rewer/profile"},"logged in")," ",t)}},84:function(e,t,a){"use strict";var r=a(12),n=a(0),c=a.n(n),s=a(85),l=a(11),o=a(56);t.a=function(e){var t=e.review,a=e.onDelete,i=Object(o.g)("/rewer/uploads/posters","0.jpg",o.a.Small),u=Object(r.a)(i,3),m=u[0],f=u[1],p=u[2];return Object(n.useEffect)((function(){t.seriesId?p("/rewer/uploads/seriesposters","".concat(t.seriesId,".jpg")):p("/rewer/uploads/posters","".concat(t.movieId,".jpg"))}),[t]),c.a.createElement("div",{className:"followed-review-grid"},c.a.createElement("div",{className:"review-poster-container"},null!=t.seriesId?c.a.createElement(n.Fragment,null,c.a.createElement(l.b,{to:"/rewer/series?seriesId=".concat(t.seriesId)},c.a.createElement("img",{src:m,alt:"".concat(t.movieTitle,"-poster"),onError:f,className:"review-poster"}),c.a.createElement("p",null,t.seriesTitle)),c.a.createElement(l.b,{to:"/rewer/movie?movieId=".concat(t.movieId)},c.a.createElement("p",null,t.movieTitle))):c.a.createElement(l.b,{to:"/rewer/movie?movieId=".concat(t.movieId)},c.a.createElement("img",{src:m,alt:"".concat(t.movieTitle,"-poster"),onError:f}),c.a.createElement("p",null,t.movieTitle))),c.a.createElement("div",null,c.a.createElement(s.a,{review:t,onDelete:a})))}},86:function(e,t,a){"use strict";var r=a(12),n=a(0),c=a.n(n),s=a(11),l=a(60),o=a(93),i=a(57),u=(a(76),a(56));t.a=function(e){var t=e.review,a=e.onDelete,m=Object(n.useState)(c.a.createElement("p",null)),f=Object(r.a)(m,2),p=f[0],d=f[1],v=c.a.createElement(n.Fragment,null,c.a.createElement("p",{className:"review-text"},t.text.substring(0,500)),c.a.createElement("p",{onClick:function(){d(c.a.createElement(n.Fragment,null,c.a.createElement("p",{className:"review-text"},t.text),c.a.createElement("p",{onClick:y,className:"show-more"},"Show less")))},className:"show-more"},"Show more")),E=Object(n.useState)("movie-title"),b=Object(r.a)(E,2),w=b[0],g=b[1],j=Object(u.g)("/rewer/uploads/avatars","".concat(t.userName,".jpg"),u.a.Small),O=Object(r.a)(j,2),h=O[0],N=O[1];function y(){d(v)}return Object(n.useEffect)((function(){t.text.length>500?y():d(c.a.createElement("p",{className:"review-text"},t.text)),t.score>6?g("movie-title title-high"):t.score>3?g("movie-title title-medium"):g("movie-title title-low")}),[t]),c.a.createElement("div",{className:"review-container"},c.a.createElement("div",{className:"review-grid"},null!=t.nickName&&""!==t.nickName?c.a.createElement(s.b,{to:"/rewer/user?userName=".concat(t.userName)},c.a.createElement("img",{className:"avatar",src:h,alt:"avatar_".concat(t.nickName),onError:N})):c.a.createElement("p",null),c.a.createElement(s.b,{className:"nick-name",to:"/rewer/user?userName=".concat(t.userName)},t.nickName),c.a.createElement(l.a,{value:t.score})),t.seriesId?c.a.createElement(n.Fragment,null,c.a.createElement(s.b,{className:w,to:"/rewer/series?seriesId=".concat(t.seriesId)},t.seriesTitle,":"),c.a.createElement("br",null),c.a.createElement("br",null)):c.a.createElement(n.Fragment,null),c.a.createElement(s.b,{className:w,to:"/movie?movieId=".concat(t.movieId)},t.movieTitle),p,c.a.createElement(o.a,{reviewLike:t.myLike,onDelete:a,popIndex:t.popIndex,reviewDate:Object(i.d)(t.date)}))}},88:function(e,t,a){"use strict";var r=a(12),n=a(0),c=a.n(n),s=a(11),l=a(56);t.a=function(e){var t=e.user,a=Object(l.g)("/rewer/uploads/avatars","".concat(t.userName,".jpg"),l.a.Small),n=Object(r.a)(a,2),o=n[0],i=n[1];return c.a.createElement(s.b,{to:"/rewer/user?userName=".concat(t.userName)},c.a.createElement("div",{className:"followed-user-row highlight"},c.a.createElement("img",{src:o,onError:i,className:"followed-user-row-item",alt:"user-poster"}),c.a.createElement("p",{className:"followed-user-row-item"},t.nickName)))}},91:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var r=a(19),n=a(2),c=a.n(n),s=a(3),l=a(12),o=a(0),i=a.n(o),u=a(13),m=a(59),f=a(63);function p(){var e=Object(o.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],p=Object(u.postCaller)({min:7,limit:4,offset:0},m.b.selectMoviesByScore),d=Object(l.a)(p,2),v=d[0],E=d[1];return Object(o.useEffect)((function(){function e(){return(e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:(t=e.sent)&&n(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){E.abort()}}),[]),i.a.createElement(o.Fragment,null,i.a.createElement("h3",{className:"center-text"},"Top Rated"),a.map((function(e){return i.a.createElement(f.a,{key:"top-rated-".concat(e.id),movie:Object(r.a)(Object(r.a)({},e),{},{summary:""})})})))}},95:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var r=a(20),n=a(2),c=a.n(n),s=a(3),l=a(12),o=a(0),i=a.n(o),u=a(56),m=a(84),f=a(86),p=a(74),d=a(66),v=a(13);function E(){var e=Object(u.d)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],E=Object(o.useState)(i.a.createElement(o.Fragment,null)),b=Object(l.a)(E,2),w=b[0],g=b[1],j=Object(v.postCaller)({limit:10,offset:0},d.b.selectFollowedReviews),O=Object(l.a)(j,2),h=O[0],N=O[1],y=Object(u.h)(.9,(function(){return _.apply(this,arguments)})),x=Object(l.a)(y,2),S=x[0],k=x[1];function F(){return(F=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({limit:10,offset:0},d.b.selectFollowedReviews,v.ECallType.SELECT);case 2:(t=e.sent)?(n(t),10===t.length&&S()):null!=localStorage.getItem("userName")&&setTimeout(I,3e3);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return(T=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({limit:10,offset:0},d.b.selectFollowedReviews,v.ECallType.SELECT);case 2:(t=e.sent)?(n(t),10===t.length&&S()):g(i.a.createElement(p.a,{message:"manage your followers."}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(),e.next=3,h({limit:10,offset:a.current.length},d.b.selectFollowedReviews,v.ECallType.SELECT);case 3:(t=e.sent)&&(n([].concat(Object(r.a)(a.current),Object(r.a)(t))),10===t.length&&S());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return D.apply(this,arguments)}function D(){return(D=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({id:t},d.b.deleteReview,v.ECallType.ISOK);case 2:if(!e.sent){e.next=4;break}n(a.current.filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.useEffect)((function(){return localStorage.getItem("userName")&&function(){F.apply(this,arguments)}(),function(){N.abort(),k()}}),[]),i.a.createElement("div",null,window.screen.width>600?i.a.createElement(o.Fragment,null,w,null==localStorage.getItem("userName")?i.a.createElement(p.a,{message:"to follow other reviewers."}):i.a.createElement(o.Fragment,null),a.current.map((function(e){return i.a.createElement(m.a,{key:"followed-".concat(e.id),review:e,onDelete:C})}))):i.a.createElement(o.Fragment,null,w,a.current.map((function(e){return i.a.createElement(f.a,{key:"followed-".concat(e.id),review:e,onDelete:C})}))))}},97:function(e,t,a){"use strict";var r=a(2),n=a.n(r),c=a(3),s=a(12),l=a(0),o=a.n(l),i=a(13),u=a(72),m=a(88);t.a=function(){var e=Object(l.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],f=Object(i.postCaller)({userName:localStorage.getItem("userName")},u.e.selectFollowedUsers),p=Object(s.a)(f,2),d=p[0],v=p[1];function E(){return(E=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:(t=e.sent)&&r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){return localStorage.getItem("userName")&&function(){E.apply(this,arguments)}(),function(){v.abort()}}),[]),o.a.createElement(l.Fragment,null,o.a.createElement("h3",{className:"center-text"},"Followed"),a.map((function(e){return o.a.createElement(m.a,{key:"followed-".concat(e.userName),user:e})})))}},98:function(e,t,a){"use strict";var r=a(2),n=a.n(r),c=a(3),s=a(12),l=a(0),o=a.n(l),i=a(72),u=a(88),m=a(11),f=a(13);t.a=function(e){var t=e.length,a=Object(l.useState)([]),r=Object(s.a)(a,2),p=r[0],d=r[1],v=Object(f.postCaller)({userName:localStorage.getItem("userName"),limit:t},i.e.selectFollowers),E=Object(s.a)(v,2),b=E[0],w=E[1];function g(){return(g=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:(t=e.sent)&&d(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){return localStorage.getItem("userName")&&function(){g.apply(this,arguments)}(),function(){w.abort()}}),[]),o.a.createElement(l.Fragment,null,o.a.createElement("h3",{className:"center-text"},"My Followers"),p.slice(0,8).map((function(e){return o.a.createElement(u.a,{key:"followed-".concat(e.userName),user:e})})),p.length>t?o.a.createElement(m.b,{to:"TODO"},"More"):o.a.createElement(l.Fragment,null))}}}]);
//# sourceMappingURL=12.4f6a338d.chunk.js.map