(this.webpackJsonprewer=this.webpackJsonprewer||[]).push([[0],{56:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return v})),n.d(t,"b",(function(){return f})),n.d(t,"h",(function(){return d})),n.d(t,"a",(function(){return r})),n.d(t,"g",(function(){return b}));var r,a=n(28),c=n(19),i=n(12),o=n(0);function u(e){var t=Object(o.useRef)(e),n=Object(o.useState)(!1),r=Object(i.a)(n,2)[1];return[t,function(e){Object.is(t.current,e)||(t.current=e,r((function(e){return!e})))}]}function s(e){var t=Object(o.useState)(e),n=Object(i.a)(t,2),r=n[0],u=n[1];return[r,u,function(e){u(Object(c.a)(Object(c.a)({},r),{},Object(a.a)({},e.target.name,e.target.value)))}]}function l(e){var t=Object(o.useRef)(e),n=Object(o.useState)(!1),r=Object(i.a)(n,2)[1],u=function(e){Object.is(t.current,e)||(t.current=e,r((function(e){return!e})))};return[t,u,function(e){u(Object(c.a)(Object(c.a)({},t.current),{},Object(a.a)({},e.target.name,e.target.value)))}]}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=m(e,t>0,t),r=Object(i.a)(n,2),a=r[0],c=r[1],u=Object(o.useState)(c),s=Object(i.a)(u,2),l=s[0],v=s[1],f=Object(o.useState)(a),d=Object(i.a)(f,2),b=d[0],p=d[1],w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=m(e,t>0,t),r=Object(i.a)(n,2),a=r[0],c=r[1];p(a),v(c)};return[b,l,w]}function m(e,t,n){return t&&e.length>n?[e.substring(0,n)+"...",!0]:[e,!1]}function f(e,t){"Enter"===e.key&&t()}function d(e,t){var n=e;(e>1||e<0)&&(n=.8);var r=Object(o.useRef)(n),a=function(){window.innerHeight+window.scrollY>=document.body.offsetHeight*r.current&&t()};return[function(){window.addEventListener("scroll",a)},function(){window.removeEventListener("scroll",a)}]}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.Normal,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object(o.useState)("".concat(e,"/").concat(n).concat(t)),u=Object(i.a)(c,2),s=u[0],l=u[1],v=Object(o.useRef)(a),m=function(){v.current?(l("".concat(e,"/").concat(r.Normal).concat(t)),v.current=!1):l("".concat(e,"/").concat(n,"0.jpg"))},f=function(e,t){l("".concat(e,"/").concat(n).concat(t))};return[s,m,f]}!function(e){e.Normal="",e.Medium="medium-",e.Small="small-"}(r||(r={}))},57:function(e,t,n){"use strict";function r(e){return"".concat(e.getFullYear(),". ").concat(s[e.getMonth()]," ").concat(e.getDate())}function a(e){return new Date(e).getFullYear()}function c(e){return s[new Date(e).getMonth()]}function i(e){return new Date(e).getDate()}function o(e){var t=new Date(e);return"".concat(t.getDate()," ").concat(s[t.getMonth()]," ").concat(t.getFullYear())}function u(e){var t,n;return t=e.getMonth()<9?"0".concat(e.getMonth()+1):(e.getMonth()+1).toString(),n=e.getDate()<10?"0".concat(e.getDate()):e.getDate().toString(),"".concat(e.getFullYear(),"-").concat(t,"-").concat(n)}n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return u}));var s=["Janury","February","March","April","May","June","July","August","September","October","November","December"]},58:function(e,t,n){},59:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(2),a=n.n(r),c=n(3),i=n(13),o={selectDetailedMovie:"/movie/select_detailed_movie",selectLatestMovies:"/movie/select_latest_movies",selectLatestMoviesJson:"/jsondb/latest_movies.json",selectLatestMoviesByGenre:"/movie/select_latest_movies_by_genre",selectMoviesByScore:"/movie/select_movies_by_score",getGenres:"/jsondb/genres.json",insertMovie:"/movie/insert_movie",updateMovie:"/movie/update_movie",deleteMovie:"/movie/delete_movie",uploadPoster:"/movie/upload_poster",insertMovieGenre:"/genre/insert_movie_genre",deleteMovieGenre:"/genre/delete_movie_genre",selectUpcomingMovies:"/movie/select_upcoming_movies",selectUpcomingMoviesJson:"/jsondb/upcoming_movies.json"};function u(e){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.UploadFile)("/movie/upload_poster",t);case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t){return e.genreName.localeCompare(t.genreName)}},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(12),a=n(0),c=n.n(a),i=function(e){var t=e.value,n=Object(a.useState)("score"),i=Object(r.a)(n,2),o=i[0],u=i[1];return Object(a.useEffect)((function(){u(t>6?"score high":t>3?"score":t>0?"score low":"score unset")}),[t]),c.a.createElement("div",{className:o},c.a.createElement("p",null,Math.round(10*t)/10))}},66:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var r,a={selectMyReview:"/review/select_review_by_user_and_movie",selectReviewsByMovie:"/review/select_reviews_by_movie",selectFollowedReviews:"/review/select_followed_reviews",selectReviewsByUser:"/review/select_reviews_by_user",insertReview:"/review/insert_review",deleteReview:"/review/delete_review",updateReview:"/review/update_review",insertReviewLike:"/review/insert_reviewlike",updateReviewLike:"/review/update_reviewlike",selectReviewByUserAndMovie:"/review/select_review_by_user_and_movie"};!function(e){e.popIndex="popIndex",e.date="date"}(r||(r={}))},76:function(e,t,n){},77:function(e,t,n){},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(12),a=n(0),c=n.n(a),i=n(11),o=(n(76),n(57)),u=n(60),s=n(93),l=n(56),v=(n(77),function(e){var t=e.review,n=e.onDelete,v=Object(l.f)(t.text,500),m=Object(r.a)(v,3),f=m[0],d=m[1],b=m[2],p=Object(l.g)("/rewer/uploads/avatars","".concat(t.userName,".jpg"),l.a.Small),w=Object(r.a)(p,2),j=w[0],O=w[1];return Object(a.useEffect)((function(){b(t.text,500)}),[t]),c.a.createElement("div",{className:"review-container"},c.a.createElement("div",{className:"review-grid"},null!=t.nickName&&""!==t.nickName?c.a.createElement(i.b,{to:"/review/user?userName=".concat(t.userName)},c.a.createElement("img",{className:"avatar",src:j,onError:O,alt:"avatar_".concat(t.userName)})):c.a.createElement("p",null),c.a.createElement(i.b,{className:"nick-name",to:"/rewer/user?userName=".concat(t.userName)},t.nickName),c.a.createElement(u.a,{value:t.score})),f,d?c.a.createElement(a.Fragment,null,c.a.createElement("p",{onClick:function(){b(t.text)},className:"show-more"},"Show more")):c.a.createElement(a.Fragment,null,t.text.length>500?c.a.createElement("p",{onClick:function(){b(t.text,500)},className:"show-more"},"Show less"):c.a.createElement(a.Fragment,null)),c.a.createElement(s.a,{reviewLike:t.myLike,popIndex:t.popIndex,onDelete:n,reviewDate:Object(o.d)(t.date)}))})},93:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(3),i=n(19),o=n(12),u=n(0),s=n.n(u),l=n(4),v=n(6),m=(n(76),n(66)),f=n(13),d=n(31),b=n(26);t.a=function(e){var t=e.reviewLike,n=e.popIndex,r=e.onDelete,p=e.reviewDate,w=Object(u.useContext)(d.a).showModal,j=Object(u.useState)(t),O=Object(o.a)(j,2),g=O[0],_=O[1],E=Object(u.useState)(n),h=Object(o.a)(E,2),k=h[0],y=h[1],N=Object(u.useState)(""),M=Object(o.a)(N,2),S=M[0],x=M[1],R=Object(u.useState)(""),D=Object(o.a)(R,2),F=D[0],I=D[1],C=Object(u.useRef)(),L=Object(u.useRef)(),B=Object(f.postCaller)(),J=Object(o.a)(B,2),U=J[0],Y=J[1],A=Object(u.useContext)(b.a).messenger;function G(e){var t=e.value-g.value;y((function(e){return e+t}))}function T(e){return H.apply(this,arguments)}function H(){return(H=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t,m.b.insertReviewLike,f.ECallType.INSERT);case 2:n=e.sent,G(r=Object(i.a)(Object(i.a)({},g),{},{id:n,value:t.value})),_(r),(null==r||r.id<1)&&A.addFail("Server error: could not like/dislike the selected review.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return P.apply(this,arguments)}function P(){return(P=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(t),G(t),e.next=4,U(t,m.b.updateReviewLike,f.ECallType.ISOK);case 4:if(e.sent){e.next=6;break}A.addFail("Server error: could not like/dislike the selected revie.w");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return z.apply(this,arguments)}function z(){return(z=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t.reviewId);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){return null==localStorage.getItem("userName")&&(C.current.style.display="none",L.current.style.display="none"),function(){Y.abort(),A.clear()}}),[]),Object(u.useEffect)((function(){x("up-arrow unliked"),I("down-arrow unliked"),g&&(1===g.value?x("up-arrow liked"):-1===g.value&&I("down-arrow disliked"))}),[g]),s.a.createElement("div",{className:"like-adder"},s.a.createElement("div",null,s.a.createElement("span",{ref:C,className:S},s.a.createElement(l.a,{onClick:function(){var e;e=1===g.value?Object(i.a)(Object(i.a)({},g),{},{value:0}):(g.value,Object(i.a)(Object(i.a)({},g),{},{value:1})),g.id>0?K(e):T(e)},icon:v.p})),s.a.createElement("span",{className:"pop-index"},k),s.a.createElement("span",{ref:L,className:F},s.a.createElement(l.a,{onClick:function(){var e;e=-1===g.value?Object(i.a)(Object(i.a)({},g),{},{value:0}):(g.value,Object(i.a)(Object(i.a)({},g),{},{value:-1})),g.id>0?K(e):T(e)},icon:v.o}))),s.a.createElement("div",{className:"review-date"},s.a.createElement("span",{className:"review-date"},p),localStorage.getItem("permission")&&parseInt(localStorage.getItem("permission"))>1?s.a.createElement("span",{className:"delete-icon"},s.a.createElement(l.a,{onClick:function(){w(q,{title:"Removing review",content:s.a.createElement(u.Fragment,null,s.a.createElement("p",null,"If you delete this review, it won't be possible to retrieve it later."),s.a.createElement("p",null,"Are you certain you still want to proceed?")),acceptButton:s.a.createElement(u.Fragment,null,"Delete review"),refuseButton:s.a.createElement(u.Fragment,null,"Cancel")})},icon:v.s})):s.a.createElement(u.Fragment,null)))}}}]);
//# sourceMappingURL=0.a24765e6.chunk.js.map